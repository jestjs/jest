<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Expect · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Expect · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="Когда вы пишете тесты, вам, как правило, необходимо проверять, что значения соответствуют определенным условиям. `expect` предоставляет вам доступ к ряду «проверок» (matchers), которые позволяют сопоставить результаты с ожиданиями."><link rel="apple-touch-icon" sizes="180x180" href="/jest/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/jest/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/jest/img/favicon/favicon-16x16.png"><link rel="manifest" href="/jest/img/favicon/manifest.json"><link rel="mask-icon" href="/jest/img/favicon/safari-pinned-tab.svg"><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"><meta name="msapplication-config" content="/jest/img/favicon/browserconfig.xml"><meta name="theme-color" content="#99424f"><link rel="alternate" type="application/atom+xml" href="/jest/blog/atom.xml" title="Jest Blog ATOM Feed"><link rel="alternate" type="application/rss+xml" href="/jest/blog/feed.xml" title="Jest Blog RSS Feed"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css?v=2"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/ru/getting-started.html" class="active">Документация</a></li><li><a href="/jest/docs/ru/api.html" class="">API</a></li><li><a href="/jest/ru/help.html" class="">Справка</a></li><li><a href="/jest/blog/" class="">Блог</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg">Русский</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>API Reference</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Введение</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/getting-started.html#content">Начало работы</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/using-matchers.html#content">Использование функций-проверок</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/asynchronous.html#content">Тестирование асинхронного кода</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/mock-functions.html#content">Mock-функции</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/more-resources.html#content">Дополнительные ресурсы</a></li></ul></div><div class="navGroup navGroupActive"><h3>Справочник по API</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/api.html#content">Глобальные значения</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/ru/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/mock-function-api.html#content">Mock-функции</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/jest-object.html#content">Объект Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/configuration.html#content">Настройка Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/cli.html#content">Опции командной строки Jest</a></li></ul></div><div class="navGroup navGroupActive"><h3>Руководства</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/snapshot-testing.html#content">Тестирование при помощи снимков</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-react.html#content">Тестирование React приложений</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-react-native.html#content">Тестирование React Native приложений</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-async.html#content">Пример с асинхронностью</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/manual-mocks.html#content">Создаваемые вручную моки</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/webpack.html#content">Использование с Webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/migration-guide.html#content">Переход на Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/testing-frameworks.html#content">Testing Other Frameworks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/troubleshooting.html#content">Устранение неполадок</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/ru" target="_blank">Translate this Doc</a><h1>Expect</h1></header><article><div><p>Когда вы пишете тесты, вам, как правило, необходимо проверять, что значения соответствуют определенным условиям. <code>expect</code> предоставляет вам доступ к ряду «проверок» (matchers), которые позволяют сопоставить результаты с ожиданиями.</p><h2><a class="anchor" name=""></a>Методы <a class="hash-link" href="#">#</a></h2><div><autogenerated_table_of_contents>

</div><hr><h2><a class="anchor" name=""></a>Справка <a class="hash-link" href="#">#</a></h2><h3><a class="anchor" name="expectvalue"></a><code>expect(value)</code> <a class="hash-link" href="#expectvalue">#</a></h3><p>Функция <code>expect</code> используется каждый раз, когда вы хотите проверить значение. Однако, вам редко придется вызывать <code>expect</code> саму по себе. Вместо этого вы будете использовать <code>expect</code> вместе с функцией-проверкой для утверждения чего-либо о значении.</p><p>Это легче понять на примере. Скажем, у вас есть метод <code>bestLaCroixFlavor()</code>, который должен возвращать строку <code>«грейпфрут»</code>. Вот как можно это протестировать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;лучший вкус это грейпфрут&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestLaCroixFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;грейпфрут&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>В данном случае для проверки значения используется функция <code>toBe</code>. Существует множество подобных функций, которые помогут вам тестировать различные вещи. Их список приведён ниже.</p><p>Аргументом для функции <code>expect</code> должно быть значение, которое возвращает ваш код, а в функцию проверки необходимо передавать ожидаемое верное значение. Если их перепутать местами, то тесты будут продолжать работать, а вот сообщения об ошибках в тестах будут выглядеть странно.</p><h3><a class="anchor" name="expectextendmatchers"></a><code>expect.extend(matchers)</code> <a class="hash-link" href="#expectextendmatchers">#</a></h3><p><code>expect.extend</code> используется для добавления новых проверок в Jest. Предположим, что вы тестируете библиотеку для работы с числами и вам довольно часто необходимо проверять, что числа делятся на другие числа без остатка. Тогда вы могли бы написать функцию <code>toBeDivisibleBy</code>, которая проверяет это:</p><pre class="prism language-javascript">
expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toBeDivisibleBy</span><span class="token punctuation">(</span>received<span class="token punctuation">,</span> argument<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pass <span class="token operator">=</span> <span class="token punctuation">(</span>received <span class="token operator">%</span> argument <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>
          <span class="token template-string"><span class="token string">`ожидалось что </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> не делится на </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>argument<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        pass<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`ожидалось что </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> делится на </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>argument<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        pass<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Функции-проверки должны возвращать объект с двумя ключами. Ключ <code>pass</code> указывает было ли совпадение успешным или нет, а <code>message</code> представляет собой функцию без аргументов, которая возвращает сообщение об ошибке в случае проваленого теста. То есть, если <code>pass</code> имеет значение false, функция <code>message</code> должна возвращать сообщение об ошибке в случае если <code>expect(x).yourMatcher()</code> не выполняется. Когда же <code>pass</code> имеет значение true, функция <code>message</code> должна возвращать сообщение об ошибке в случае, если не выполняется <code>expect(x).not.yourMatcher()</code>.</p><p>По ссылке <code>this</code> внутри пользовательской проверки можно получить доступ к следующим вспомогательным методам:</p><h4><a class="anchor" name="thisisnot"></a><code>this.isNot</code> <a class="hash-link" href="#thisisnot">#</a></h4><p>Значение типа boolean, сигнализирующее о том, что функция была вызвана с модификатором отрицания <code>.not</code>, позволяющим инвертировать утверждение.</p><h4><a class="anchor" name="thisequalsa-b"></a><code>this.equals(a, b)</code> <a class="hash-link" href="#thisequalsa-b">#</a></h4><p>Функция для проверки двух объектов на равенство (в т. ч. вложенных свойств). Возвращает значение типа <code>boolean</code>.</p><h4><a class="anchor" name="thisutils"></a><code>this.utils</code> <a class="hash-link" href="#thisutils">#</a></h4><p>Существует целый ряд полезных инструментов доступных через <code>this.utils</code> и в основном состоящий из функций экспортируемых из <a href="https://github.com/facebook/jest/tree/master/packages/jest-matcher-utils" target="_blank"><code>jest-matcher-utils</code></a>.</p><p>Наиболее полезными из них являются <code>matcherHint</code>, <code>printExpected</code> и <code>printReceived</code> для форматирования сообщений об ошибках. Например, взгляните как это реализовано для функции <code>toBe</code>:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> diff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;jest-diff&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toBe</span><span class="token punctuation">(</span>received<span class="token punctuation">,</span> expected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pass <span class="token operator">=</span> received <span class="token operator">===</span> expected<span class="token punctuation">;</span>

    <span class="token keyword">const</span> message <span class="token operator">=</span> pass
      <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">matcherHint</span><span class="token punctuation">(</span><span class="token string">&#x27;.not.toBe&#x27;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#x27;\n\n&#x27;</span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`Expected value to not be (using ===):\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printExpected</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`Received:\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printReceived</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
      <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> diffString <span class="token operator">=</span> <span class="token function">diff</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> received<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          expand<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>expand<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">matcherHint</span><span class="token punctuation">(</span><span class="token string">&#x27;.toBe&#x27;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#x27;\n\n&#x27;</span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`Expected value to be (using ===):\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printExpected</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`Received:\n`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printReceived</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token operator">+</span>
        <span class="token punctuation">(</span>diffString <span class="token operator">?</span> <span class="token template-string"><span class="token string">`\n\nDifference:\n\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>diffString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>actual<span class="token punctuation">:</span> received<span class="token punctuation">,</span> message<span class="token punctuation">,</span> pass<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Отобразится что-то вроде этого:</p><pre class="prism language-javascript">
  <span class="token function">expect</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span>

    Expected value to be <span class="token punctuation">(</span>using <span class="token operator">===</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token string">&quot;banana&quot;</span>
    Received<span class="token punctuation">:</span>
      <span class="token string">&quot;apple&quot;</span></pre><p>Когда утверждение становится ложным, сообщение об ошибке должно дать пользователю как можно больше информации, необходимой, чтобы быстро решить проблему. Поэтому, разрабатывая новые проверки, вам необходимо реализовывать в них точные и ясные сообщения об ошибках.</p><h3><a class="anchor" name="expectanything"></a><code>expect.anything()</code> <a class="hash-link" href="#expectanything">#</a></h3><p><code>expect.anything()</code> совпадает с любыми значениями, кроме <code>null</code> или <code>undefined</code>. Её можно использовать внутри <code>toEqual</code> или <code>toBeCalledWith</code> вместо литералов. Например, если вы хотите проверить, что функция-заглушка была вызвана с аргументом, не равным null:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;map calls its argument with a non-null argument&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">anything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="expectanyconstructor"></a><code>expect.any(constructor)</code> <a class="hash-link" href="#expectanyconstructor">#</a></h3><p><code>expect.any(constructor)</code> проверяет, что значение было создано с помощью данного конструктора. Её можно использовать внутри <code>toEqual</code> или <code>toBeCalledWith</code> вместо литералов. Например, если вы хотите проверить, что функция-заглушка была вызвана с аргументом типа число:</p><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">randocall</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;randocall calls its callback with a number&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">randocall</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="expectarraycontainingarray"></a><code>expect.arrayContaining(array)</code> <a class="hash-link" href="#expectarraycontainingarray">#</a></h3><p><code>expect.arrayContaining(array)</code> проверяет, что данный массив содержит все элементы тестового. Иными словами, что тестовый массив является <strong>подмножеством</strong> данного. Отсюда в том числе следует, что этот массив может содержать элементы, которых <strong>нет</strong> в тестовом.</p><p>Можно использовать данный метод вместо литерала:</p><ul><li>в функциях <code>toEqual</code> или <code>toBeCalledWith</code></li><li>для проверки свойств объектов в <code>objectContaining</code> или <code>toMatchObject</code></li></ul><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;arrayContaining&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;Alice&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bob&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;matches even if received contains additional elements&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Alice&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bob&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eve&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;does not match if received does not contain expected elements&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Bob&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eve&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;Beware of a misunderstanding! A sequence of dice rolls&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;matches even with an unexpected number 7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;does not match without an expected number 2&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="expectassertionsnumber"></a><code>expect.assertions(number)</code> <a class="hash-link" href="#expectassertionsnumber">#</a></h3><p><code>expect.assertions(number)</code> проверяет, что во время выполнения теста было вызвано определённое число проверок. Это обычно полезно для тестирования асинхронного кода, чтобы удостовериться, что проверки действительно были вызваны в функциях обратного вызова.</p><p>Скажем, у нас есть функция <code>doAsync</code>, которая получает на вход две функции обратного вызова <code>callback1</code> и <code>callback2</code>. Обе этих функции будут вызваны асинхронно в неизвестном заранее порядке. Это можно протестировать так:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;doAsync calls both callbacks&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token function">assertions</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">callback1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">callback2</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">doAsync</span><span class="token punctuation">(</span>callback1<span class="token punctuation">,</span> callback2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Код <code>expect.assertions(2)</code> проверяет, что обе функции были вызваны.</p><h3><a class="anchor" name="expecthasassertions"></a><code>expect.hasAssertions()</code> <a class="hash-link" href="#expecthasassertions">#</a></h3><p><code>expect.hasAssertions()</code> проверяет, что во время выполнения теста была вызвана хотя бы одна проверка. Это обычно полезно для тестирования асинхронного кода, чтобы удостовериться, что проверки действительно были вызваны в функциях обратного вызова.</p><p>Предположим, что у нас есть несколько функций, которые работают с неким состоянием. <code>prepareState</code> запускает функцию обратного вызова с объектом состояния, <code>validateState</code> выполняет над этим объектом некую операцию, а <code>waitOnState</code> возвращает Promise, который ожидает, пока все фунцкии обратного вызова внутри <code>prepareState</code> не будут выполнены. Это можно протестировать так:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;prepareState prepares a valid state&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token function">hasAssertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">prepareState</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">validateState</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">waitOnState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Код <code>expect.hasAssertions()</code> проверяет, что функция обратного вызова в <code>prepareState</code> была вызвана.</p><h3><a class="anchor" name="expectobjectcontainingobject"></a><code>expect.objectContaining(object)</code> <a class="hash-link" href="#expectobjectcontainingobject">#</a></h3><p><code>expect.objectContaining(object)</code> проверяет (рекурсивно), что данный объект имеет те или иные свойства. Иными словами, что тестовый объект является <strong>подмножеством</strong> данного. Отсюда в том числе следует, что этот объект может содержать свойста, которых <strong>нет</strong> в тестовом.</p><p>Instead of literal property values in the expected object, you can use matchers, <code>expect.anything()</code>, and so on.</p><p>Предположим, мы ожидаем, что функция <code>onPress</code> будет вызвана с объектом <code>Event</code> и всё, что мы хотим проверить — это то, что этот объект имеет свойства <code>event.x</code> и <code>event.y</code>. Это можно сделать так:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;onPress gets called with the right thing&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> _onPress <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">simulatePresses</span><span class="token punctuation">(</span>_onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>_onPress<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">objectContaining</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="expectstringcontainingstring"></a><code>expect.stringContaining(string)</code> <a class="hash-link" href="#expectstringcontainingstring">#</a></h3><h5><a class="anchor" name="jest-1900"></a>доступно в версиях Jest <strong>19.0.0+</strong> <a class="hash-link" href="#jest-1900">#</a></h5><p><code>expect.stringContaining(string)</code> проверяет, что данная строка содержит в себе тестовую.</p><h3><a class="anchor" name="expectstringmatchingregexp"></a><code>expect.stringMatching(regexp)</code> <a class="hash-link" href="#expectstringmatchingregexp">#</a></h3><p><code>expect.stringMatching(regexp)</code> проверяет, что данная строка соответствует регулярному выражению.</p><p>Можно использовать данный метод вместо литерала:</p><ul><li>в функциях <code>toEqual</code> или <code>toBeCalledWith</code></li><li>для проверки элемента в <code>arrayContaining</code></li><li>для проверки свойств объектов в <code>objectContaining</code> или <code>toMatchObject</code></li></ul><p>Следующий пример также демонстрирует, что вы можете вложить друг в друга несколько асимметричных проверок. В данном случае <code>expect.stringMatching</code> находится внутри <code>expect.arrayContaining</code>.</p><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;stringMatching in arrayContaining&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span>
    expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex">/^Alic/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex">/^[BR]ob/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;matches even if received contains additional elements&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Alicia&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Roberto&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Evelina&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;does not match if received does not contain expected elements&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Roberto&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Evelina&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="expectaddsnapshotserializerserializer"></a><code>expect.addSnapshotSerializer(serializer)</code> <a class="hash-link" href="#expectaddsnapshotserializerserializer">#</a></h3><p>Вы можете использовать <code>expect.addSnapshotSerializer</code> для добавления модуля, который поддерживает форматирование структур данных, специфичных для вашего приложения.</p><p>Для каждого файла, содержащего тесты, добавленный таким образом модуль будет предшествовать всем модулям, объявленным в параметре конфигурации <code>snapshotSerializers</code>. Те, в свою очередь, предшествуют сериализаторам снимков для встроенных типов JavaScript и элементов React, включённым в Jest по-умолчанию. Последний добавленный модуль будет протестирован первым.</p><pre class="prism language-javascript">
<span class="token keyword">import</span> serializer <span class="token keyword">from</span> <span class="token string">&#x27;my-serializer-module&#x27;</span><span class="token punctuation">;</span>
expect<span class="token punctuation">.</span><span class="token function">addSnapshotSerializer</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// влияет на поведение проверки expect(value).toMatchSnapshot() в файле с тестами</span></pre><p>Если вы добавляете сериализатор снимков в файл с тестами вместо того, чтобы объявить его в параметре конфигурации <code>snapshotSerializers</code>, то:</p><ul><li>Вы делаете зависимость явной.</li><li>Вы избегаете ограничений конфигурации, которые могут помешать вам использовать <a href="https://github.com/facebookincubator/create-react-app" target="_blank">create-react-app</a>.</li></ul><p>Дополнительную информацию можно найти на странице [настройка Jest](/jest/docs/configuration. html#snapshotserializers-array-string). </p><h3><a class="anchor" name="not"></a><code>.not</code> <a class="hash-link" href="#not">#</a></h3><p>Если вы знаете как можно проверить некое утверждение, то <code>.not</code> позволяет вам проверить обратное ему утверждение. Например, следующий код проверяет, что лучший вкус газировки La Croix не является кокосовым:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;the best flavor is not coconut&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestLaCroixFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;coconut&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="resolves"></a><code>.resolves</code> <a class="hash-link" href="#resolves">#</a></h3><h5><a class="anchor" name="jest-2000"></a>доступно в версиях Jest <strong>20.0.0+</strong> <a class="hash-link" href="#jest-2000">#</a></h5><p>Используйте <code>resolves</code> для возврата значения из объекта типа Promise. К возвращённому таким образом значению можно применять другие функции-проверки. Данный метод работает только с объектами Promise в состоянии «выполнено». Если объект Promise находится в состоянии «отклонено», то проверка не выполняется.</p><p>Например, следующий код проверяет, что Promise выполняется и результатом будет <code>&#x27;lemon&#x27;</code>:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;resolves to lemon&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">// не забудьте добавить оператор return</span>
  <span class="token keyword">return</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Кроме того, вы можете использовать <code>async/await</code> в комбинации с <code>.resolves</code>:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;resolves to lemon&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="rejects"></a><code>.rejects</code> <a class="hash-link" href="#rejects">#</a></h3><h5><a class="anchor" name="jest-2000"></a>доступно в версиях Jest <strong>20.0.0+</strong> <a class="hash-link" href="#jest-2000">#</a></h5><p>Используйте <code>.rejects</code> для возврата значения из объекта типа Promise. К возвращённому таким образом значению можно применять другие функции-проверки. Данный метод работает только с объектами Promise в состоянии «отклонено». Если объект Promise находится в состоянии «выполнено», то проверка не выполняется.</p><p>Например, следующий код проверяет, что Promise отклонён с определённым сообщением об ошибке:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;fetchData() rejects to be error&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">// не забудьте добавить оператор return</span>
  <span class="token keyword">return</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rejects<span class="token punctuation">.</span><span class="token function">toBeDefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Кроме того, вы можете использовать <code>async/await</code> в комбинации с <code>.rejects</code>. Следующий код проверяет, что сообщение об ошибке содержит &#x27;octopus&#x27;:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;fetchData() rejects to be error&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drinkOctopus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DisgustingFlavorError</span><span class="token punctuation">(</span><span class="token string">&#x27;yuck, octopus flavor&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span>rejects<span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobevalue"></a><code>.toBe(value)</code> <a class="hash-link" href="#tobevalue">#</a></h3><p><code>toBe</code> просто проверяет, что значение соответствует ожидаемому. Эта функция использует строгую проверку на равенство <code>===</code>.</p><p>For example, this code will validate some properties of the <code>can</code> object:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> can <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&#x27;pamplemousse&#x27;</span><span class="token punctuation">,</span>
  ounces<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;the can&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;has 12 ounces&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can<span class="token punctuation">.</span>ounces<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;has a sophisticated name&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;pamplemousse&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Не следует использовать <code>toBe</code> для чисел с плавающей точкой. В JavaScript <code>0.2 + 0.1</code> не будет равно <code>0.3</code> из-за особенностей округления. Используйте <code>.toBeCloseTo</code> если вам необходимо сравнивать числа с плавающей точкой.</p><h3><a class="anchor" name="tohavebeencalled"></a><code>.toHaveBeenCalled()</code> <a class="hash-link" href="#tohavebeencalled">#</a></h3><p>Другое имя функции: <code>.toBeCalled()</code></p><p>Используйте <code>.toHaveBeenCalled</code>, чтобы убедиться, что функция-заглушка была вызвана.</p><p>Предположим, что у вас есть функция <code>drinkAll(drink, flavor)</code>, которая принимает в качестве параметра функцию <code>drink</code> и вызывает её для всех напитков в вашей системе. Вам может потребоваться протестировать, что <code>drink</code> была вызвана для напитка <code>&#x27;lemon&#x27;</code>, но никак не для напитка <code>&#x27;octopus&#x27;</code>. Было бы весьма странным иметь напиток со вкусом осьминога, не правда ли? Это можно сделать при помощи следующего теста:</p><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;drinkAll&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;drinks something lemon-flavored&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">drinkAll</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;does not drink something octopus-flavored&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">drinkAll</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tohavebeencalledtimesnumber"></a><code>.toHaveBeenCalledTimes(number)</code> <a class="hash-link" href="#tohavebeencalledtimesnumber">#</a></h3><p>Используйте <code>.toHaveBeenCalledTimes</code>, чтобы убедиться, что функция-заглушка была вызвана строго определённое число раз.</p><p>Например, у вас может быть функция <code>drinkEach(drink, Array&lt;flavor&gt;)</code>, которая принимает в качестве параметра функцию <code>drink</code> и вызывает её для каждого элемента массива напитков. Тогда вам может потребоваться проверить, что функция drink была вызвана определённое число раз. Это можно сделать при помощи следующего набора тестов:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;drinkEach drinks each drink&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drinkEach</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;lemon&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tohavebeencalledwitharg1-arg2-"></a><code>.toHaveBeenCalledWith(arg1, arg2, ...)</code> <a class="hash-link" href="#tohavebeencalledwitharg1-arg2-">#</a></h3><p>Also under the alias: <code>.toBeCalledWith()</code></p><p>Используйте <code>.toHaveBeenCalledWith</code>, чтобы убедиться, что функция-заглушка была вызвана с определённым набором аргументов.</p><p>Предположим, что у вас есть функция <code>register</code>, которая добавляет напиток в систему, а также функция <code>applyToAll(f)</code>, должна применить функцию <code>f</code> ко всем напиткам. Чтобы убедиться, что это работает, вы могли бы написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;registration applies correctly to orange La Croix&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> beverage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LaCroix</span><span class="token punctuation">(</span><span class="token string">&#x27;orange&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">register</span><span class="token punctuation">(</span>beverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> f <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">applyToAll</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>beverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tohavebeenlastcalledwitharg1-arg2-"></a><code>.toHaveBeenLastCalledWith(arg1, arg2, ...)</code> <a class="hash-link" href="#tohavebeenlastcalledwitharg1-arg2-">#</a></h3><p>Другое имя функции: <code>.lastCalledWith(arg1, arg2, ...)</code></p><p>Используйте <code>.toHaveBeenLastCalledWith</code>, чтобы убедиться, что в последний раз функция-заглушка была вызвана с определённым набором аргументов. Например, ваша функция <code>applyToAllFlavors(f)</code> вызывает функцию <code>drink</code> для набора напитков. Вы хотите убедиться, что последним был вызван напиток <code>&#x27;mango&#x27;</code>. Вы можете написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;applying to all flavors does mango last&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">applyToAllFlavors</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token string">&#x27;mango&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobeclosetonumber-numdigits"></a><code>.toBeCloseTo(number, numDigits)</code> <a class="hash-link" href="#tobeclosetonumber-numdigits">#</a></h3><p>Использовать оператор равенства для сравнения чисел с плавающей точкой — это плохая идея. Когда работает округление, перестают работать очевидные вещи. Нпример, этот тест не будет пройден:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;adding works sanely with simple decimals&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// Неверно!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>А неверно это потому, что в JavaScript <code>0.2 + 0.1</code> равно <code>0.30000000000000004</code>. Уж извините.</p><p>Вместо этого используйте <code>.toBeCloseTo</code>. Параметр <code>numDigits</code> определяет сколько разрядов после запятой необходимо учитывать. Например, если вам нужно убедиться, что <code>0.2 + 0.1</code> равно <code>0.3</code> с точностью до пяти знаков после запятой, можно написать следующее:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;adding works sanely with simple decimals&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCloseTo</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>По-умолчанию <code>numDigits</code> равен 2, что в большинстве случаев достаточно.</p><h3><a class="anchor" name="tobedefined"></a><code>.toBeDefined()</code> <a class="hash-link" href="#tobedefined">#</a></h3><p>Используйте <code>.toBeDefined</code> для проверки того, что переменная определена. Например, если вы просто хотите проверить, что функция <code>fetchNewFlavorIdea()</code> возвращает <em>что-то</em>, вы можете написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;there is a new flavor idea&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">fetchNewFlavorIdea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeDefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Конечно, можно было бы написать <code>expect(fetchNewFlavorIdea()).not.toBe(undefined)</code>, но лучше избегать использования <code>undefined</code> непосредственно в вашем коде.</p><h3><a class="anchor" name="tobefalsy"></a><code>.toBeFalsy()</code> <a class="hash-link" href="#tobefalsy">#</a></h3><p>Используйте <code>.toBeFalsy</code> когда вам всего лишь необходимо проверить, что значение эквивалентно ложному. Предположим, что у вас есть следующий код:</p><pre class="prism language-javascript">
<span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">getErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">drinkMoreLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><p>Вам не так уж важно что возвращает <code>getErrors</code>. Она может вернуть <code>false</code>, <code>null</code> или ``, однако ваш код будет корректно работать. И если вы хотите протестировать, что после употребления газировки La Croix не произошло никаких ошибок, то можно написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;drinking La Croix does not lead to errors&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>В JavaScript существует всего шесть значений, эквивалетных ложному: <code>false</code>, <code>`,</code>&#x27;&#x27;<code>,</code>null<code>,</code>undefined<code>и</code>NaN`. Всё остальное эквивалентно истине.</p><h3><a class="anchor" name="tobegreaterthannumber"></a><code>.toBeGreaterThan(number)</code> <a class="hash-link" href="#tobegreaterthannumber">#</a></h3><p>Для сравнения чисел с плавающей точкой можно использовать <code>toBeGreaterThan</code>. Например, если вы хотите проверить, что <code>ouncesPerCan()</code> возвращает значение, которое больше чем 10 унций, пишите:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;ounces per can is more than 10&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobegreaterthanorequalnumber"></a><code>.toBeGreaterThanOrEqual(number)</code> <a class="hash-link" href="#tobegreaterthanorequalnumber">#</a></h3><p>Для сравнения чисел с плавающей точкой можно использовать <code>toBeGreaterThanOrEqual</code>. Например, если вы хотите проверить, что <code>ouncesPerCan()</code> возвращает значение, которое не меньше чем 12 унций, пишите:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;ounces per can is at least 12&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThanOrEqual</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobelessthannumber"></a><code>.toBeLessThan(number)</code> <a class="hash-link" href="#tobelessthannumber">#</a></h3><p>Для сравнения чисел с плавающей точкой можно использовать <code>toBeLessThan</code>. Например, если вы хотите проверить, что <code>ouncesPerCan()</code> возвращает значение, которое меньше чем 20 унций, пишите:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;ounces per can is less than 20&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeLessThan</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobelessthanorequalnumber"></a><code>.toBeLessThanOrEqual(number)</code> <a class="hash-link" href="#tobelessthanorequalnumber">#</a></h3><p>Для сравнения чисел с плавающей точкой можно использовать <code>toBeLessThanOrEqual</code>. Например, если вы хотите проверить, что <code>ouncesPerCan()</code> возвращает значение, которое не больше чем 12 унций, пишите:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;ounces per can is at most 12&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeLessThanOrEqual</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobeinstanceofclass"></a><code>.toBeInstanceOf(Class)</code> <a class="hash-link" href="#tobeinstanceofclass">#</a></h3><p>Используйте <code>.toBeInstanceOf(Class)</code>, чтобы проверить, что данный объект является экземпляром того или иного класса. Эта функция использует оператор <code>instanceof</code>.</p><pre class="prism language-javascript">
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// throws</span></pre><h3><a class="anchor" name="tobenull"></a><code>.toBeNull()</code> <a class="hash-link" href="#tobenull">#</a></h3><p><code>.toBeNull()</code> ведёт себя точно так же, как <code>.toBe(null)</code>, просто её сообщения об ошибках выглядят получше. Так что, если вам нужно проверить, что что-то является null, то используйте <code>.toBeNull()</code>.</p><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">bloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;bloop returns null&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tobetruthy"></a><code>.toBeTruthy()</code> <a class="hash-link" href="#tobetruthy">#</a></h3><p>Используйте <code>.toBeTruthy</code> когда вам всего лишь необходимо проверить, что значение эквивалентно истинному. Предположим, что у вас есть следующий код:</p><pre class="prism language-javascript">
<span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">thirstInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">drinkMoreLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><p>Вам не так уж важно, что возвращает <code>thirstInfo</code>. Она может вернуть <code>true</code> или целый объект, однако ваш код будет корректно работать. Так что если вы просто хотите проверить, что <code>thirstInfo</code> вернёт значение эквивалетное истинному после употребления газировки La Croix, можно написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;drinking La Croix leads to having thirst info&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">thirstInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>В JavaScript существует всего шесть значений, эквивалетных ложному: <code>false</code>, <code>`,</code>&#x27;&#x27;<code>,</code>null<code>,</code>undefined<code>и</code>NaN`. Всё остальное эквивалентно истине.</p><h3><a class="anchor" name="tobeundefined"></a><code>.toBeUndefined()</code> <a class="hash-link" href="#tobeundefined">#</a></h3><p>Используйте <code>.toBeUndefined</code>, чтобы проверить, что переменная не определена. Например, вы хотите проверить, что функция <code>bestDrinkForFlavor(flavor)</code> возвращает <code>undefined</code> для вкуса <code>&#x27;octopus&#x27;</code>. Просто потому, что напитков со вкусом осьминога не существует:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;the best drink for octopus flavor is undefined&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestDrinkForFlavor</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Конечно, можно было бы написать <code>expect(bestDrinkForFlavor(&#x27;octopus&#x27;)).toBe(undefined)</code>, но лучше избегать использования <code>undefined</code> непосредственно в вашем коде.</p><h3><a class="anchor" name="tocontainitem"></a><code>.toContain(item)</code> <a class="hash-link" href="#tocontainitem">#</a></h3><p>Используйте <code>.toContain</code> если вы хотите убедиться, что тот или иной элемент находится в списке. Эта функция использует оператор строгого равенства <code>===</code>.</p><p>Например, если <code>getAllFlavors()</code> возвращает список вкусов, и вы хотите быть уверены, что в нём присутствует <code>lime</code>, то вы можете написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;the flavor list contains lime&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getAllFlavors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&#x27;lime&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tocontainequalitem"></a><code>.toContainEqual(item)</code> <a class="hash-link" href="#tocontainequalitem">#</a></h3><p>Используйте <code>.toContainEqual</code> если вы хотите убедиться, что тот или иной элемент находится в списке. Вместо проверки объектов на идентичность, эта функция рекурсивно сравнивает все поля в объектах.</p><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;my beverage&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;is delicious and not sour&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myBeverage <span class="token operator">=</span> <span class="token punctuation">{</span>delicious<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> sour<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myBeverages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContainEqual</span><span class="token punctuation">(</span>myBeverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="toequalvalue"></a><code>.toEqual(value)</code> <a class="hash-link" href="#toequalvalue">#</a></h3><p>Используйте <code>.toEqual</code>, когда вы хотите проверить, что два объекта имеют одинаковое значение. Вместо проверки объектов на идентичность, эта функция рекурсивно сравнивает все поля в объектах. Эта процедура ещё называется «проверка на глубокое равенство». Например <code>toEqual</code> и <code>toBe</code> ведут себя по-разному в этом наборе, и, таким образом, все тесты успешно выполняются:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> can1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  flavor<span class="token punctuation">:</span> <span class="token string">&#x27;grapefruit&#x27;</span><span class="token punctuation">,</span>
  ounces<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> can2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  flavor<span class="token punctuation">:</span> <span class="token string">&#x27;grapefruit&#x27;</span><span class="token punctuation">,</span>
  ounces<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;the La Croix cans on my desk&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;have all the same properties&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>can2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;are not the exact same can&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can1<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>can2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><blockquote><p>Примечание: <code>.toEqual</code> не сможет выполнить проверку на <em>глубокое равенство</em> для объектов типа Error. В этих объектах проверяется на равенство только свойство <code>message</code>. Поэтому для тестирования исключений рекомендуется использовать функцию <code>.toThrow</code>.</p></blockquote><h3><a class="anchor" name="tohavelengthnumber"></a><code>.toHaveLength(number)</code> <a class="hash-link" href="#tohavelengthnumber">#</a></h3><p>Используйте <code>.toHaveLength</code> для проверки того, что объект имеет свойство <code>.length</code>, и оно имеет определённое значение.</p><p>Это особенно полезно для проверки размера массивов или строк.</p><pre class="prism language-javascript">
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&#x27;abc&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tomatchregexporstring"></a><code>.toMatch(regexpOrString)</code> <a class="hash-link" href="#tomatchregexporstring">#</a></h3><p>Используйте <code>.toMatch</code>, чтобы проверить, что строка соответствует регулярному выражению.</p><p>Например, вы можете не знать точное возвращаемое значение функции <code>essayOnTheBestFlavor()</code>, однако вы уверены, что это — очень длинная строка в которой содержится слово <code>grapefruit</code>. Это можно протестировать так:</p><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;an essay on the best flavor&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;mentions grapefruit&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">essayOnTheBestFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token regex">/grapefruit/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">essayOnTheBestFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&#x27;grapefruit&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Кроме того, эта функция может принимать и строку, которую попытается найти в исходной:</p><pre class="prism language-javascript">
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;grapefruits are healthy&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;grapefruits are a fruit&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&#x27;grapefruits&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">&#x27;fruit&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tomatchobjectobject"></a><code>.toMatchObject(object)</code> <a class="hash-link" href="#tomatchobjectobject">#</a></h3><p>Use <code>.toMatchObject</code> to check that a JavaScript object matches a subset of the properties of an object. You can match properties against values or against matchers.</p><pre class="prism language-javascript">
<span class="token keyword">const</span> houseForSale <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
  bedrooms<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kitchen<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    amenities<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;oven&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;stove&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;washer&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    area<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    wallColor<span class="token punctuation">:</span> <span class="token string">&#x27;white&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> desiredHouse <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
  kitchen<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    amenities<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;oven&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;stove&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;washer&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    wallColor<span class="token punctuation">:</span> expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex">/white|yellow/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;the house has my desired features&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span>desiredHouse<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tohavepropertykeypath-value"></a><code>.toHaveProperty(keyPath, value)</code> <a class="hash-link" href="#tohavepropertykeypath-value">#</a></h3><p>Используйте <code>.toHaveProperty</code> для проверки того, что в данном объекте есть свойство <code>keyPath</code>. Для проверки глубоко вложенных свойств используйте <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Property_accessors" target="_blank">точечную нотацию</a>.</p><p>Кроме того, можно указать параметр <code>value</code> для проверки того, что значение свойства <code>keyPath</code> в объекте соответствует заданному. Эта функция использует «глубокое равенство» (как и <code>toEqual()</code>) и проверяет равенство полей рекурсивно.</p><p>В следующем примере содержится объект <code>houseForSale</code> с вложенными свойствами. Мы используем <code>toHaveProperty</code> для проверки существования и значений некоторых свойств в объекте.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// Object containing house features to be tested</span>
<span class="token keyword">const</span> houseForSale <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
  bedrooms<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kitchen<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    amenities<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;oven&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;stove&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;washer&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    area<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    wallColor<span class="token punctuation">:</span> <span class="token string">&#x27;white&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;this house has my desired features&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">// Simple Referencing</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;bath&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;bedrooms&#x27;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;pool&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span spellcheck="true" class="token comment">// Deep referencing using dot notation</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;kitchen.area&#x27;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;kitchen.amenities&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">&#x27;oven&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;stove&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;washer&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;kitchen.open&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tomatchsnapshotoptionalstring"></a><code>.toMatchSnapshot(optionalString)</code> <a class="hash-link" href="#tomatchsnapshotoptionalstring">#</a></h3><p>Проверяет, что значение соответствует наиболее свежему снимку. За дополнительной информацией обращайтесь к разделу <a href="/jest/docs/snapshot-testing.html" target="">Тестирование при помощи снимков</a>.</p><p>В функцию можно передать имя снимка. В противном случае имя определяется из теста.</p><p><em>Примечание: тестирование при помощи снимков, как правило, применяется к компонентам React. Тем не менее, любое сериализуемое значение может быть использовано в качестве снимка.</em></p><h3><a class="anchor" name="tothrowerror"></a><code>.toThrow(error)</code> <a class="hash-link" href="#tothrowerror">#</a></h3><p>Другое имя функции: <code>.toThrowError()</code></p><p>Используйте <code>.toThrow</code> для проверки, что функция бросает исключение при вызове. Например, если бы мы хотели проверить, что функция <code>drinkFlavor(&#x27;octopus&#x27;)</code> кидает исключение, потому что газировка со вкусом осьминога слишком отвратительна для питья, мы могли бы написать:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;throws on octopus&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Если вы хотите проверить, что было выброшено то или иное исключение, то можно передать аргумент в <code>toThrow</code>. Этим аргументом может быть строка с сообщением об ошибке, класс исключения или регулярное выражение. Пусть в <code>drinkFlavor</code> написано следующее:</p><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">drinkFlavor</span><span class="token punctuation">(</span>flavor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flavor <span class="token operator">==</span> <span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DisgustingFlavorError</span><span class="token punctuation">(</span><span class="token string">&#x27;yuck, octopus flavor&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span spellcheck="true" class="token comment">// что угодно</span>
<span class="token punctuation">}</span></pre><p>Мы можем проверить это исключение несколькими способами:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;throws on octopus&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">drinkOctopus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span spellcheck="true" class="token comment">// проверяем сообщение об ошибке на полное соответствие</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token string">&#x27;yuck, octopus flavor&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span spellcheck="true" class="token comment">// проверяем, что сообщение об ошибке содержит слово &quot;yuck&quot;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token regex">/yuck/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span spellcheck="true" class="token comment">// проверяем, что ошибка является DisgustingFlavorError</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span>DisgustingFlavorError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="tothrowerrormatchingsnapshot"></a><code>.toThrowErrorMatchingSnapshot()</code> <a class="hash-link" href="#tothrowerrormatchingsnapshot">#</a></h3><p>Use <code>.toThrowErrorMatchingSnapshot</code> to test that a function throws an error matching the most recent snapshot when it is called. Например, у вас есть функция <code>drinkFlavor</code>, которая генерирует исключение всякий раз, когда ей передают параметр <code>&#x27;octopus&#x27;</code>:</p><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">drinkFlavor</span><span class="token punctuation">(</span>flavor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flavor <span class="token operator">==</span> <span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DisgustingFlavorError</span><span class="token punctuation">(</span><span class="token string">&#x27;yuck, octopus flavor&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span spellcheck="true" class="token comment">// что угодно</span>
<span class="token punctuation">}</span></pre><p>Тест для этой функции будет выглядеть следующим образом:</p><pre class="prism language-javascript">
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;throws on octopus&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">drinkOctopus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">&#x27;octopus&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowErrorMatchingSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Этот тест создаст следующий снимок:</p><pre class="prism language-javascript">
exports<span class="token punctuation">[</span><span class="token template-string"><span class="token string">`drinking flavors throws on octopus 1`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> `<span class="token string">&quot;yuck, octopus flavor&quot;</span>`<span class="token punctuation">;</span></pre><p>Дополнительную информацию по тестированию при помощи снимков можно найти на странице <a href="http://facebook.github.io/jest/blog/2016/07/27/jest-14.html" target="_blank">React Tree Snapshot Testing</a>.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="api.html#content">← Предыдущая</a><a class="docs-next button" href="mock-function-api.html#content">Продолжить чтение →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"></a><div><h5>Docs</h5><a href="/jest/docs/ru/getting-started.html">Getting Started</a><a href="/jest/docs/ru/snapshot-testing.html">Guides</a><a href="/jest/docs/ru/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/ru/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>