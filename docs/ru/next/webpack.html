<!DOCTYPE html><html lang="ru"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using with webpack · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Jest может использоваться в проектах, использующих [webpack](https://webpack.js.org/) для управления активами, стилями и компиляцией. webpack *does* offer some unique challenges over other tools because it integrates directly with your application to allow managing stylesheets, assets like images and fonts, along with the expansive ecosystem of compile-to-JavaScript languages and tools."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="ru"/><meta property="og:title" content="Using with webpack · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jestjs.io/"/><meta property="og:description" content="Jest может использоваться в проектах, использующих [webpack](https://webpack.js.org/) для управления активами, стилями и компиляцией. webpack *does* offer some unique challenges over other tools because it integrates directly with your application to allow managing stylesheets, assets like images and fonts, along with the expansive ecosystem of compile-to-JavaScript languages and tools."/><meta property="og:image" content="https://jestjs.io/img/opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jestjs.io/img/jest.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://jestjs.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://jestjs.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ru"><img class="logo" src="/img/jest.svg" alt="Jest"/><h2 class="headerTitleWithLogo">Jest</h2></a><a href="/ru/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/ru/next/getting-started" target="_self">Документация</a></li><li class="siteNavGroupActive"><a href="/docs/ru/next/api" target="_self">API</a></li><li class=""><a href="/ru/help" target="_self">Справка</a></li><li class=""><a href="/blog/" target="_self">Блог</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Русский</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/webpack">English</a></li><li><a href="/docs/ja/next/webpack">日本語</a></li><li><a href="/docs/es-ES/next/webpack">Español</a></li><li><a href="/docs/pt-BR/next/webpack">Português (Brasil)</a></li><li><a href="/docs/ro/next/webpack">Română</a></li><li><a href="/docs/uk/next/webpack">Українська</a></li><li><a href="/docs/zh-Hans/next/webpack">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ru/next/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/using-matchers">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/asynchronous">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/setup-teardown">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/mock-functions">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/jest-platform">Jest Platform</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/jest-community">Jest Community</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/more-resources">More Resources</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ru/next/snapshot-testing">Тестирование при помощи снимков</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/tutorial-async">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/timer-mocks">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/manual-mocks">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/es6-class-mocks">Имитаторы классов ES6</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/bypassing-module-mocks">Bypassing module mocks</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/ru/next/webpack">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/puppeteer">Using with puppeteer</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/mongodb">Using with MongoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/dynamodb">Using with DynamoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/tutorial-jquery">DOM Manipulation</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/watch-plugins">Watch Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/migration-guide">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/architecture">Архитектура</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Возможности фреймворка</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ru/next/tutorial-react">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/tutorial-react-native">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/testing-frameworks">Testing Web Frameworks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ru/next/api">Globals</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/expect">Expect</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/mock-function-api">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/jest-object">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/configuration">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/next/cli">Jest CLI Options</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/Webpack.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Using with webpack</h1></header><article><div><span><p>Jest может использоваться в проектах, использующих <a href="https://webpack.js.org/">webpack</a> для управления активами, стилями и компиляцией. webpack <em>does</em> offer some unique challenges over other tools because it integrates directly with your application to allow managing stylesheets, assets like images and fonts, along with the expansive ecosystem of compile-to-JavaScript languages and tools.</p>
<h2><a class="anchor" aria-hidden="true" id="webpack-пример"></a><a href="#webpack-пример" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Webpack пример</h2>
<p>Давйте начнем с привычной конфигурации webpack и адаптируем ее для использования с Jest.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">loaders</span>: [
      {<span class="hljs-attr">exclude</span>: [<span class="hljs-string">'node_modules'</span>], <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel'</span>, <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>},
      {<span class="hljs-attr">loader</span>: <span class="hljs-string">'style-loader!css-loader'</span>, <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>},
      {<span class="hljs-attr">loader</span>: <span class="hljs-string">'url-loader'</span>, <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.gif$/</span>},
      {<span class="hljs-attr">loader</span>: <span class="hljs-string">'file-loader'</span>, <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(ttf|eot|svg)$/</span>},
    ],
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-attr">config$</span>: <span class="hljs-string">'./configs/app-config.js'</span>,
      <span class="hljs-attr">react</span>: <span class="hljs-string">'./vendor/react-master'</span>,
    },
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">''</span>, <span class="hljs-string">'js'</span>, <span class="hljs-string">'jsx'</span>],
    <span class="hljs-attr">modules</span>: [
      <span class="hljs-string">'node_modules'</span>,
      <span class="hljs-string">'bower_components'</span>,
      <span class="hljs-string">'shared'</span>,
      <span class="hljs-string">'/shared/vendor/modules'</span>,
    ],
  },
};
</code></pre>
<p>Если вы располагаете файлами, которые трансформируются Babel, вы можете <a href="/docs/ru/next/getting-started#using-babel">включить поддержку Babel</a> путем установки плагина <code>babel-jest</code>. Non-Babel JavaScript transformations can be handled with Jest's <a href="/docs/ru/next/configuration#transform-objectstring-pathtotransformer--pathtotransformer-object"><code>transform</code></a> config option.</p>
<h3><a class="anchor" aria-hidden="true" id="обработка-статических-активов"></a><a href="#обработка-статических-активов" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Обработка статических активов</h3>
<p>Далее, настроим Jest для корректной обработки активов стилей и изображений. Обычно эти файлы не особо полезны в тестах, так что мы можем безопасно их имитировать. However, if you are using CSS Modules then it's better to mock a proxy for your className lookups.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/fileMock.js"</span>,
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/styleMock.js"</span>
    }
  }
}
</code></pre>
<p>And the mock files themselves:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// __mocks__/styleMock.js</span>

<span class="hljs-built_in">module</span>.exports = {};
</code></pre>
<pre><code class="hljs css language-js"><span class="hljs-comment">// __mocks__/fileMock.js</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-string">'test-file-stub'</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="мокинг-css-модулей"></a><a href="#мокинг-css-модулей" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Мокинг CSS модулей</h3>
<p>Можно использовать <a href="https://github.com/keyanzhang/identity-obj-proxy">ES6 Proxy</a> для имитации <a href="https://github.com/css-modules/css-modules">CSS модулей</a>:</p>
<pre><code class="hljs css language-bash">yarn add --dev identity-obj-proxy
</code></pre>
<p>Тогда доступ к className в объектах стилей будет возвращаться как есть (т.е. <code>styles.foobar === 'foobar'</code>). Это довольно удобно при <a href="/docs/ru/next/snapshot-testing">тестировании с использованием снимков</a> в React.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json (for CSS Modules)</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/fileMock.js"</span>,
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"identity-obj-proxy"</span>
    }
  }
}
</code></pre>
<blockquote>
<p>Обратите внимание, что Proxy включен по умолчанию в Node версии 6. Если вы еще не используете Node версии 6, убедитесь, что вы вызываете Jest с помощью <code>node --harmony_proxies node_modules/.bin/jest</code>.</p>
</blockquote>
<p>If <code>moduleNameMapper</code> cannot fulfill your requirements, you can use Jest's <a href="/docs/ru/next/configuration#transform-objectstring-pathtotransformer--pathtotransformer-object"><code>transform</code></a> config option to specify how assets are transformed. For example, a transformer that returns the basename of a file (such that <code>require('logo.jpg');</code> returns <code>'logo'</code>) can be written as:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// fileTransformer.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-built_in">module</span>.exports = {
  process(src, filename, config, options) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'module.exports = '</span> + <span class="hljs-built_in">JSON</span>.stringify(path.basename(filename)) + <span class="hljs-string">';'</span>;
  },
};
</code></pre>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json (for custom transformers and CSS Modules)</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"identity-obj-proxy"</span>
    },
    <span class="hljs-attr">"transform"</span>: {
      <span class="hljs-attr">"\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/fileTransformer.js"</span>
    }
  }
}
</code></pre>
<p>Мы указали Jest на необходимость игнорировать файлы расширения которых совпадают с расширениями таблиц стилей и изображений, и на необходимость использовать имитационные файлы вместо них. Вы можете корректировать регулярное выражение так, чтобы оно совпадало с типами файлов, которые обрабатывает ваша webpack конфигурация.</p>
<p><em>Note: if you are using babel-jest with additional code preprocessors, you have to explicitly define babel-jest as a transformer for your JavaScript code to map <code>.js</code> files to the babel-jest module.</em></p>
<pre><code class="hljs css language-json">"transform": {
  "^.+\\.js$": "babel-jest",
  "^.+\\.css$": "custom-transformer",
  ...
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="конфигурация-jest-для-поиска-наших-файлов"></a><a href="#конфигурация-jest-для-поиска-наших-файлов" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Конфигурация Jest для поиска наших файлов</h3>
<p>Now that Jest knows how to process our files, we need to tell it how to <em>find</em> them. For webpack's <code>modulesDirectories</code>, and <code>extensions</code> options there are direct analogs in Jest's <code>moduleDirectories</code> and <code>moduleFileExtensions</code> options.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleFileExtensions"</span>: [<span class="hljs-string">"js"</span>, <span class="hljs-string">"jsx"</span>],
    <span class="hljs-attr">"moduleDirectories"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"bower_components"</span>, <span class="hljs-string">"shared"</span>],

    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/styleMock.js"</span>,
      <span class="hljs-attr">"\\.(gif|ttf|eot|svg)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/fileMock.js"</span>
    }
  }
}
</code></pre>
<blockquote>
<p>Note: <code>&lt;rootDir&gt;</code> is a special token that gets replaced by Jest with the root of your project. Most of the time this will be the folder where your <code>package.json</code> is located unless you specify a custom <code>rootDir</code> option in your configuration.</p>
</blockquote>
<p>Similarly webpack's <code>resolve.root</code> option functions like setting the <code>NODE_PATH</code> env variable, which you can set, or make use of the <code>modulePaths</code> option.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"modulePaths"</span>: [<span class="hljs-string">"/shared/vendor/modules"</span>],
    <span class="hljs-attr">"moduleFileExtensions"</span>: [<span class="hljs-string">"js"</span>, <span class="hljs-string">"jsx"</span>],
    <span class="hljs-attr">"moduleDirectories"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"bower_components"</span>, <span class="hljs-string">"shared"</span>],
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/styleMock.js"</span>,
      <span class="hljs-attr">"\\.(gif|ttf|eot|svg)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/fileMock.js"</span>
    }
  }
}
</code></pre>
<p>And finally, we have to handle the webpack <code>alias</code>. For that we can make use of the <code>moduleNameMapper</code> option again.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"modulePaths"</span>: [<span class="hljs-string">"/shared/vendor/modules"</span>],
    <span class="hljs-attr">"moduleFileExtensions"</span>: [<span class="hljs-string">"js"</span>, <span class="hljs-string">"jsx"</span>],
    <span class="hljs-attr">"moduleDirectories"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"bower_components"</span>, <span class="hljs-string">"shared"</span>],

    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"\\.(css|less)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/styleMock.js"</span>,
      <span class="hljs-attr">"\\.(gif|ttf|eot|svg)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/__mocks__/fileMock.js"</span>,

      <span class="hljs-attr">"^react(.*)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/vendor/react-master$1"</span>,
      <span class="hljs-attr">"^config$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/configs/app-config.js"</span>
    }
  }
}
</code></pre>
<p>Вот и все! webpack is a complex and flexible tool, so you may have to make some adjustments to handle your specific application's needs. Luckily for most projects, Jest should be more than flexible enough to handle your webpack config.</p>
<blockquote>
<p>Note: For more complex webpack configurations, you may also want to investigate projects such as: <a href="https://github.com/istarkov/babel-plugin-webpack-loaders">babel-plugin-webpack-loaders</a>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="использование-с-webpack-2"></a><a href="#использование-с-webpack-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Использование с Webpack 2</h2>
<p>webpack 2 offers native support for ES modules. However, Jest runs in Node, and thus requires ES modules to be transpiled to CommonJS modules. As such, if you are using webpack 2, you most likely will want to configure Babel to transpile ES modules to CommonJS modules only in the <code>test</code> environment.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// .babelrc</span>
{
  <span class="hljs-attr">"presets"</span>: [[<span class="hljs-string">"env"</span>, {<span class="hljs-attr">"modules"</span>: <span class="hljs-literal">false</span>}]],

  <span class="hljs-attr">"env"</span>: {
    <span class="hljs-attr">"test"</span>: {
      <span class="hljs-attr">"plugins"</span>: [<span class="hljs-string">"transform-es2015-modules-commonjs"</span>]
    }
  }
}
</code></pre>
<blockquote>
<p>Note: Jest caches files to speed up test execution. If you updated .babelrc and Jest is still not working, try running Jest with <code>--no-cache</code>.</p>
</blockquote>
<p>If you use dynamic imports (<code>import('some-file.js').then(module =&gt; ...)</code>), you need to enable the <code>dynamic-import-node</code> plugin.</p>
<pre><code class="hljs css language-json"><span class="hljs-comment">// .babelrc</span>
{
  <span class="hljs-attr">"presets"</span>: [[<span class="hljs-string">"env"</span>, {<span class="hljs-attr">"modules"</span>: <span class="hljs-literal">false</span>}]],

  <span class="hljs-attr">"plugins"</span>: [<span class="hljs-string">"syntax-dynamic-import"</span>],

  <span class="hljs-attr">"env"</span>: {
    <span class="hljs-attr">"test"</span>: {
      <span class="hljs-attr">"plugins"</span>: [<span class="hljs-string">"dynamic-import-node"</span>]
    }
  }
}
</code></pre>
<p>For an example of how to use Jest with Webpack with React, Redux, and Node, you can view one <a href="https://github.com/jenniferabowd/jest_react_redux_node_webpack_complex_example">here</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ru/next/bypassing-module-mocks"><span class="arrow-prev">← </span><span>Bypassing module mocks</span></a><a class="docs-next button" href="/docs/ru/next/puppeteer"><span>Using with puppeteer</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#webpack-пример">Webpack пример</a><ul class="toc-headings"><li><a href="#обработка-статических-активов">Обработка статических активов</a></li><li><a href="#мокинг-css-модулей">Мокинг CSS модулей</a></li><li><a href="#конфигурация-jest-для-поиска-наших-файлов">Конфигурация Jest для поиска наших файлов</a></li></ul></li><li><a href="#использование-с-webpack-2">Использование с Webpack 2</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/ru/getting-started.html">Getting Started</a><a href="/docs/ru/snapshot-testing.html">Guides</a><a href="/docs/ru/api.html">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discord.gg/MWRhKCj">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:ru","version:next"]}
              });
            </script></body></html>