<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Configuring Jest · Jest</title><meta name="viewport" content="width=device-width"/><meta property="og:title" content="Configuring Jest · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Jestの設定は、プロジェクトの `package.json` ファイルか、 `jest.config.js`ファイルまたは `--config &lt;path/to/js|json&gt;`オプションから、定義することができます。 `package.json`にJestの構成を保存したい場合は、Jestが設定を見つけられるように&quot;jest&quot;キーが最上段に設定されなければなりません。"/><meta name="robots" content="noindex"/><meta property="og:image" content="/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="/jest/css/main.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/> <link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/jest/js/webplayer.js"></script><script type="text/javascript" src="https://snack.expo.io/embed.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/ja/getting-started.html" target="_self">ドキュメント</a></li><li><a href="/jest/docs/ja/api.html" target="_self">API</a></li><li><a href="/jest/ja/help.html" target="_self">ヘルプ</a></li><li><a href="/jest/blog" target="_self">ブログ</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>API Reference</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ja/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ja/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/jest-object.html#content">The Jest Object</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/ja/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ja/snapshot-testing.html#content">スナップショットテスト</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/webpack.html#content">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/testing-frameworks.html#content">web フレームワークのテスト</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ja/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/ja" target="_blank">Translate this Doc</a><h1>Configuring Jest</h1></header><article><div><p>Jestの設定は、プロジェクトの <code>package.json</code> ファイルか、 <code>jest.config.js</code>ファイルまたは <code>--config &lt;path/to/js|json&gt;</code>オプションから、定義することができます。 <code>package.json</code>にJestの構成を保存したい場合は、Jestが設定を見つけられるように&quot;jest&quot;キーが最上段に設定されなければなりません。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;verbose&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>またはJavaScriptファイルで</p><pre class="prism language-js"><span spellcheck="true" class="token comment">// jest.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  verbose<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p>出力される構成はJSON形式でシリアライズできなければならないことに留意して下さい。</p><p>--config オプションを使用した場合、JSON ファイルには&quot;jest&quot;キーを含んではいけません。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;bail&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;verbose&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></pre><h2><a class="anchor" name=""></a>オプション <a class="hash-link" href="#">#</a></h2><p>オプションを指定することで <code>package.json</code>内でのJestの動作をコントロールできます。Jestの哲学はそのままでも十分に動作することですが、時としてより強力な設定が必要となることもあるでしょう。</p><div><autogenerated_table_of_contents>

</div><hr/><h2><a class="anchor" name=""></a>リファレンス <a class="hash-link" href="#">#</a></h2><h3><a class="anchor" name="automock-boolean"></a><code>automock</code> [boolean] <a class="hash-link" href="#automock-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>このオプションは、デフォルトでは無効となっています。 テストが殆ど無い既存のコードベースを抱えた大きな組織にJestを導入する際、ユニットテストを徐々に適用していく場合にこのオプションが有用です。 <code>jest.mock(moduleName)</code>関数を使うことで明示的にモジュールを自動的にモックできます。</p><p><em>デフォルトでは <code>fs</code>のようなコア機能のモジュールはモックされません。それらのモジュールは <code>jest.mock(&#x27;fs&#x27;)</code>のように明示的にモックする必要があります。</em></p><p><em>注意: 自動モック機能は大規模なプロジェクトで特に顕著にパフォーマンスに影響します。詳細や解決策については、<a href="troubleshooting.html#tests-are-slow-when-leveraging-automocking" target="_blank">こちら</a>を参照して下さい。</em></p><h3><a class="anchor" name="browser-boolean"></a><code>browser</code> [boolean] <a class="hash-link" href="#browser-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>モジュールの依存関係を解決する際に <code>package.json</code>内に記述されたBrowserifyの <a href="https://github.com/substack/browserify-handbook#browser-field" target="_blank"><code>&quot;browser&quot;</code> フィールド</a>を優先します。 一部のモジュールはNode上で動作しているかブラウザ上で動作しているかによって異なるバージョンを出力します。</p><h3><a class="anchor" name="bail-boolean"></a><code>bail</code> [boolean] <a class="hash-link" href="#bail-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>デフォルトではJestは全テストを実行し、完了時にコンソールに発生した全てのエラーを表示します。bailオプションは最初のエラー発生直後にテストを停止したい場合に指定します。</p><h3><a class="anchor" name="cachedirectory-string"></a><code>cacheDirectory</code> [string] <a class="hash-link" href="#cachedirectory-string">#</a></h3><p>デフォルト: <code>&quot;/tmp/&lt;path&gt;&quot;</code></p><p>Jestがキャッシュする依存情報を格納するディレクトリを指定します。</p><p>Jestはテスト実行中に必要となるかもしれないファイルシステムを集めやすくするため、依存関係のツリーを一度(前もって) 読み込んでキャッシュします。 この設定オプションによりJestがディスク上にキャッシュを格納する場所を指定できます。</p><h3><a class="anchor" name="collectcoverage-boolean"></a><code>collectCoverage</code> [boolean] <a class="hash-link" href="#collectcoverage-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>テスト実行中にカバレッジ情報を取得するかどうかを指定します。 カバレッジ取得を指定して実行される全てのファイルについて書き換えるので、テストが大幅に遅くなることがあります。</p><h3><a class="anchor" name="collectcoveragefrom-array"></a><code>collectCoverageFrom</code> [array] <a class="hash-link" href="#collectcoveragefrom-array">#</a></h3><p>デフォルト: <code>undefined</code></p><p>カバレッジ情報を取得する対象のファイルを指定する <a href="https://github.com/jonschlinkert/micromatch" target="_blank">globパターン</a>の配列を設定します。 ファイルが指定されたglobパターンに一致すれば、ファイルにテストが存在せずテストスイートが必要としないファイルであってもカバレッジ情報を収集します。</p><p>例:</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;collectCoverageFrom&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.{js,jsx}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!**/node_modules/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!**/vendor/**&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>上記の設定ではプロジェクトの <code>rootDir</code>配下の<code>**/node_modules/**</code> または<code>**/vendor/**</code>に一致するものを除いたすべてのファイルからカバレッジ情報を取得します。</p><p><em>注意: このオプションを使用するには<code>collectCoverage</code>パラメータがtrueに設定されているか<code>--coverage</code>オプションを付けてjestを実行する必要があります。</em></p><h3><a class="anchor" name="coveragedirectory-string"></a><code>coverageDirectory</code> [string] <a class="hash-link" href="#coveragedirectory-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p>カバレッジ情報を出力するファイルを格納するディレクトリを指定します。</p><h3><a class="anchor" name="coveragepathignorepatterns-array-string"></a><code>coveragePathIgnorePatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#coveragepathignorepatterns-array-string">#</a></h3><p>デフォルト: <code>[&quot;/node_modules/&quot;]</code></p><p>テスト実行前に全てのファイルのパスに対して照合する正規表現パターンの配列を指定します。指定したパターンのいずれかに一致したファイルはカバレッジ情報が取得されません。</p><p>パターン文字列はフルパスに対して照合されます。 <code>&lt;rootDir&gt;</code> 文字列トークンをプロジェクトのルートディレクトリとして指定することで、異なるルートディレクトリを持ちうる異なる環境のファイルを誤って無視してしまうことを防ぐことができます。 例: <code>[&quot;&lt;rootDir&gt;/build/&quot;, &quot;&lt;rootDir&gt;/node_modules/&quot;]</code>。</p><h3><a class="anchor" name="coveragereporters-array-string"></a><code>coverageReporters</code> [array&lt;string&gt;] <a class="hash-link" href="#coveragereporters-array-string">#</a></h3><p>デフォルト: <code>[&quot;json&quot;, &quot;lcov&quot;, &quot;text&quot;]</code></p><p>カバレッジの要約を出力する際のレポート形式のリストを指定します。任意の<a href="https://github.com/gotwarlost/istanbul/tree/master/lib/report" target="_blank">istanbulモジュールのレポート形式</a> が使用できます。</p><p><em>注意: このオプションを設定した場合、既定値は上書きされます。コンソール出力でカバレッジ情報を確認するには<code>&quot;text&quot;</code> または <code>&quot;text-summary&quot;</code>をリストに追加して下さい。</em></p><h3><a class="anchor" name="coveragethreshold-object"></a><code>coverageThreshold</code> [object] <a class="hash-link" href="#coveragethreshold-object">#</a></h3><p>デフォルト: <code>undefined</code></p><p>このオプションはカバレッジ取得結果の最小しきい値を強制的に設定します。 しきい値に到達しなかった場合、Jestはテストが失敗したと判定します。 正の値で指定されたしきい値を最小限求められるカバレッジのパーセンテージとして設定します。 負のしきい値を設定することでカバーされなかった部分の最大許容量を指定します。 しきい値は <code>global</code> 変数として、 <code>glob</code> 形式のパスもしくは単なるパスとして指定できます。 もし glob またはパスが <code>global</code> として指定されていれば、一致したパスのカバレッジデータは全体のカバレッジからは除外され、独自のしきい値が適用されます。 glob へのしきい値はその globs と一致する全てのファイルに適用されます。 指定されたパスのファイルが見つからない場合は、エラーが返されます。</p><p>例えば、statements: 90 は最低限のステートメントのカバレッジが 90% であることを意味します。 statements: -10 は テストされないステートメントが10 件以上あることを許容しないという意味です。 <code>global</code> ブランチにあるしきい値 50 という値は、<code>./src/components/**/*.js</code> と <code>./src/api/very-important-module.js</code> に一致するもの以外の全てのファイルに適用されます。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;coverageThreshold&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;branches&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
        <span class="token property">&quot;functions&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lines&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statements&quot;</span><span class="token operator">:</span> <span class="token number">50</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;./src/components/**/*.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;branches&quot;</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statements&quot;</span><span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;./src/api/very-important-module.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;branches&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token property">&quot;functions&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lines&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statements&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><h3><a class="anchor" name="globals-object"></a><code>globals</code> [object] <a class="hash-link" href="#globals-object">#</a></h3><p>デフォルト: <code>{}</code></p><p>全テスト環境で利用できるグローバル変数の配列を指定します。</p><p>例えば、下記の設定はグローバル変数 <code>__DEV__</code> は全てのテスト環境において <code>true</code>となります。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;__DEV__&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>（オブジェクトや配列のような）グローバル参照値を指定して一部のコードでテスト中にその値に変更を加える場合は、その変更は異なるテストファイルで実行されるテスト間で保存され<em>ない</em> ことに注意して下さい。</p><h3><a class="anchor" name="mapcoverage-boolean"></a><code>mapCoverage</code> [boolean] <a class="hash-link" href="#mapcoverage-boolean">#</a></h3><h5><a class="anchor" name="jest-2000"></a>jest バージョン<strong>20.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-2000">#</a></h5><p>デフォルト: <code>false</code></p><p>ソースマップを生成する <a href="#transform-object-string-string" target="">transformers</a>が設定されている場合、Jestは <a href="#coveragereporters-array-string" target="">レポート</a>出力および<a href="#coveragethreshold-object" target="">カバレッジのしきい値</a>チェック時に元のソースコードからコードカバレッジをマップするのにそれらを利用しようとします。 いくつかのJavascript代替言語が他よりもより正確なソースマップを提供しうるように、ベストエフォート方式で実行されます。 これはリソース集約型にもなります。 Jestがテスト実行時の最後でカバレッジの計算に長い時間を要している場合は、このオプションを<code>false</code>に設定してみて下さい。</p><p>インライン形式ののソースマップにもtransformerから直接与えられるソースマップファイルにも対応しています。 ソースマップURLはJestがそれらを見つけられない可能性があるため、サポートしていません。 transformerからソースマップを返すには、 <code>process</code>関数で下記のようなオブジェクトで返すことができます。 <code>map</code>プロパティはソースマップのオブジェクトかJSON形式の文字列のオブジェクトを設定できます。</p><pre class="prism language-js"><span class="token keyword">return</span> <span class="token punctuation">{</span>
  code<span class="token punctuation">:</span> <span class="token string">&#x27;the code&#x27;</span><span class="token punctuation">,</span>
  map<span class="token punctuation">:</span> <span class="token string">&#x27;the source map&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="modulefileextensions-array-string"></a><code>moduleFileExtensions</code> [array&lt;string&gt;] <a class="hash-link" href="#modulefileextensions-array-string">#</a></h3><p>デフォルト: <code>[&quot;js&quot;, &quot;json&quot;, &quot;jsx&quot;, &quot;node&quot;]</code></p><p>モジュールが使用するファイル拡張子の配列を指定します。ファイル拡張子を使用しないモジュールを呼び出す場合、Jestはこれらの拡張子から形式を推測します。</p><p>TypeScript を使用している場合は、 <code>[&quot;js&quot;, &quot;jsx&quot;, &quot;json&quot;, &quot;ts&quot;, &quot;tsx&quot;]</code> となるはずです。 <a href="https://github.com/kulshekhar/ts-jest" target="_blank">ts-jest のドキュメント</a>を確認してください。</p><h3><a class="anchor" name="moduledirectories-array-string"></a><code>moduleDirectories</code> [array&lt;string&gt;] <a class="hash-link" href="#moduledirectories-array-string">#</a></h3><p>デフォルト: <code>[&quot;node_modules&quot;]</code></p><p>必要なモジュールの格納場所から上方向に再帰的に探索を行うディレクトリ名の配列を指定します。 このオプションを指定することで既定値が<em>上書き</em>されるため、 <code>node_modules</code>内でパッケージの探索を行いたい場合は他のオプションに加えて次の配列を追加して下さい: <code>[&quot;node_modules&quot;, &quot;bower_components&quot;]</code></p><h3><a class="anchor" name="modulenamemapper-object-string-string"></a><code>moduleNameMapper</code> [object&lt;string, string&gt;] <a class="hash-link" href="#modulenamemapper-object-string-string">#</a></h3><p>デフォルト: <code>null</code></p><p>単一のモジュールで画像やスタイルのようなリソースをスタブさせるために利用する正規表現パターンからモジュール名へのマップを指定します。</p><p>別名にマップされているモジュールはデフォルトでは自動モック機能が有効かどうかに関わらずモックされません。</p><p>ファイルパスで<a href="#rootdir-string" target=""><code>rootDir</code></a>を使いたい場合は、<code>&lt;rootDir&gt;</code>文字列トークンを設定して下さい。</p><p>加えて、正規表現によりキャプチャした文字列を数字付きの後方参照を使って代入することができます。</p><p>例:</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;moduleNameMapper&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;^image![a-zA-Z0-9$_-]+$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GlobalImageStub&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;^[./a-zA-Z0-9$_-]+\.png$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/RelativeImageStub.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module_name_(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/substituted_module_$1.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p><em>注意: モジュール名を 正規表現<code>^$</code>による境界なしでモジュール名を指定するとエラーの特定が困難となることがあります。 例えば <code>relay</code>という表現では <code>relay</code>を名前に含む全てのモジュール名の置換を行います: <code>relay</code>, <code>react-relay</code> そして <code>graphql-relay</code>の全てが指定したスタブに置き換わります。</em></p><h3><a class="anchor" name="modulepathignorepatterns-array-string"></a><code>modulePathIgnorePatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#modulepathignorepatterns-array-string">#</a></h3><p>デフォルト: <code>[]</code></p><p>モジュールローダーから&#x27;見える&#x27;状態となる前に全てのモジュールパスに対して照合する正規表現の文字列の配列を指定します。 与えられたモジュールのパスがこの正規表現に一致した場合、テスト環境では当該モジュールは<code>require()</code>できなくなります。</p><p>パターン文字列はフルパスに対して照合されます。 <code>&lt;rootDir&gt;</code> 文字列トークンをプロジェクトのルートディレクトリとして指定することで、異なるルートディレクトリを持ちうる異なる環境のファイルを誤って無視してしまうことを防ぐことができます。 例: <code>[「&lt; rootDir &gt; ビルド/」]</code>。</p><h3><a class="anchor" name="modulepaths-array-string"></a><code>modulePaths</code> [array&lt;string&gt;] <a class="hash-link" href="#modulepaths-array-string">#</a></h3><p>デフォルト: <code>[]</code></p><p><code>NODE_PATH</code>環境変数を設定することの代替APIとして、<code>modulePaths</code>にはモジュールの依存関係の解決を行う際の追加のロケーションの絶対パスの配列を指定します。 プロジェクトのルートディレクトリへのパスを指定するには<code>&lt;rootDir&gt;</code> 文字列トークンを使用して下さい。 例: <code>[&quot;&lt;rootDir&gt;/app/&quot;]</code>。</p><h3><a class="anchor" name="notify-boolean"></a><code>notify</code> [boolean] <a class="hash-link" href="#notify-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>テスト結果の通知機能を有効にします。</p><h3><a class="anchor" name="preset-string"></a><code>preset</code> [string] <a class="hash-link" href="#preset-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p>Jestの設定の基盤として利用されるプリセットを指定します。<code>jest-preset.json</code>を出力するnpmモジュールをプリセットのトップレベルに指定する必要があります。</p><h3><a class="anchor" name="projects-array-string"></a><code>projects</code> [array&lt;string&gt;] <a class="hash-link" href="#projects-array-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p><code>projects</code>設定がパスやglobパターンの配列で与えられた場合、Jestは指定されたプロジェクト全てで同時にテストを実行します。 このオプションはmonorepo構成のプロジェクトや同時に複数のプロジェクトに従事している時に効果を発揮します。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;&lt;rootDir&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&lt;rootDir&gt;/examples/*&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>この例の設定ではJestはルートディレクトリと同時にexamples配下の各ディレクトリでテストを実行します。同じJestのインスタンスで無制限に複数のプロジェクトのテストを実行できます。</p><h3><a class="anchor" name="clearmocks-boolean"></a><code>clearMocks</code> [boolean] <a class="hash-link" href="#clearmocks-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>各テストごとに自動的にモックコールとモックインスタンスをクリアします。 各テスト間で<code>jest.clearAllMocks()</code>を呼び出すのと同じです。 このオプションは与えられたモックの実装を削除することはしません。</p><h3><a class="anchor" name="reporters-array-modulename-modulename-options"></a><code>reporters</code> [array&lt;modulename | [modulename, options]&gt;] <a class="hash-link" href="#reporters-array-modulename-modulename-options">#</a></h3><p>デフォルト: <code>undefined</code></p><h5><a class="anchor" name="jest-2000"></a>jest バージョン<strong>20.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-2000">#</a></h5><p>Jestにカスタムレポーターを追加するにはこの設定オプションを指定します。 カスタムレポーターは、 <code>onRunStart</code>、<code>onTestStart</code>、<code>onTestResult</code>、 <code>onRunComplete</code> メソッドを実装したクラスであり、各イベントが発生した場合にこれらのメソッドが呼ばれます。</p><p>カスタムレポーターが指定された場合、デフォルトのJestのレポーターは上書きされます。デフォルトのレポーターも併せて使用する場合は、モジュール名に<code>default</code>を指定できます。</p><p>以下の設定はデフォルトのレポーターを上書きします。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;reporters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;&lt;rootDir&gt;/my-custom-reporter.js&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>以下の設定はJestが提供するデフォルトのレポーターに加えてカスタムレポーターを使用します。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;reporters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&lt;rootDir&gt;/my-custom-reporter.js&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>加えて、カスタムレポーターは第2引数に<code>options</code>オプションを渡すことで設定を行うことができます。</p><pre class="prism language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;reporters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;&lt;rootDir&gt;/my-custom-reporter.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">&quot;banana&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yes&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;pineapple&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>カスタムレポーターのモジュールはコンストラクタ引数に<code>GlobalConfig</code>とレポーターオプションをとるクラスとして定義されなければなりません。</p><p>レポーターの例:</p><pre class="prism language-js"><span spellcheck="true" class="token comment">// my-custom-reporter.js</span>
<span class="token keyword">class</span> <span class="token class-name">MyCustomReporter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>globalConfig<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_globalConfig <span class="token operator">=</span> globalConfig<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_options <span class="token operator">=</span> options<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">onRunComplete</span><span class="token punctuation">(</span>contexts<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Custom reporter output:&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;GlobalConfig: &#x27;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_globalConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Options: &#x27;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyCustomReporter<span class="token punctuation">;</span></pre><p>カスタムレポーターは<code>getLastError()</code>メソッドでエラーを返すことでJestを0でない戻り値で終了させることができます。</p><pre class="prism language-js"><span class="token keyword">class</span> <span class="token class-name">MyCustomReporter</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">// ...</span>
  <span class="token function">getLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_shouldFail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;my-custom-reporter.js reported an error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>全てのメソッドと引数の型を確認するには、<a href="https://github.com/facebook/jest/blob/master/types/TestRunner.js" target="_blank">types/TestRunner.js</a>内の <code>Reporter</code> typeを参照して下さい。</p><h3><a class="anchor" name="resetmocks-boolean"></a><code>resetMocks</code> [boolean] <a class="hash-link" href="#resetmocks-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>各テストごとに自動的にモックの状態をリセットします。 各テストの間で <code>jest.resetAllMocks()</code>を実行するのと同じです。 このオプションはあらゆるモックに見せかけの実装を削除させますが、モックを最初の時点の実装に戻すものではありません。</p><h3><a class="anchor" name="resetmodules-boolean"></a><code>resetModules</code> [boolean] <a class="hash-link" href="#resetmodules-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>有効化した場合、個々のテストを実行する前に各テストファイルのモジュールレジストリがリセットされます。 このオプションはテスト間のローカルのモジュールの状態が競合しないように各テストで使うモジュールを切り離したい場合に便利です。 プログラム内で <a href="#jest-resetmodules" target=""><code>jest.resetModules()</code></a>を利用することでも同様のことができます。</p><h3><a class="anchor" name="resolver-string"></a><code>resolver</code> [string] <a class="hash-link" href="#resolver-string">#</a></h3><p>デフォルト: <code>undefined</code></p><h5><a class="anchor" name="jest-2000"></a>jest バージョン<strong>20.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-2000">#</a></h5><p>カスタムのリゾルバを利用する場合はこのオプションを指定します。 このリゾルバは、第1引数に依存関係の解決に用いるパスの文字列を、第2引数に以下の構造のオブジェクトを受け取る関数をエクスポートするnodeモジュールでなければなりません:</p><pre class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;basedir&quot;</span><span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  <span class="token string">&quot;browser&quot;</span><span class="token punctuation">:</span> bool<span class="token punctuation">,</span>
  <span class="token string">&quot;extensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;moduleDirectory&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;paths&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;rootDir&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><p>関数は解決されるべきモジュールへのパスかモジュールが見つからなければエラーを返します。</p><h3><a class="anchor" name="rootdir-string"></a><code>rootDir</code> [string] <a class="hash-link" href="#rootdir-string">#</a></h3><p>デフォルト: <code>package.json</code>を含むルートディレクトリ<em>または</em><code>package.json</code>が見つからなければ&lt;a href=<a href="https://ja.wikipedia.org/wiki/Pwd&quot;&gt;`pwd`">https://ja.wikipedia.org/wiki/Pwd&quot;&gt;`pwd`</a>&lt;/a&gt;</p><p>Jestがテストとモジュールをその範囲内で探索するルートディレクトリを指定します。 <code>package.json</code>にJestの設定を記述してルートディレクトリをリポジトリのルートをしたい場合、この設定のパラメータ値はデフォルトの<code>package.json</code>が格納されているディレクトリとなります。</p><p>多くの場合、リポジトリのどこにソースコードを格納するかによって、 <code>&#x27;src&#x27;</code> または <code>&#x27;lib&#x27;</code>に設定されるでしょう。</p><p><em>パスを指定する他のオプションで<code>&#x27;&lt;rootDir&gt;&#x27;</code>を文字列トークンとして利用する場合は、このオプションの値を参照することに注意して下さい。 このため、例えば<a href="#setupfiles-array" target=""><code>setupFiles</code></a>オプションのエントリポイントをルートディレクトリ直下の <code>env-setup.js</code>ファイルとしたい場合は、このオプションの値は <code>[&quot;&lt;rootDir&gt;/env-setup.js&quot;]</code>となるでしょう。</em></p><h3><a class="anchor" name="roots-array-string"></a><code>roots</code> [array&lt;string&gt;] <a class="hash-link" href="#roots-array-string">#</a></h3><p>デフォルト: <code>[&quot;&lt;rootDir&gt;&quot;]</code></p><p>Jestがその中でファイルを探索するのに使用するディレクトリのパスを使用します。</p><p>Jestに単一のサブディレクトリのみを探索させ(リポジトリ内に<code>src/</code>ディレクトリがあるなど)、リポジトリの残りの場所にはアクセスさせたくない場合に有用です。</p><p><em>注意: <code>rootDir</code>が他の設定オプションで再利用されるトークンとして最も頻繁に使われる一方で、<code>roots</code> はJestの内部で<strong>テストファイルやソースコードファイル</strong>を見つけるのに使われます。 これは <code>node_modules</code> から手動モック用にモジュールを見つける際にも適用されます（<code>__mocks__</code> も <code>roots</code> の中にある必要があります）。</em></p><p><em>注意： デフォルトでは、 <code>roots</code> は <code>&lt;rootDir&gt;</code> のみをエントリとして持ちますが、1つのプロジェクトで複数の roots を設定したい場合は、例えば次のように設定します: <code>roots: [&quot;&lt;rootDir&gt;/src/&quot;, &quot;&lt;rootDir&gt;/tests/&quot;]</code>。</em></p><h3><a class="anchor" name="setupfiles-array"></a><code>setupFiles</code> [array] <a class="hash-link" href="#setupfiles-array">#</a></h3><p>デフォルト: <code>[]</code></p><p>各テスト前にテスト環境の構成やセットアップを行うためのモジュールへのパスを指定します。 各テストは個々の環境でテストを実行するため、これらのスクリプトはテスト環境にてテストコードそれ自身の実行前に直ちに実行されます。</p><p>このスクリプトを<a href="#setuptestframeworkscriptfile-string" target=""><code>setupTestFrameworkScriptFile</code></a>の<em>前に</em>実行することは無意味です。</p><h3><a class="anchor" name="setuptestframeworkscriptfile-string"></a><code>setupTestFrameworkScriptFile</code> [string] <a class="hash-link" href="#setuptestframeworkscriptfile-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p>各テスト前にテストフレームワークの構成やセットアップを行うためのモジュールへのパスを指定します。 <a href="#setupfiles-array" target=""><code>setupFiles</code></a>で指定したスクリプトはテストフレームワークを環境にインストールする前に実行されるため、このオプションで指定したスクリプトファイルは環境にテストフレームワークがインストールされた直後のタイミングでコードを実行することができます。</p><p>例えばJestはjasmineのAPIにモンキーパッチを当てて動作する<code>jasmine</code>のプラグインをいくつか提供しています。 もしより多くのjasmineプラグインを混在して(または例えばプロジェクト単位で利用するカスタムマッチャが必要な場合) 追加した場合は、このもモジュールで実現できます。</p><h3><a class="anchor" name="snapshotserializers-array-string"></a><code>snapshotSerializers</code> [array&lt;string&gt;] <a class="hash-link" href="#snapshotserializers-array-string">#</a></h3><p>デフォルト: <code>[]</code></p><p>Jestがスナップショットテストに利用するスナップショットのシリアライザーのモジュールのパスのリストを指定します。</p><p>Jestは組み込みのJavaScriptの型、HTML要素(Jest バージョン20.0.0+)、ImmutableJS (Jest バージョン20.0.0+) そしてReact要素に対応したデフォルトのシリアライザーを備えています。 詳細については <a href="/jest/docs/tutorial-react-native.html#snapshot-test" target=""> snapshot test tutorial</a> を参照してください。</p><p>シリアライザー モジュールの例:</p><pre class="prism language-js"><span spellcheck="true" class="token comment">// my-serializer-module</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> serialize<span class="token punctuation">,</span> indent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#x27;Pretty foo: &#x27;</span> <span class="token operator">+</span> <span class="token function">serialize</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> val <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p><code>serialize</code>は既存のプラグインを利用して値をシリアライズする関数です。</p><p><code>my-serializer-module</code>をシリアライザーとして使用する場合は、下記の様な設定になります:</p><pre class="prism language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;snapshotSerializers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;my-serializer-module&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>最終的にテストは下記のようになります:</p><pre class="prism language-js"><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>レンダリングされたスナップショット:</p><pre class="prism language-javascript">Pretty foo<span class="token punctuation">:</span> Object <span class="token punctuation">{</span>
  <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">&quot;y&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre><p>シリアライザーの依存関係を暗黙的から明示的なものにするには、Jestの設定に <code>snapshotSerializers</code>へのパスを追加する代わりに、個々のテストファイルにモジュールを<a href="/jest/docs/expect.html#expectaddsnapshotserializerserializer" target=""><code>expect.addSnapshotSerializer</code></a>を呼び出して追加して下さい。</p><h3><a class="anchor" name="testenvironment-string"></a><code>testEnvironment</code> [string] <a class="hash-link" href="#testenvironment-string">#</a></h3><p>デフォルト: <code>&quot;jsdom&quot;</code></p><p>テスト実行時に使用されるテスト環境を指定します。 Jestのデフォルトの環境は <a href="https://github.com/tmpvar/jsdom" target="_blank">jsdom</a>を経由したブラウザライクな環境です。 Node環境によるサービスを構築する場合は、 <code>node</code>オプションを指定することでnodeライクな環境を代わりに使うことができます。</p><p>一部のテストで他の環境が必要となる場合、コメント部に<code>@jest-environment</code>を追加することができます。</p><h5><a class="anchor" name="jest-2000"></a>jest バージョン<strong>20.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-2000">#</a></h5><pre class="prism language-js"><span spellcheck="true" class="token comment">/**
 * @jest-environment jsdom
 */</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;use jsdom in this test file&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>テスト環境のセットアップに使用する独自のモジュールを作成できます。 モジュールは <code>runScript</code> および <code>dispose</code>メソッドを実装したクラスをエクスポートしなければなりません。 例としては <a href="https://github.com/facebook/jest/blob/master/packages/jest-environment-node/src/index.js" target="_blank">node</a>または <a href="https://github.com/facebook/jest/blob/master/packages/jest-environment-jsdom/src/index.js" target="_blank">jsdom</a>の環境設定を参照してください。</p><h3><a class="anchor" name="testmatch-array-string"></a><code>testMatch</code> [array&lt;string&gt;] <a class="hash-link" href="#testmatch-array-string">#</a></h3><h5><a class="anchor" name="jest-1900"></a>jest バージョン<strong>19.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-1900">#</a></h5><p>(デフォルト: <code>[ &#x27;**/__tests__/**/*.js?(x)&#x27;, &#x27;**/?(*.)(spec|test).js?(x)&#x27; ]</code>)</p><p>テストファイルを検出するのにJestが使用するglobパターンを指定します。 デフォルトでは <code>__tests__</code> ディレクトリ配下の <code>.js</code> および <code>.jsx</code> ファイルを探し、そして<code>.test</code> または <code>.spec</code>のサフィックスが付いたファイルを探します(例えば <code>Component.test.js</code> または <code>Component.spec.js</code>など)。 <code>test.js</code>または <code>spec.js</code>といったファイルについても同様に見つけます。</p><p>指定できるパターンの詳細については、<a href="https://github.com/jonschlinkert/micromatch" target="_blank"> micromatch</a> パッケージを参照して下さい。</p><p><a href="#testregex-string" target=""> <code>testRegex</code> [string]</a>についても参照して下さい、ただし両方のオプションを同時には指定できないことに注意してください。</p><h3><a class="anchor" name="testpathignorepatterns-array-string"></a><code>testPathIgnorePatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#testpathignorepatterns-array-string">#</a></h3><p>デフォルト: <code>[&quot;/node_modules/&quot;]</code></p><p>テスト実行前に全てのファイルのパスに対して照合する正規表現パターンの配列を指定します。テストパスがパターンのいずれかにマッチした場合、そのテストはスキップされます。</p><p>パターン文字列はフルパスに対して照合されます。 <code>&lt;rootDir&gt;</code> 文字列トークンをプロジェクトのルートディレクトリとして指定することで、異なるルートディレクトリを持ちうる異なる環境のファイルを誤って無視してしまうことを防ぐことができます。 例: <code>[&quot;&lt;rootDir&gt;/build/&quot;, &quot;&lt;rootDir&gt;/node_modules/&quot;]</code>。</p><h3><a class="anchor" name="testregex-string"></a><code>testRegex</code> [string] <a class="hash-link" href="#testregex-string">#</a></h3><p>デフォルト: <code>(/__tests__/.*|(\\.|/)(test|spec))\\.jsx?$</code></p><p>テストファイルを検出するのにJestが使用するパターンを指定します。 デフォルトでは <code>__tests__</code> ディレクトリ配下の <code>.js</code> および <code>.jsx</code> ファイルを探し、そして<code>.test</code> または <code>.spec</code>のサフィックスが付いたファイルを探します(例えば <code>Component.test.js</code> または <code>Component.spec.js</code>など)。 <code>test.js</code>または <code>spec.js</code>といったファイルについても同様に見つけます。 <a href="#testmatch-array-string" target=""><code>testMatch</code> [array&lt;string&gt;]</a>についても参照して下さい、ただし両方のオプションを同時には指定できないことに注意してください。</p><p>以下はデフォルトの正規表現を可視化したものです。</p><pre class="prism language-javascript">├── __tests__
│   └── component<span class="token punctuation">.</span>spec<span class="token punctuation">.</span>js # test
│   └── anything # test
├── <span class="token keyword">package</span><span class="token punctuation">.</span>json # not test
├── foo<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js # test
├── bar<span class="token punctuation">.</span>spec<span class="token punctuation">.</span>jsx # test
└── component<span class="token punctuation">.</span>js # not test</pre><h3><a class="anchor" name="testresultsprocessor-string"></a><code>testResultsProcessor</code> [string] <a class="hash-link" href="#testresultsprocessor-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p>このオプションでカスタムのテスト結果のプロセッサを設定することができます。このプロセッサは、第１引数として次の構造を持つオブジェクトをとる関数をエクスポートするnodeモジュールでなければなりません。</p><pre class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;success&quot;</span><span class="token punctuation">:</span> bool<span class="token punctuation">,</span>
  <span class="token string">&quot;startTime&quot;</span><span class="token punctuation">:</span> epoch<span class="token punctuation">,</span>
  <span class="token string">&quot;numTotalTestSuites&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numPassedTestSuites&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numFailedTestSuites&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numRuntimeErrorTestSuites&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numTotalTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numPassedTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numFailedTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;numPendingTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token string">&quot;testResults&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string">&quot;numFailingTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
    <span class="token string">&quot;numPassingTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
    <span class="token string">&quot;numPendingTests&quot;</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
    <span class="token string">&quot;testResults&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">&quot;title&quot;</span><span class="token punctuation">:</span> string <span class="token punctuation">(</span>message <span class="token keyword">in</span> it block<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;failed&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;pending&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;passed&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;ancestorTitles&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string <span class="token punctuation">(</span>message <span class="token keyword">in</span> describe blocks<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;failureMessages&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;numPassingAsserts&quot;</span><span class="token punctuation">:</span> number
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;perfStats&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> epoch<span class="token punctuation">,</span>
      <span class="token string">&quot;end&quot;</span><span class="token punctuation">:</span> epoch
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;testFilePath&quot;</span><span class="token punctuation">:</span> absolute path to test file<span class="token punctuation">,</span>
    <span class="token string">&quot;coverage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre><h3><a class="anchor" name="testrunner-string"></a><code>testRunner</code> [string] <a class="hash-link" href="#testrunner-string">#</a></h3><p>デフォルト: <code>jasmine2</code></p><p>このオプションでカスタムのテストランナーを指定できます。既定値は jasmine2 です。カスタムのテストランナーは、テストランナーの実装へのパスを指定することによって提供されます。</p><p>テストランナーのモジュールは、下記のシグネチャを持つ関数をエクスポートしなければなりません:</p><pre class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">testRunner</span><span class="token punctuation">(</span>
  config<span class="token punctuation">:</span> Config<span class="token punctuation">,</span>
  environment<span class="token punctuation">:</span> Environment<span class="token punctuation">,</span>
  runtime<span class="token punctuation">:</span> Runtime<span class="token punctuation">,</span>
  testPath<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>TestResult<span class="token operator">&gt;</span></pre><p>このような関数の例は、デフォルトの <a href="https://github.com/facebook/jest/blob/master/packages/jest-jasmine2/src/index.js" target="_blank">jasmine2 test runner package</a>で確認できます。</p><h3><a class="anchor" name="testurl-string"></a><code>testURL</code> [string] <a class="hash-link" href="#testurl-string">#</a></h3><p>デフォルト: <code>about:blank</code></p><p>このオプションは、jsdom 環境の URL を指定します。<code>location.href</code> などのプロパティに反映されます。</p><h3><a class="anchor" name="timers-string"></a><code>timers</code> [string] <a class="hash-link" href="#timers-string">#</a></h3><p>デフォルト: <code>real</code></p><p>この値を <code>fake</code> に設定することで、<code>setTimeout</code>などの関数に対して偽のタイマーを使用することができます。 偽のタイマーはテストでは待ちたくないような長いタイムアウト時間を設定するようなコードがある時に役立ちます。</p><h3><a class="anchor" name="transform-object-string-string"></a><code>transform</code> [object&lt;string, string&gt;] <a class="hash-link" href="#transform-object-string-string">#</a></h3><p>デフォルト: <code>undefined</code></p><p>正規表現からtransformerへのパスへのマップを指定します。 transformerはソースファイルを変換する同期処理を行う関数を提供するモジュールです。 例えばまだnodeではサポートされていない新しい言語の機能をモジュールやテストで使用したい時、将来のJavaScriptのバージョンを現在のものに変換する多くのコンパイラの中の１つをプラグインとして利用するでしょう。 例: <a href="https://github.com/facebook/jest/blob/master/examples/typescript/package.json#L16" target="_blank">examples/typescript</a> の例や <a href="/jest/docs/tutorial-webpack.html" target="">webpack tutorial</a> を参照してください。</p><p>このようなコンパイラの例には、<a href="https://babeljs.io/" target="_blank">babel</a>、 <a href="http://www.typescriptlang.org/" target="_blank">typescript</a>、や <a href="http://github.com/leebyron/async-to-gen#jest" target="_blank">async-to-gen</a> が含まれます。</p><p><em>注意: transformerはファイルに変更が無い限りファイルごとに一度しか実行されません。 transformerの開発時にはJestを <code>--no-cache</code>オプションで実行するか頻繁に <a href="/jest/docs/troubleshooting.html#caching-issues" target="">Jestのキャッシュを削除</a>すると便利です。</em></p><p><em>注意: <code>babel-jest</code> transformerを使用しながら追加でコードのプリプロセッサを使用したい場合は、何らかの方法で &quot;transform&quot; フィールドが上書きされると<code>babel-jest</code> は自動的には読み込まれなってしまうことに注意して下さい。 JavaScriptコードのコンパイルに<code>babel-jest</code> を使用したい場合は明示的に定義されなければなりません。 <a href="https://github.com/facebook/jest/tree/master/packages/babel-jest#setup" target="_blank">babel-jest plugin</a>を参照して下さい。</em></p><h3><a class="anchor" name="transformignorepatterns-array-string"></a><code>transformIgnorePatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#transformignorepatterns-array-string">#</a></h3><p>デフォルト: <code>[&quot;/node_modules/&quot;]</code></p><p>変換前に全てのソースコードファイルのパスに対して照合する正規表現パターンの配列を指定します。パスがパターンのいずれかにマッチした場合、そのファイルは変換されません。</p><p>パターン文字列はフルパスに対して照合されます。 <code>&lt;rootDir&gt;</code> 文字列トークンをプロジェクトのルートディレクトリとして指定することで、異なるルートディレクトリを持ちうる異なる環境のファイルを誤って無視してしまうことを防ぐことができます。 例:<code>[&quot;&lt;rootDir&gt;/bower_components/&quot;, &quot;&lt;rootDir&gt;/node_modules/&quot;]</code>。</p><h3><a class="anchor" name="unmockedmodulepathpatterns-array-string"></a><code>unmockedModulePathPatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#unmockedmodulepathpatterns-array-string">#</a></h3><p>デフォルト: <code>[]</code></p><p>モジュールローダーが自動的にモック返す前に全てのモジュールに対して照合する正規表現パターンの配列を指定します。 モジュールのパスがリスト中のいずれかのパターンにマッチした場合、モジュールローダーによる自動的なモック化は行われません。</p><p>このオプションは(underscore/lo-dashなどのような) ほぼ常にプライベートな処理の実装には、ほぼいつも利用される一般的に&#x27;ユーティリティ&#x27; モジュールに関して役に立ちます。 出来るだけこのリストを小さく保ち、個々のテスト内で<code>jest.mock()</code>/<code>jest.unmock()</code>を常に明示的に使用することが大抵の場合でベストプラクティスとなります。 明示的にテスト前にセットアップを行うことで、テストを読む他の人がそのテストがなぜその環境で実行されるのかを理解するのがとても簡単にになります。</p><p>個々のテストにおいて、テストファイルの先頭で<code>jest.mock()</code>を明示的に呼び出す事でこの設定を上書きすることが可能です。</p><h3><a class="anchor" name="verbose-boolean"></a><code>verbose</code> [boolean] <a class="hash-link" href="#verbose-boolean">#</a></h3><p>デフォルト: <code>false</code></p><p>テスト実行中に個々のテストのレポートを出力するかどうかを指定します。すべてのエラーはテスト完了後に最後尾にも出力されます。</p><h3><a class="anchor" name="watchpathignorepatterns-array-string"></a><code>watchPathIgnorePatterns</code> [array&lt;string&gt;] <a class="hash-link" href="#watchpathignorepatterns-array-string">#</a></h3><p>デフォルト: <code>[]</code></p><h5><a class="anchor" name="jest-2100"></a>jest バージョン<strong>21.0.0+</strong>で利用可能 <a class="hash-link" href="#jest-2100">#</a></h5><p>ウォッチモードでテストを再実行する前に、全てのソースファイルのパスと照合させる正規表現パターンの配列です。 ファイルのパスがパターンのどれかに一致していれば、ファイルが更新された際にテストを再実行しません。</p><p>正規表現パターンはフルパスに対して照合されます。 <code>&lt;rootDir&gt;</code> 文字列トークンをプロジェクトのルートディレクトリとして指定することで、異なるルートディレクトリを持ちうる異なる環境のファイルを誤って無視してしまうことを防ぐことができます。 例： <code>[&quot;&lt;rootDir&gt;/node_modules/&quot;]</code></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="jest-object.html#content">← 前</a><a class="docs-next button" href="cli.html#content">次 →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/ja/getting-started.html">Getting Started</a><a href="/jest/docs/ja/snapshot-testing.html">Guides</a><a href="/jest/docs/ja/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/ja/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>