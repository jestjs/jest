<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Mock Functions · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Mock Functions · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="Las funciones de simulación mock permiten probar los vínculos entre código deshaciéndose de la implementación real de una función, capturando llamadas a la función (y los parámetros de dicha llamada), capturando instancias de funciones de construcción cuando estas se crean instancias con `new`, y permitiendo configuración de valores de retorno al momento de probar."><link rel="apple-touch-icon" sizes="180x180" href="/jest/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/jest/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/jest/img/favicon/favicon-16x16.png"><link rel="manifest" href="/jest/img/favicon/manifest.json"><link rel="mask-icon" href="/jest/img/favicon/safari-pinned-tab.svg"><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"><meta name="msapplication-config" content="/jest/img/favicon/browserconfig.xml"><meta name="theme-color" content="#99424f"><link rel="alternate" type="application/atom+xml" href="/jest/blog/atom.xml" title="Jest Blog ATOM Feed"><link rel="alternate" type="application/rss+xml" href="/jest/blog/feed.xml" title="Jest Blog RSS Feed"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css?v=2"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/es-ES/getting-started.html" class="active">Documentación</a></li><li><a href="/jest/docs/es-ES/api.html" class="">API</a></li><li><a href="/jest/es-ES/help.html" class="">Ayuda</a></li><li><a href="/jest/blog/" class="">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg">Español</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/en">English</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Introduction</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/es-ES/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/jest-object.html#content">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Framework Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/testing-frameworks.html#content">Testing Web Frameworks</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/snapshot-testing.html#content">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/webpack.html#content">Usando Webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/es-ES" target="_blank">Translate this Doc</a><h1>Mock Functions</h1></header><article><div><p>Las funciones de simulación mock permiten probar los vínculos entre código deshaciéndose de la implementación real de una función, capturando llamadas a la función (y los parámetros de dicha llamada), capturando instancias de funciones de construcción cuando estas se crean instancias con <code>new</code>, y permitiendo configuración de valores de retorno al momento de probar.</p><p>Existen dos formas de simular funciones con mocks: Ya sea creando una función mock para usar en la prueba, o escribiendo un <a href="/jest/docs/manual-mocks.html" target=""><code>mock manual</code></a> para sobrescribir la dependencia a un módulo.</p><h2><a class="anchor" name="usando-una-funcion-mock"></a>Usando una función mock <a class="hash-link" href="#usando-una-funcion-mock">#</a></h2><p>Supongamos se esta probando la implementación de una función <code>forEach</code> que invoca una función callback para cada objeto del arreglo que se provee.</p><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">forEach</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>Para probar esta función, podemos ocupar una función mock, e inspeccionar el estado del mock para asegurarnos que se llama a la función callback como es esperado.</p><pre class="prism language-javascript">
<span class="token keyword">const</span> mockCallback <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mockCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The mock function is called twice</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The first argument of the first call to the function was 0</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The first argument of the second call to the function was 1</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h2><a class="anchor" name="propiedad-mock"></a>propiedad <code>.mock</code> <a class="hash-link" href="#propiedad-mock">#</a></h2><p>Todas las funciones simuladas mock tienen la propiedad <code>.mock</code>, donde se guarda la información sobre como se ha llamado a esa función. La propiedad <code>.mock</code> guarda también el valor de <code>this</code> correspondiente a cada llamada, de modo que también se puede inspeccionar lo siguiente:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> miMock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bound <span class="token operator">=</span> miMock<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>miMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; [ &lt;a&gt;, &lt;b&gt; ]</span></pre><p>Estos miembros de la simulación mock son extremadamente útiles en pruebas para identificar como es que estas funciones fueron ejecutadas o como se crearon sus instancias:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// La función se ejecuto una sola vez</span>
<span class="token function">expect</span><span class="token punctuation">(</span>unaFuncionMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// El primer argumento de la primera llamada fue &#x27;first arg&#x27;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>unaFuncionMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;first arg&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// El segundo argumento de la primera llamada fue &#x27;second arg&#x27;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>unaFuncionMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;second arg&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// Se crearon exactamente dos instancias de la función</span>
<span class="token function">expect</span><span class="token punctuation">(</span>unaFuncionMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// El primer objeto regresado de la primera instancia de esta función</span>
<span spellcheck="true" class="token comment">// tenia una propiedad `name` con valor &#x27;test&#x27;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>unaFuncionMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&#x27;test&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h2><a class="anchor" name="simular-valores-de-retorno"></a>Simular valores de retorno <a class="hash-link" href="#simular-valores-de-retorno">#</a></h2><p>Las funciones simuladas mock pueden ser utilizadas para inyectar valores de prueba en el código de pruebas:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> miMock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; undefined</span>

miMock<span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">mockReturnValue</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">miMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; 10, &#x27;x&#x27;, true, true</span></pre><p>Las funciones mock son también efectivas en código que ocupa un estilo funcional de llamadas continuas. Código escrito en este estilo evita la complejidad de crear módulos simulados que recreen la información del componente real que están sustituyendo, a favor de inyectar los valores en la prueba directamente donde van a ser utilizados.</p><pre class="prism language-javascript">
<span class="token keyword">const</span> pruebaFnFiltro <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// Establece que el mock regresa `true` en la primera llamada,</span>
<span spellcheck="true" class="token comment">// y `false` en la segunda</span>
pruebaFnFiltro 
  <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> resultado <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>pruebaFnFiltro<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultado<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; [11]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pruebaFnFiltro<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; [ [11], [12] ]</span></pre><p>La mayoría de ejemplos de código real involucran el conseguir una función mock de un componente dependencia y configurar ésta, pero la técnica aplicada es la misma. En esos casos, se debe evitar el implementar lógica dentro de cualquier función que no se este probando.</p><h2><a class="anchor" name="implementaciones-de-simulaciones-mock"></a>Implementaciones de simulaciones mock <a class="hash-link" href="#implementaciones-de-simulaciones-mock">#</a></h2><p>Sin embargo, existen casos donde es útil no solo reemplazar los valores de retorno de una función, sino reemplazar la función por completo. Esto se puede realizar con <code>jest.fn</code> o el método <code>mockImplementationOnce</code> en funciones mock.</p><pre class="prism language-javascript">
<span class="token keyword">const</span> myMockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; true</span>

<span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; true</span></pre><p>El método <code>mockImplementation</code> es útil cuando se desea definir el comportamiento por defecto de una función mock que es creada en otro módulo:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// foo.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">// some implementation;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// this happens automatically with automocking</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// foo is a mock function</span>
foo<span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; 42</span></pre><p>Cuando se requiere recrear comportamiento complejo de modo que diferentes llamadas una función simulada mock regresen diferentes resultados, se puede usar el método <code>mockImplementationOnce</code>:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> myMockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; true</span>

<span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; false</span></pre><p>Cuando la función simulada mock haya agotado las implementaciones definidas en <code>mockImplementationOnce</code>, está ejecutará la implementación por defecto definida en <code>jest.fn</code> (sí es que se definió):</p><pre class="prism language-javascript">
<span class="token keyword">const</span> myMockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;first call&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;second call&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; &#x27;first call&#x27;, &#x27;second call&#x27;, &#x27;default&#x27;, &#x27;default&#x27;</span></pre><p>Para casos donde haya métodos ejecutados en secuencia (y por lo tanto donde siempre se requiera regresar <code>this</code>), existe un API que simplifica de manera agradable esta situación, a través del método <code>.mockReturnThis()</code> que se encuentra en todos los mocks:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  myMethod<span class="token punctuation">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockReturnThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// is the same as</span>

<span class="token keyword">const</span> otherObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  myMethod<span class="token punctuation">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><h2><a class="anchor" name="mock-names"></a>Mock Names <a class="hash-link" href="#mock-names">#</a></h2><h5><a class="anchor" name="available-in-jest-2130"></a>available in Jest <strong>21.3.0+</strong> <a class="hash-link" href="#available-in-jest-2130">#</a></h5><p>You can optionally provide a name for your mock functions, which will be displayed instead of &quot;jest.fn()&quot; in test error output. Use this if you want to be able to quickly identify the mock function reporting an error in your test output.</p><pre class="prism language-javascript">
<span class="token keyword">const</span> myMockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockReturnValue</span><span class="token punctuation">(</span><span class="token string">&#x27;default&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span>scalar <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">42</span> <span class="token operator">+</span> scalar<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockName</span><span class="token punctuation">(</span><span class="token string">&#x27;add42&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><h2><a class="anchor" name="matchers-comunes"></a>Matchers comunes <a class="hash-link" href="#matchers-comunes">#</a></h2><p>Finalmente, para simplificar el proceso de identificar como se llamaron las funciones simuladas mock, existen funciones de comparación personalizadas:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// The mock function was called at least once</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The mock function was called at least once with the specified args</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The last call to the mock function was called with the specified args</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastCalledWith</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Estos métodos de comparacion, o matchers, son formas sencillas de inspeccionar la propiedad <code>.mock</code>. Siempre se pueden realizar las comparaciones manualmente si se desea hacer algo más especifico:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// The mock function was called at least once</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The mock function was called at least once with the specified args</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token punctuation">[</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The last call to the mock function was called with the specified args</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// The first arg of the last call to the mock function was `42`</span>
<span spellcheck="true" class="token comment">// (note that there is no sugar helper for this specific of an assertion)</span>
<span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Para una lista completa de matchers, véase los documentos de referencia <a href="/jest/docs/expect.html" target="">reference docs</a>.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="setup-teardown.html#content">← Anterior</a><a class="docs-next button" href="more-resources.html#content">Sigue leyendo →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"></a><div><h5>Docs</h5><a href="/jest/docs/es-ES/getting-started.html">Getting Started</a><a href="/jest/docs/es-ES/snapshot-testing.html">Guides</a><a href="/jest/docs/es-ES/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/es-ES/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>