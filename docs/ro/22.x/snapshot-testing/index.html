<!DOCTYPE html><html lang="ro"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Snapshot Testing · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Testarea de imagine este un instrument foarte util, ori de câte ori doriţi să vă asiguraţi că interfaţa nu se schimbă în mod neaşteptat."/><meta name="docsearch:version" content="22.x"/><meta name="docsearch:language" content="ro"/><meta property="og:title" content="Snapshot Testing · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jestjs.io/"/><meta property="og:description" content="Testarea de imagine este un instrument foarte util, ori de câte ori doriţi să vă asiguraţi că interfaţa nu se schimbă în mod neaşteptat."/><meta property="og:image" content="https://jestjs.io/img/opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jestjs.io/img/jest.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://jestjs.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://jestjs.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ro"><img class="logo" src="/img/jest.svg" alt="Jest"/><h2 class="headerTitleWithLogo">Jest</h2></a><a href="/ro/versions"><h3>22.x</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/ro/22.x/getting-started" target="_self">Documentație</a></li><li class="siteNavGroupActive"><a href="/docs/ro/22.x/api" target="_self">API</a></li><li class=""><a href="/ro/help" target="_self">Ajutor</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Română</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/22.x/snapshot-testing">English</a></li><li><a href="/docs/ja/22.x/snapshot-testing">日本語</a></li><li><a href="/docs/es-ES/22.x/snapshot-testing">Español</a></li><li><a href="/docs/pt-BR/22.x/snapshot-testing">Português (Brasil)</a></li><li><a href="/docs/ru/22.x/snapshot-testing">Русский</a></li><li><a href="/docs/uk/22.x/snapshot-testing">Українська</a></li><li><a href="/docs/zh-Hans/22.x/snapshot-testing">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/using-matchers">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/asynchronous">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/setup-teardown">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/mock-functions">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/jest-platform">Jest Platform</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/more-resources">More Resources</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/ro/22.x/snapshot-testing">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/tutorial-async">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/timer-mocks">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/manual-mocks">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/webpack">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/puppeteer">Using with puppeteer</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/tutorial-jquery">DOM Manipulation</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/migration-guide">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/troubleshooting">Troubleshooting</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Framework Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/tutorial-react">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/tutorial-react-native">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/testing-frameworks">Testing Web Frameworks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/api">Globals</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/expect">Expect</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/mock-function-api">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/jest-object">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/configuration">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/ro/22.x/cli">Jest CLI Options</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/SnapshotTesting.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Snapshot Testing</h1></header><article><div><span><p>Testarea de imagine este un instrument foarte util, ori de câte ori doriţi să vă asiguraţi că interfaţa nu se schimbă în mod neaşteptat.</p>
<p>Un caz tipic de astfel de testare pentru o aplicatie de mobil, randează o componentă de UI, crează o imagine a ei, apoi o compară cu o imagine de referință stocată în timpul testului anterior. Testul va eşua în cazul în care cele două imagini nu sunt la fel: fie schimbarea este neașteptată, fie imaginea trebuie actualizată la noua versiune a componentei UI.</p>
<h2><a class="anchor" aria-hidden="true" id="testarea-de-imagine-cu-jest"></a><a href="#testarea-de-imagine-cu-jest" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testarea de Imagine cu Jest</h2>
<p>O abordare similară se poate lua atunci când vine vorba de testarea componentelor React. În loc de randarea interfeței grafică, care ar necesita construirea întregii aplicații, puteţi utiliza un test de randare pentru a genera rapid o valoare serializabilă pentru arborele React. Consider this <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/__tests__/link.react.test.js">example test</a> for a <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/Link.react.js">Link component</a>:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Link <span class="hljs-keyword">from</span> <span class="hljs-string">'../Link.react'</span>;
<span class="hljs-keyword">import</span> renderer <span class="hljs-keyword">from</span> <span class="hljs-string">'react-test-renderer'</span>;

it(<span class="hljs-string">'renders correctly'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> tree = renderer
    .create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">page</span>=<span class="hljs-string">"http://www.facebook.com"</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>)
    .toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
<p>Prima dată când acest test se execută, Jest creează un <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/__tests__/__snapshots__/link.react.test.js.snap">fişier imagine</a> care arată astfel:</p>
<pre><code class="hljs css language-javascript">exports[<span class="hljs-string">`renders correctly 1`</span>] = <span class="hljs-string">`
&lt;a
  className="normal"
  href="http://www.facebook.com"
  onMouseEnter={[Function]}
  onMouseLeave={[Function]}
&gt;
  Facebook
&lt;/a&gt;
`</span>;
</code></pre>
<p>Imaginea ar trebui să fie adăugată alături de modificările de cod, şi revizuite ca parte a procesului de code review. Jest utilizează <a href="https://github.com/facebook/jest/tree/master/packages/pretty-format">pretty-format</a> pentru face imaginile ușor de înţeles omului în timpul procesului de code review. On subsequent test runs Jest will compare the rendered output with the previous snapshot. În cazul în care acestea se potrivesc, testul va trece. În cazul în care nu se potrivesc, fie testul a găsit un bug în codul vostru, care ar trebui să fie reparat, sau implementarea s-a schimbat şi imaginea trebuie să fie actualizată.</p>
<p>More information on how snapshot testing works and why we built it can be found on the <a href="https://jestjs.io/blog/2016/07/27/jest-14.html">release blog post</a>. Va recomandam să citiți <a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">acest articol de blog</a> pentru a înțelege mai bine când ar trebui să utilizaţi testarea de imagine. De asemenea, recomandăm vizionarea acestui <a href="https://egghead.io/lessons/javascript-use-jest-s-snapshot-testing-feature?pl=testing-javascript-with-jest-a36c4074">video egghead</a> despre testarea de imagine cu Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="actualizarea-imaginilor"></a><a href="#actualizarea-imaginilor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actualizarea imaginilor</h3>
<p>Este evident atunci când un test eșuează după ce s-a introdus un bug. Când se întâmplă, rezolvați problema și asigurați-vă că testele trec din nou. Acum, să vorbim însă despre cazul în care un test eșuează din cauza unei schimbări intenţionate în implementare.</p>
<p>O astfel de situaţie poate apărea în cazul în care schimbăm în mod intenţionat adresa componentei Link din exemplul nostru.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// Updated test case with a Link to a different address</span>
it(<span class="hljs-string">'renders correctly'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> tree = renderer
    .create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">page</span>=<span class="hljs-string">"http://www.instagram.com"</span>&gt;</span>Instagram<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>)
    .toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
<p>În acest caz, Jest va afișa următoarele:</p>
<p><img src="/img/content/failedSnapshotTest.png" alt=""></p>
<p>Din moment ce am actualizat componenta noastre pentru a indica spre o altă adresă, este firesc să aşteptăm modificări în imaginea acestei componente. Test nostru de imagine eșuează deoarece imagine actualizată pentru componenta noastră nu mai corespunde cu imaginea de referință.</p>
<p>To resolve this, we will need to update our snapshot artifacts. You can run Jest with a flag that will tell it to re-generate snapshots:</p>
<pre><code class="hljs">jest --updateSnapshot
</code></pre>
<p>Acceptați modificările executând comanda de mai sus. Puteţi utiliza, de asemenea, echivalentul <code>-u</code> pentru a regenera imaginile, dacă preferaţi. Aceasta va regenera imaginile de referință pentru toate testele de imagine. Daca am avea si alte teste de imagine eșuate din cauza unor bug-uri neintenţionate, va fi nevoie să rezolvăm bug-urile înainte de a regenera imaginile pentru a evita stocarea imaginilor cu comportament eronat.</p>
<p>Dacă doriţi să limitați testele pentru care se vor regenera imaginile, puteţi specifica o opțiune suplimentară <code>--testNamePattern</code> pentru a re-înregistra imaginile doar pentru acele teste care se potrivesc cu modelul specificat.</p>
<p>Puteţi încerca această funcţionalitate prin clonarea <a href="https://github.com/facebook/jest/tree/master/examples/snapshot">exemplului de imagine</a>, modificarea componentei <code>Link</code>, şi rularea Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="testele-trebuie-să-fie-deterministe"></a><a href="#testele-trebuie-să-fie-deterministe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testele trebuie să fie deterministe</h3>
<p>Testele voastre trebuie să fie deterministe. Cu alte cuvinte, execușia acelorași teste de mai multe ori pe o componentă care nu s-a schimbat trebuie să producă aceleaşi rezultate de fiecare dată. Sunteți responsabili să vă asigurați ca imaginile generate nu includ cod specific unor platforme sau alte informatii non-deterministice.</p>
<p>De exemplu, dacă aveţi o componentă <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/Clock.react.js">Clock</a> care utilizează <code>Date.now()</code>, imaginea generată pentru această componentă va fi diferită de fiecare dată când este rulat testul. În acest caz putem <a href="/docs/ro/22.x/mock-functions">dubla metoda Date.now()</a> pentru a returna o valoare consecventă de fiecare dată când se execută testul:</p>
<pre><code class="hljs">Date.now = jest.fn(() =&gt; 1482363367071);
</code></pre>
<p>Acum, de fiecare dată când se execută testul, <code>Date.now()</code> va returna <code>1482363367071</code> în mod constant. Acest lucru va conduce la aceaşi imagine generată pentru această componentă indiferent când s-ar executa testul.</p>
<h3><a class="anchor" aria-hidden="true" id="imaginile-nu-sunt-scrise-automat-de-sistemele-de-integrare-continuă-ci"></a><a href="#imaginile-nu-sunt-scrise-automat-de-sistemele-de-integrare-continuă-ci" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Imaginile nu sunt scrise automat de sistemele de integrare continuă (CI)</h3>
<p>Începând cu Jest 20, imaginile Jest nu sunt scrise automat atunci când Jest este rulat într-un sistem CI fără a specifica în mod explicit <code>--updateSnapshot</code>. Este de aşteptat ca toate imaginile fac parte din codul care se execută pe CI şi deoarece noi imagini ar trece automat testele, ele nu ar trebui să treacă testele rulate pe un sistem de CI. Este recomandat să se commit-uie întotdeauna toate imaginile pentru a fi menţinute în sistemul de versionare.</p>
<h2><a class="anchor" aria-hidden="true" id="întrebări-frecvente"></a><a href="#întrebări-frecvente" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Întrebări frecvente</h2>
<h3><a class="anchor" aria-hidden="true" id="ar-trebui-commit-uite-imaginile-serializate"></a><a href="#ar-trebui-commit-uite-imaginile-serializate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ar trebui commit-uite imaginile serializate?</h3>
<p>Da, toate fişierele de imagine ar trebui să fie commit-uite alături de module pe care le acoperă şi testele lor. Acestea ar trebui considerate ca parte a unui test, similar cu valoarea unei aserțiuni în Jest. De fapt, imaginile reprezintă starea modulelor sursă la un anumit moment. În acest fel, atunci când modulele sursă sunt modificate, Jest poate spune ce anume s-a schimbat de la versiunea anterioară. Acesta poate oferi și context suplimentar în timpul code review-ului în care recenzenţii pot studia mai bine modificările.</p>
<h3><a class="anchor" aria-hidden="true" id="testarea-de-imagine-funcționeaza-numai-cu-componente-react"></a><a href="#testarea-de-imagine-funcționeaza-numai-cu-componente-react" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testarea de imagine funcționeaza numai cu componente React?</h3>
<p><a href="/docs/ro/22.x/tutorial-react">React</a> and <a href="/docs/ro/22.x/tutorial-react-native">React Native</a> components are a good use case for snapshot testing. Cu toate acestea, imaginile pot captura orice valoare serializabilă şi ar trebui utilizate oricând doriți să testați dacă rezultatul este corect. Proiectul Jest conţine multe exemple de testare Jest, rezultatul librăriei de aserțiuni Jest, precum şi loguri din diferite părţi ale codului Jest. Vedeți un exemplu de <a href="https://github.com/facebook/jest/blob/master/e2e/__tests__/console.test.ts">testarea de imagine a consolei</a> în proiectul Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="care-este-diferenţa-între-testarea-de-imagine-şi-testarea-vizuală-de-regresii"></a><a href="#care-este-diferenţa-între-testarea-de-imagine-şi-testarea-vizuală-de-regresii" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Care este diferenţa între testarea de imagine şi testarea vizuală de regresii?</h3>
<p>Testarea de imagine şi testarea vizuală de regresii sunt două moduri distincte de testare a interfețelor UI, şi ele servesc scopuri diferite. Instrumentele de testare vizuală fac capturi de ecran ale paginilor web şi compară imaginile rezultate pixel cu pixel. Cu testarea de imagine valorile sunt serializate, stocate în fişiere de tip text şi comparate folosind un algoritm de diff. There are different trade-offs to consider and we listed the reasons why snapshot testing was built in the <a href="https://jestjs.io/blog/2016/07/27/jest-14.html#why-snapshot-testing">Jest blog</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="testarea-de-imagine-înlocuiește-testarea-unitară"></a><a href="#testarea-de-imagine-înlocuiește-testarea-unitară" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testarea de imagine înlocuiește testarea unitară?</h3>
<p>Testarea de imagine este doar una dintre cele peste 20 asserțiuni, care sunt livrate cu Jest. Scopul testării de imagine nu este să înlocuiască teste unitare existente, ci să furnizeeze valoare adăugată şi să facă mai ușoară testarea. În unele scenarii, testarea de imagine ar putea elimina nevoia de teste unitare pentru un anumit set de functionalitati (ex. componente React), însă ele pot funcționa la fel de bine împreună.</p>
<h3><a class="anchor" aria-hidden="true" id="care-este-performanţa-testelor-de-imagine-în-ceea-ce-priveşte-viteza-şi-dimensiunea-fişierelor-generate"></a><a href="#care-este-performanţa-testelor-de-imagine-în-ceea-ce-priveşte-viteza-şi-dimensiunea-fişierelor-generate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Care este performanţa testelor de imagine în ceea ce priveşte viteza şi dimensiunea fişierelor generate?</h3>
<p>Jest a fost rescris având performanţa în prim plan, şi testarea de imagine nu face nicio excepţie. Deoarece imaginile sunt stocate în fişiere text, modul acesta de testare este rapid şi de încredere. Jest generează câte un fişier pentru fiecare fişier de test, care invocă metoda <code>toMatchSnapshot</code>. The size of the snapshots is pretty small: For reference, the size of all snapshot files in the Jest codebase itself is less than 300 KB.</p>
<h3><a class="anchor" aria-hidden="true" id="cum-rezolv-conflictele-în-cadrul-fişierelor-de-imagine"></a><a href="#cum-rezolv-conflictele-în-cadrul-fişierelor-de-imagine" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cum rezolv conflictele în cadrul fişierelor de imagine?</h3>
<p>Fişierele imagine trebuie să reprezinte întotdeauna starea actuală a modulelor pe care le acoperă. Prin urmare, dacă sunt fuzionate două ramuri şi întâlnim un conflict în fişierele de imagine, puteţi fie rezolva conflictul manual sau să actualizaţi fişierul imagine prin rularea Jest şi inspectarea rezultatului.</p>
<h3><a class="anchor" aria-hidden="true" id="este-posibil-să-se-aplice-principiile-de-test-driven-development-în-testarea-de-imagine"></a><a href="#este-posibil-să-se-aplice-principiile-de-test-driven-development-în-testarea-de-imagine" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Este posibil să se aplice principiile de test-driven development în testarea de imagine?</h3>
<p>Deşi este posibil să se scrie manual fişierele de imagine, de obicei nu este o metodă abordabilă. Imaginile ne ajută mai degrabă să identificăm daca rezultatul modulelor acoperite de teste s-a schimbat, decât să ne ofere indicii pentru proiectarea codului.</p>
<h3><a class="anchor" aria-hidden="true" id="acoperirea-de-cod-funcționează-cu-testarea-de-imagine"></a><a href="#acoperirea-de-cod-funcționează-cu-testarea-de-imagine" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Acoperirea de cod funcționează cu testarea de imagine?</h3>
<p>Yes, as well as with any other test.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ro/22.x/more-resources"><span class="arrow-prev">← </span><span>More Resources</span></a><a class="docs-next button" href="/docs/ro/22.x/tutorial-async"><span>An Async Example</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#testarea-de-imagine-cu-jest">Testarea de Imagine cu Jest</a><ul class="toc-headings"><li><a href="#actualizarea-imaginilor">Actualizarea imaginilor</a></li><li><a href="#testele-trebuie-să-fie-deterministe">Testele trebuie să fie deterministe</a></li><li><a href="#imaginile-nu-sunt-scrise-automat-de-sistemele-de-integrare-continuă-ci">Imaginile nu sunt scrise automat de sistemele de integrare continuă (CI)</a></li></ul></li><li><a href="#întrebări-frecvente">Întrebări frecvente</a><ul class="toc-headings"><li><a href="#ar-trebui-commit-uite-imaginile-serializate">Ar trebui commit-uite imaginile serializate?</a></li><li><a href="#testarea-de-imagine-funcționeaza-numai-cu-componente-react">Testarea de imagine funcționeaza numai cu componente React?</a></li><li><a href="#care-este-diferenţa-între-testarea-de-imagine-şi-testarea-vizuală-de-regresii">Care este diferenţa între testarea de imagine şi testarea vizuală de regresii?</a></li><li><a href="#testarea-de-imagine-înlocuiește-testarea-unitară">Testarea de imagine înlocuiește testarea unitară?</a></li><li><a href="#care-este-performanţa-testelor-de-imagine-în-ceea-ce-priveşte-viteza-şi-dimensiunea-fişierelor-generate">Care este performanţa testelor de imagine în ceea ce priveşte viteza şi dimensiunea fişierelor generate?</a></li><li><a href="#cum-rezolv-conflictele-în-cadrul-fişierelor-de-imagine">Cum rezolv conflictele în cadrul fişierelor de imagine?</a></li><li><a href="#este-posibil-să-se-aplice-principiile-de-test-driven-development-în-testarea-de-imagine">Este posibil să se aplice principiile de test-driven development în testarea de imagine?</a></li><li><a href="#acoperirea-de-cod-funcționează-cu-testarea-de-imagine">Acoperirea de cod funcționează cu testarea de imagine?</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/ro/getting-started.html">Getting Started</a><a href="/docs/ro/snapshot-testing.html">Guides</a><a href="/docs/ro/api.html">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://www.reactiflux.com/">Reactiflux</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:ro","version:22.x"]}
              });
            </script></body></html>