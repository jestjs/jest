<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>The Jest Object · Jest</title><meta name="viewport" content="width=device-width"/><meta property="og:title" content="The Jest Object · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Об’єкт `jest` автоматично додається в область видимості кожного файла з тестами. Методи, доступні в цому об’єкті, допомагають створювати імітації і дозволяють контролювати загальну поведінку Jest."/><meta name="robots" content="noindex"/><meta property="og:image" content="/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="/jest/css/main.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/> <link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/jest/js/webplayer.js"></script><script type="text/javascript" src="https://snack.expo.io/embed.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/uk/getting-started.html" target="_self">Документація</a></li><li><a href="/jest/docs/uk/api.html" target="_self">API</a></li><li><a href="/jest/uk/help.html" target="_self">Допомога</a></li><li><a href="/jest/blog" target="_self">Блог</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>Українська</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>API Reference</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/uk/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/uk/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/uk/jest-object.html#content">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Framework Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/uk/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/testing-frameworks.html#content">Testing Web Frameworks</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/uk/snapshot-testing.html#content">Тестування з допомогою знімків</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/webpack.html#content">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/uk/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/uk" target="_blank">Translate this Doc</a><h1>The Jest Object</h1></header><article><div><p>Об’єкт <code>jest</code> автоматично додається в область видимості кожного файла з тестами. Методи, доступні в цому об’єкті, допомагають створювати імітації і дозволяють контролювати загальну поведінку Jest.</p><h2><a class="anchor" name=""></a>Методи <a class="hash-link" href="#">#</a></h2><ul><li><a href="#jestclearalltimers" target=""><code>jest.clearAllTimers()</code></a></li><li><a href="#jestdisableautomock" target=""><code>jest.disableAutomock()</code></a></li><li><a href="#jestenableautomock" target=""><code>jest.enableAutomock()</code></a></li><li><a href="#jestfnimplementation" target=""><code>jest.fn(implementation)</code></a></li><li><a href="#jestismockfunctionfn" target=""><code>jest.isMockFunction(fn)</code></a></li><li><a href="#jestgenmockfrommodulemodulename" target=""><code>jest.genMockFromModule(moduleName)</code></a></li><li><a href="#jestmockmodulename-factory-options" target=""><code>jest.mock(moduleName, factory, options)</code></a></li><li><a href="#jestunmockmodulename" target=""><code>jest.unmock(moduleName)</code></a></li><li><a href="#jestdomockmodulename-factory-options" target=""><code>jest.doMock(moduleName, factory, options)</code></a></li><li><a href="#jestdontmockmodulename" target=""><code>jest.dontMock(moduleName)</code></a></li><li><a href="#jestclearallmocks" target=""><code>jest.clearAllMocks()</code></a></li><li><a href="#jestresetallmocks" target=""><code>jest.resetAllMocks()</code></a></li><li><a href="#jestrestoreallmocks" target=""><code>jest.restoreAllMocks()</code></a></li><li><a href="#jestresetmodules" target=""><code>jest.resetModules()</code></a></li><li><a href="#jestrunallticks" target=""><code>jest.runAllTicks()</code></a></li><li><a href="#jestrunalltimers" target=""><code>jest.runAllTimers()</code></a></li><li><a href="#jestruntimerstotimemstorun" target=""><code>jest.runTimersToTime(msToRun)</code></a></li><li><a href="#jestrunonlypendingtimers" target=""><code>jest.runOnlyPendingTimers()</code></a></li><li><a href="#jestsetmockmodulename-moduleexports" target=""><code>jest.setMock(moduleName, moduleExports)</code></a></li><li><a href="#jestsettimeouttimeout" target=""><code>jest.setTimeout(timeout)</code></a></li><li><a href="#jestusefaketimers" target=""><code>jest.useFakeTimers()</code></a></li><li><a href="#jestuserealtimers" target=""><code>jest.useRealTimers()</code></a></li><li><a href="#jestspyonobject-methodname" target=""><code>jest.spyOn(object, methodName)</code></a></li></ul><hr/><h2><a class="anchor" name=""></a>Довідка <a class="hash-link" href="#">#</a></h2><h3><a class="anchor" name="jestclearalltimers"></a><code>jest.clearAllTimers()</code> <a class="hash-link" href="#jestclearalltimers">#</a></h3><p>Видаляє всі заплановані таймери.</p><p>Це означає, що якщо були заплановані будь-які таймери (але вони ще не бли виконані), то вони будуть очищені і не будуть виконані в майбутньому.</p><h3><a class="anchor" name="jestdisableautomock"></a><code>jest.disableAutomock()</code> <a class="hash-link" href="#jestdisableautomock">#</a></h3><p>Вимикає автоматичну генерацію імітацій в завантажувачі модулів.</p><p>Після того, як буде викликаний цей метод, всі виклики <code>require()</code> будуть повертати реальні версії модулів (замість їх імітацій).</p><p>Зазвичай це буває корисно, коли у вас є сценарій, в якому кількість залежностей, для яких потрібно створити імітації, значно менша, ніж тих, для яких імітації не потрібні. Наприклад, якщо ви пишете тест для модуля, який використовує велику кількість залежностей, що можуть бути класифіковані як &quot;деталі реалізації&quot; модуля, тоді вам, схоже, не потрібно створювати імітації для них усіх.</p><p>Приклади залежностей, які можуть бути розцінені як &quot;деталі реалізації&quot;, починаються з вбудованих методів мови (такі як методи Array.prototype) і закінчуються дуже поширеними допоміжними методами (наприклад underscore/lo-dash) чи, навіть, цілими бібліотеками типу React.js.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><p><em>Примітка: цей метод раніше називався <code>autoMockOff</code>. Коли ви використовуєте <code>babel-jest</code>, виклики <code>disableAutomock</code> будуть автоматично спливати до початку блоку коду. Використовуйте <code>autoMockOff</code>, якщо ви хочете явно заборонити таку поведінку.</em></p><h3><a class="anchor" name="jestenableautomock"></a><code>jest.enableAutomock()</code> <a class="hash-link" href="#jestenableautomock">#</a></h3><p>Вмикає автоматичну генерацію імітацій в завантажувачі модулів.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><p><em>Примітка: цей метод раніше називався <code>autoMockOn</code>. Коли ви використовуєте <code>babel-jest</code>, виклики <code>enableAutomock</code> будуть автоматично спливати до початку блоку коду. Використовуйте <code>autoMockOn</code>, якщо ви хочете явно заборонити таку поведінку.</em></p><h3><a class="anchor" name="jestfnimplementation"></a><code>jest.fn(implementation)</code> <a class="hash-link" href="#jestfnimplementation">#</a></h3><p>Returns a new, unused <a href="MockFunctionAPI.html" target="_blank">mock function</a>. Optionally takes a mock implementation.</p><pre class="prism language-js">  <span class="token keyword">const</span> mockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">mockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span spellcheck="true" class="token comment">// з використанням моків:</span>
  <span class="token keyword">const</span> returnsTrue <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">returnsTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// true;</span></pre><h3><a class="anchor" name="jestismockfunctionfn"></a><code>jest.isMockFunction(fn)</code> <a class="hash-link" href="#jestismockfunctionfn">#</a></h3><p>Визначає, чи задана функція є імітацією.</p><h3><a class="anchor" name="jestgenmockfrommodulemodulename"></a><code>jest.genMockFromModule(moduleName)</code> <a class="hash-link" href="#jestgenmockfrommodulemodulename">#</a></h3><p>На основі заданого модуля, використовує систему автоматичного створення імітацій для створення імітації модуля.</p><p>This is useful when you want to create a <a href="/jest/docs/uk/manual-mocks.html" target="">manual mock</a> that extends the automatic mock&#x27;s behavior.</p><h3><a class="anchor" name="jestmockmodulename-factory-options"></a><code>jest.mock(moduleName, factory, options)</code> <a class="hash-link" href="#jestmockmodulename-factory-options">#</a></h3><p>Створює імітацію модуля, коли він буде підключений. <code>factory</code> і <code>options</code> опціональні. Наприклад:</p><pre class="prism language-js"><span spellcheck="true" class="token comment">// banana.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#x27;banana&#x27;</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// __tests__/test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../banana&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> banana <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../banana&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// banana will be explicitly mocked.</span>

<span class="token function">banana</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// will return &#x27;undefined&#x27; because the function is auto-mocked.</span></pre><p>Другий параметр може бути використаний щоб явно вказати фабричний метод модуля, який буде виконано замість автоматичного створення імітації:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// This runs the function specified as second argument to `jest.mock`.</span>
<span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// Will return &#x27;42&#x27;;</span></pre><p>Третій параметр можу бути використаний для створення віртуальних імітацій - таких, які не існують ніде в системі:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">/*
   * Custom implementation of a module that doesn&#x27;t exist in JS,
   * like a generated module or a native module in react-native.
   */</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>virtual<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p><em>Попередження: імпорт модуля в файл налаштування (вказаний в <code>setupTestFrameworkScriptFile</code>) буде перешкоджати створення імітації для нього, як і для всіх модулів, які він імпортує.</em></p><p>Модулі, для яких створені імітації з допомогою <code>jest.mock</code> є імітаціями тільки в межах файлу, в якому було викликано <code>jest.mock</code>. Інший файл, який імпортує цей модуль, отримає оригінальну реалізацію навіть, якщо він буде виконаний після файлу, в якому створюється імітація.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestunmockmodulename"></a><code>jest.unmock(moduleName)</code> <a class="hash-link" href="#jestunmockmodulename">#</a></h3><p>Вказує системі модулів більше не повертати імітацію конкретного модуля з <code>require()</code> (має повертатися оригінальна версія модуля).</p><p>Найпоширеніше використання цього API - вказання модуля, який даний тест повинен протестувати (а отже для цього модуля не повивнна бути створена імітація).</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestdomockmodulename-factory-options"></a><code>jest.doMock(moduleName, factory, options)</code> <a class="hash-link" href="#jestdomockmodulename-factory-options">#</a></h3><p>Примітка: використовуючи <code>babel-jest</code>, виклики <code>mock</code> будуть автоматично спливати до початку блоку коду. Використовуйте цей метод якщо ви явно хочете уникати накої поведінки.</p><p>Це може бути корисно, коли ви хочете по-різному імітувати модуль в межах одного і того ж файла з тестами:</p><pre class="prism language-js"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;moduleName 1&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">doMock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;moduleName 2&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">doMock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestdontmockmodulename"></a><code>jest.dontMock(moduleName)</code> <a class="hash-link" href="#jestdontmockmodulename">#</a></h3><p>Примітка: використовуючи <code>babel-jest</code>, виклики <code>unmock</code> будуть автоматично спливати до початку блоку коду. Використовуйте цей метод якщо ви явно хочете уникати накої поведінки.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestclearallmocks"></a><code>jest.clearAllMocks()</code> <a class="hash-link" href="#jestclearallmocks">#</a></h3><p>Очищує властивості <code>mock.calls</code> і <code>mock.instances</code> всії імітацій. Еквівалентно виклику <code>.mockClear()</code> для кожної функції-імітації.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestresetallmocks"></a><code>jest.resetAllMocks()</code> <a class="hash-link" href="#jestresetallmocks">#</a></h3><p>Скидає стан всіх імітацій. Еквівалентно виклику <code>.mockReset()</code> для кожної функції-імітації.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestrestoreallmocks"></a><code>jest.restoreAllMocks()</code> <a class="hash-link" href="#jestrestoreallmocks">#</a></h3><h5><a class="anchor" name="available-in-jest-2110"></a>available in Jest <strong>21.1.0+</strong> <a class="hash-link" href="#available-in-jest-2110">#</a></h5><p>Скидає всі імітації до їх оригінальних значень. Еквівалентно виклику <code>.mockRestore</code> для кожної імітованої функції. Майте на увазі, що <code>jest.restoreAllMocks()</code> працює лише тоді, коли імітаії були створені з допомогою h <code>jest.spyOn</code>; значення усіх інших імітацій потрібно буде відновлювати вручну.</p><h3><a class="anchor" name="jestresetmodules"></a><code>jest.resetModules()</code> <a class="hash-link" href="#jestresetmodules">#</a></h3><p>Скидає стан реєстру модулів - кешу всіх імпортованих модулів. Це корисно для ізоляції модулів, в яких локальний стан мжу конфліктувати між тестами.</p><p>Приклад:</p><pre class="prism language-js"><span class="token keyword">const</span> sum1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sum1 <span class="token operator">===</span> sum2<span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; false (sum1 і sum2 є різними екземплярами модуля &quot;sum&quot;.)</span></pre><p>Приклад в тесті:</p><pre class="prism language-js"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;works&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;works too&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span spellcheck="true" class="token comment">// змінна sum – це інша копія модуля &quot;sum&quot; у порівнянні з попереднім тестом.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestrunallticks"></a><code>jest.runAllTicks()</code> <a class="hash-link" href="#jestrunallticks">#</a></h3><p>Виконує всі <strong>мікрозавдання</strong> в черзі (зазвичай створені в Node з допомогою <code>process.nextTick</code>).</p><p>Коли викликається цей метод, всі мікрозавдання, заплановані через <code>process.nextTick</code> будуть виконані. Додатково, якщо ці мікрозавдання самі планують нові мікрозавдання, вони теж будуть постійно виконуватися поки в черзі не залишиться жодного мікрозавдання.</p><h3><a class="anchor" name="jestrunalltimers"></a><code>jest.runAllTimers()</code> <a class="hash-link" href="#jestrunalltimers">#</a></h3><p>Виконує всі <strong>макрозавдання</strong> в черзі (заплановані, використовуючи <code>setTimeout()</code>, <code>setInterval()</code> та <code>setImmediate()</code>).</p><p>Коли викилкається цей метод, всі макрозавданя, заплановані через <code>setTimeout()</code> чи <code>setInterval()</code>, будуть виконані. Додатково, якщо ці макроавдання самі планують нові макроавдання, вони теж будуть постійно виконуватися поки в черзі не залишиться жодного макроавдання.</p><p>Це часто буває корисно для синхронного виконання setTimeout’ів впродовж тесту для синхронної перевіки якоїсь поведінки, яка відбувається лише після виконання зворотніх викликів в <code>setTimeout()</code> або <code>setInterval()</code>. See the <a href="/jest/docs/uk/timer-mocks.html" target="">Timer mocks</a> doc for more information.</p><h3><a class="anchor" name="jestrunallimmediates"></a><code>jest.runAllImmediates()</code> <a class="hash-link" href="#jestrunallimmediates">#</a></h3><p>Виконує всі завдання, заплановані з використанням <code>setImmediate()</code>.</p><h3><a class="anchor" name="jestruntimerstotimemstorun"></a><code>jest.runTimersToTime(msToRun)</code> <a class="hash-link" href="#jestruntimerstotimemstorun">#</a></h3><p>Виконує лише макрозавдання з черги (заплановані, використовуючи <code>setTimeout()</code>, <code>setInterval()</code> та <code>setImmediate()</code>).</p><p>Коли викилкається цей метод, всі макрозавданя, заплановані з використанням <code>setTimeout()</code> чи <code>setInterval()</code> впродовж <code>msToRun</code> мілісекунд, будуть виконані. Крім того якщо ці макрозавдання запланують нові, які мають виконатися в межах того ж часового проміжку, вони теж будуть виконані допоки в черзі не залишиться завдань, що мають бути виконані впродовж <code>msToRun</code> мілісекунд.</p><h3><a class="anchor" name="jestrunonlypendingtimers"></a><code>jest.runOnlyPendingTimers()</code> <a class="hash-link" href="#jestrunonlypendingtimers">#</a></h3><p>Виконує лише ті макрозавдання, які в даний час заплановані (тобто лише завдання, які були поставлені в чергу за допомогою <code>setTimeout()</code> чи <code>setInterval()</code> до цього моменту). Якщо будь яке з запланованих макрозавдань запланує нове макрозавдання, ті нові завдання не будуть виконані цим викликом.</p><p>Це корисно для сценаріїв, коли модуль, що тестується, викликає <code>setTimeout()</code>, зворотній виклик якого рекурсивно викликає інший <code>setTimeout()</code> (що означає, що послідовність таймаутів ніколи не припинеться). У таких сценаріях корисно мати можливість рухатися вперед в часі на один крок за раз.</p><h3><a class="anchor" name="jestsetmockmodulename-moduleexports"></a><code>jest.setMock(moduleName, moduleExports)</code> <a class="hash-link" href="#jestsetmockmodulename-moduleexports">#</a></h3><p>Явно вказує об’єкт-імітацію, який має повернути система модулів для вказаного модуля.</p><p>Іноді бувають випадки, коли автоматично згенерована імітація, яку вам надає система модулів, недостатньо підходить для ваших тестових потреб. Normally under those circumstances you should write a <a href="/jest/docs/uk/manual-mocks.html" target="">manual mock</a> that is more adequate for the module in question. Однак в екстремально рідкісних випадках навіть ручний мок не підходить для ваших цілей і вам потрібно створити імітацію всередині вашого тесту.</p><p>В таких рідкісних сценаріях ви можете використати цей API, щоб в ручну заповнити слот в реєстрі імітацій системи модулів.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><p><em>Примітка. Рекомендується використовувати <a href="#jestmockmodulename-factory-options" target=""><code>jest.mock()</code></a> замість цього метода. Другий аргумент <code>jest.mock</code> - це функція, яка повертає імітацію замість очікуваного об’єкта модуля.</em></p><h3><a class="anchor" name="jestsettimeouttimeout"></a><code>jest.setTimeout(timeout)</code> <a class="hash-link" href="#jestsettimeouttimeout">#</a></h3><p>Встановлює таймаут за замовчуванням для тестів і before/after хуків в мілісекундах.</p><p><em>Примітка. За замовчуванням таймаут становить 5 секунд, якщо цей метод не був викликаний.</em></p><p>Приклад:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// 1 секунда</span></pre><h3><a class="anchor" name="jestusefaketimers"></a><code>jest.useFakeTimers()</code> <a class="hash-link" href="#jestusefaketimers">#</a></h3><p>Вказує Jest використовувати імітовані версії стандартних функцій таймерів (<code>setTimeout</code>, <code>setInterval</code>, <code>clearTimeout</code>, <code>clearInterval</code>, <code>nextTick</code>, <code>setImmediate</code> та <code>clearImmediate</code>).</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestuserealtimers"></a><code>jest.useRealTimers()</code> <a class="hash-link" href="#jestuserealtimers">#</a></h3><p>Вказує Jest використовувати реальні версії стандартних функцій таймерів.</p><p>Повертає об’єкт <code>jest</code> для створення ланцюжків викликів.</p><h3><a class="anchor" name="jestspyonobject-methodname"></a><code>jest.spyOn(object, methodName)</code> <a class="hash-link" href="#jestspyonobject-methodname">#</a></h3><h5><a class="anchor" name="jest-1900"></a>доступно в Jest <strong>19.0.0+</strong> <a class="hash-link" href="#jest-1900">#</a></h5><p>Створює імітацію функції, як і <code>jest.fn</code>, але також відслідковує виклики <code>object[methodName]</code>. Повертає функцію-імітацію Jest.</p><p><em>Примітка: За замовчуванням, <code>jest.spyOn</code> також викликає метод <strong>за яким спостерігає</strong>. Це відміна поведінка у порівнянні з більшістю інших тестових бібліотек. Якщо ви очете переписати оригінальну функцію, ви можете використати <code>jest.spyOn(object, methodName).mockImplementation(() =&gt; customImplementation)</code> або <code>object[methodName] = jest.fn(() =&gt; customImplementation);</code></em></p><p>Приклад:</p><pre class="prism language-js"><span class="token keyword">const</span> video <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> video<span class="token punctuation">;</span></pre><p>Приклад тесту:</p><pre class="prism language-js"><span class="token keyword">const</span> video <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./video&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;plays video&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> <span class="token string">&#x27;play&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isPlaying <span class="token operator">=</span> video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>isPlaying<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  spy<span class="token punctuation">.</span><span class="token function">mockReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  spy<span class="token punctuation">.</span><span class="token function">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="mock-function-api.html#content">← Назад</a><a class="docs-next button" href="configuration.html#content">Далі →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/uk/getting-started.html">Getting Started</a><a href="/jest/docs/uk/snapshot-testing.html">Guides</a><a href="/jest/docs/uk/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/uk/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>