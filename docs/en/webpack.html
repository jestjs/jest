<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Using With Webpack · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Using With Webpack · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="Jest can be used in projects that use [webpack](https://webpack.github.io/) to manage assets, styles, and compilation. webpack _does_ offer some unique challenges over other tools because it integrates directly with your application to allow managing stylesheets, assets like images and fonts, along with the expansive ecosystem of compile-to-JavaScript languages and tools."><link rel="apple-touch-icon" sizes="180x180" href="/jest/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/jest/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/jest/img/favicon/favicon-16x16.png"><link rel="manifest" href="/jest/img/favicon/manifest.json"><link rel="mask-icon" href="/jest/img/favicon/safari-pinned-tab.svg"><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"><meta name="msapplication-config" content="/jest/img/favicon/browserconfig.xml"><meta name="theme-color" content="#99424f"><link rel="alternate" type="application/atom+xml" href="/jest/blog/atom.xml" title="Jest Blog ATOM Feed"><link rel="alternate" type="application/rss+xml" href="/jest/blog/feed.xml" title="Jest Blog RSS Feed"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css?v=2"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/en/getting-started.html" class="active">Docs</a></li><li><a href="/jest/docs/en/api.html" class="">API</a></li><li><a href="/jest/en/help.html" class="">Help</a></li><li><a href="/jest/blog/" class="">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg">English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/en/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/en/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/jest-object.html#content">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/en/snapshot-testing.html#content">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/en/webpack.html#content">Using With Webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/testing-frameworks.html#content">Testing Other Frameworks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/en/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/en/Webpack.md" target="_blank">Edit this Doc</a><h1>Using With Webpack</h1></header><article><div><p>Jest can be used in projects that use <a href="https://webpack.github.io/" target="_blank">webpack</a> to manage assets, styles, and compilation. webpack <em>does</em> offer some unique challenges over other tools because it integrates directly with your application to allow managing stylesheets, assets like images and fonts, along with the expansive ecosystem of compile-to-JavaScript languages and tools.</p><h2><a class="anchor" name="a-webpack-example"></a>A webpack example <a class="hash-link" href="#a-webpack-example">#</a></h2><p>Let&#x27;s start with a common sort of webpack config file and translate it to a Jest setup.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">&#x27;babel&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;style-loader!css-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;url-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.gif$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;file-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.(ttf|eot|svg)$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      config$<span class="token punctuation">:</span> <span class="token string">&#x27;./configs/app-config.js&#x27;</span><span class="token punctuation">,</span>
      react<span class="token punctuation">:</span> <span class="token string">&#x27;./vendor/react-master&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">,</span> 
      <span class="token string">&#x27;bower_components&#x27;</span><span class="token punctuation">,</span> 
      <span class="token string">&#x27;shared&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/shared/vendor/modules&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p>If you have JavaScript files that are transformed by Babel, you can <a href="/jest/docs/getting-started.html#using-babel-with-jest" target="">enable support for Babel</a> by installing the <code>babel-jest</code> plugin. Non-Babel JavaScript transformations can be handled with Jest&#x27;s <a href="/jest/docs/configuration.html#transform-object-string-string" target=""><code>transform</code></a> config option.</p><h3><a class="anchor" name="handling-static-assets"></a>Handling Static Assets <a class="hash-link" href="#handling-static-assets">#</a></h3><p>Next, let&#x27;s configure Jest to gracefully handle asset files such as stylesheets and images. Usually, these files aren&#x27;t particularly useful in tests so we can safely mock them out. However, if you are using CSS Modules then it&#x27;s better to mock a proxy for your className lookups.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>And the mock files themselves:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __mocks__/styleMock.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __mocks__/fileMock.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&#x27;test-file-stub&#x27;</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="mocking-css-modules"></a>Mocking CSS Modules <a class="hash-link" href="#mocking-css-modules">#</a></h3><p>You can use an <a href="https://github.com/keyanzhang/identity-obj-proxy" target="_blank">ES6 Proxy</a> to mock <a href="https://github.com/css-modules/css-modules" target="_blank">CSS Modules</a>:</p><pre class="prism language-javascript">
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev identity<span class="token operator">-</span>obj<span class="token operator">-</span>proxy</pre><p>Then all your className lookups on the styles object will be returned as-is (e.g., <code>styles.foobar === &#x27;foobar&#x27;</code>). This is pretty handy for React <a href="/jest/docs/snapshot-testing.html" target="">Snapshot Testing</a>.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json (for CSS Modules)</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;identity-obj-proxy&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Notice that Proxy is enabled in Node 6 by default. If you are not on Node 6 yet, make sure you invoke Jest using <code>node --harmony_proxies node_modules/.bin/jest</code>.</p></blockquote><p>If <code>moduleNameMapper</code> cannot fulfill your requirements, you can use Jest&#x27;s
<a href="/jest/docs/configuration.html#transform-object-string-string" target=""><code>transform</code></a>
config option to specify how assets are transformed. For example, a transformer that
returns the basename of a file
(such that <code>require(&#x27;logo.jpg&#x27;);</code> returns <code>&#x27;logo&#x27;</code>) can be written as:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// fileTransformer.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">process</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> config<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#x27;module.exports = &#x27;</span> <span class="token operator">+</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#x27;;&#x27;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json (for custom transformers and CSS Modules)</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;identity-obj-proxy&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;transform&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/fileTransformer.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>We&#x27;ve told Jest to ignore files matching a stylesheet or image extension, and instead, require our mock files. You can adjust the regular expression to match the file types your webpack config handles.</p><p><em>Note: if you are using babel-jest with additional code preprocessors, you have to explicitly define babel-jest as a transformer for your JavaScript code to map <code>.js</code> files to the babel-jest module.</em></p><pre class="prism language-javascript">
<span class="token string">&quot;transform&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;^.+\\.js$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;babel-jest&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;^.+\\.css$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;custom-transformer&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></pre><h3><a class="anchor" name="configuring-jest-to-find-our-files"></a>Configuring Jest to find our files <a class="hash-link" href="#configuring-jest-to-find-our-files">#</a></h3><p>Now that Jest knows how to process our files, we need to tell it how to <em>find</em> them. For webpack&#x27;s <code>modulesDirectories</code>, and <code>extensions</code> options there are direct analogs in Jest&#x27;s <code>moduleDirectories</code> and <code>moduleFileExtensions</code> options.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Note: &lt;rootDir&gt; is a special token that gets replaced by Jest with the root of your project. Most of the time this will be the folder where your package.json is located unless you specify a custom <code>rootDir</code> option in your configuration.</p></blockquote><p>Similarly webpack&#x27;s <code>resolve.root</code> option functions like setting the <code>NODE_PATH</code> env variable, which you can set, or make use of the <code>modulePaths</code> option.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;modulePaths&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;/shared/vendor/modules&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>And finally we just have the webpack <code>alias</code> left to handle. For that we can make use of the <code>moduleNameMapper</code> option again.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;modulePaths&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;/shared/vendor/modules&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;^react(.*)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/vendor/react-master$1&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^config$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/configs/app-config.js&quot;</span><span class="token punctuation">,</span>

      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>That&#x27;s it! webpack is a complex and flexible tool, so you may have to make some adjustments to handle your specific application&#x27;s needs. Luckily for most projects, Jest should be more than flexible enough to handle your webpack config.</p><blockquote><p>Note: For more complex webpack configurations, you may also want to investigate projects such as: <a href="https://github.com/istarkov/babel-plugin-webpack-loaders" target="_blank">babel-plugin-webpack-loaders</a>.</p></blockquote><h2><a class="anchor" name="using-with-webpack-2"></a>Using with webpack 2 <a class="hash-link" href="#using-with-webpack-2">#</a></h2><p>webpack 2 offers native support for ES modules. However, Jest runs in Node, and
thus requires ES modules to be transpiled to CommonJS modules. As such, if you
are using webpack 2, you most likely will want to configure Babel to transpile
ES modules to CommonJS modules only in the <code>test</code> environment.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;modules&quot;</span><span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;env&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-es2015-modules-commonjs&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Note: Jest caches files to speed up test execution. If you updated .babelrc and Jest is still not working, try running Jest with <code>--no-cache</code>.</p></blockquote><p>If you use dynamic imports (<code>import(&#x27;some-file.js&#x27;).then(module =&gt; ...)</code>), you
need to enable the <code>dynamic-import-node</code> plugin.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;modules&quot;</span><span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;syntax-dynamic-import&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;env&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>For an example of how to use Jest with Webpack with React, Redux, and Node, you can view one <a href="https://github.com/jenniferkaplannyc/jest_react_redux_node_webpack_complex_example" target="_blank">here</a>.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="manual-mocks.html#content">← Previous</a><a class="docs-next button" href="migration-guide.html#content">Continue Reading →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"></a><div><h5>Docs</h5><a href="/jest/docs/en/getting-started.html">Getting Started</a><a href="/jest/docs/en/snapshot-testing.html">Guides</a><a href="/jest/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>