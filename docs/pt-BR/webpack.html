<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Usando Com Webpack · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Usando Com Webpack · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="Jest pode ser usado em projetos que usam [webpack](https://webpack.github.io/) para gerenciar assets, estilos e compilação. webpack *de fato* oferece alguns desafios únicos sobre outras ferramentas, pois integra-se diretamente com sua aplicação para permitir o gerenciamento de estilos, assets como imagens e fontes, juntamente com o ecossistema expansivo de ferramentas e linguagens para ser compiladas em JavaScript."><link rel="apple-touch-icon" sizes="180x180" href="/jest/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/jest/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/jest/img/favicon/favicon-16x16.png"><link rel="manifest" href="/jest/img/favicon/manifest.json"><link rel="mask-icon" href="/jest/img/favicon/safari-pinned-tab.svg"><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"><meta name="msapplication-config" content="/jest/img/favicon/browserconfig.xml"><meta name="theme-color" content="#99424f"><link rel="alternate" type="application/atom+xml" href="/jest/blog/atom.xml" title="Jest Blog ATOM Feed"><link rel="alternate" type="application/rss+xml" href="/jest/blog/feed.xml" title="Jest Blog RSS Feed"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css?v=2"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/pt-BR/getting-started.html" class="active">Documentação</a></li><li><a href="/jest/docs/pt-BR/api.html" class="">API</a></li><li><a href="/jest/pt-BR/help.html" class="">Ajuda</a></li><li><a href="/jest/blog/" class="">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg">Português (Brasil)</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/en">English</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/jest-object.html#content">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/snapshot-testing.html#content">Teste de Snapshot</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/pt-BR/webpack.html#content">Usando Com Webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/testing-frameworks.html#content">Testando Outros Frameworks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/pt-BR" target="_blank">Translate this Doc</a><h1>Usando Com Webpack</h1></header><article><div><p>Jest pode ser usado em projetos que usam <a href="https://webpack.github.io/" target="_blank">webpack</a> para gerenciar assets, estilos e compilação. webpack <em>de fato</em> oferece alguns desafios únicos sobre outras ferramentas, pois integra-se diretamente com sua aplicação para permitir o gerenciamento de estilos, assets como imagens e fontes, juntamente com o ecossistema expansivo de ferramentas e linguagens para ser compiladas em JavaScript.</p><h2><a class="anchor" name="um-exemplo-de-webpack"></a>Um exemplo de webpack <a class="hash-link" href="#um-exemplo-de-webpack">#</a></h2><p>Vamos começar com um tipo comum de arquivo de configuração webpack e traduzi-lo para uma instalação de Jest.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">&#x27;babel&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;style-loader!css-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;url-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.gif$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>loader<span class="token punctuation">:</span> <span class="token string">&#x27;file-loader&#x27;</span><span class="token punctuation">,</span> test<span class="token punctuation">:</span> <span class="token regex">/\.(ttf|eot|svg)$/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      config$<span class="token punctuation">:</span> <span class="token string">&#x27;./configs/app-config.js&#x27;</span><span class="token punctuation">,</span>
      react<span class="token punctuation">:</span> <span class="token string">&#x27;./vendor/react-master&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">,</span> 
      <span class="token string">&#x27;bower_components&#x27;</span><span class="token punctuation">,</span> 
      <span class="token string">&#x27;shared&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/shared/vendor/modules&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p>Se você tem arquivos de JavaScript que são transformados pelo Babel, você pode <a href="/jest/docs/getting-started.html#using-babel-with-jest" target=""> habilitar o suporte para Babel</a> ao instalar o plugin <code>babel-jest</code>. Transformações JavaScript sem Babel podem ser tratadas com a opção de configuração <a href="/jest/docs/configuration.html#transform-object-string-string" target=""> <code>transform</code></a> do Jest.</p><h3><a class="anchor" name="manipulac-o-de-assets-estaticos"></a>Manipulação de assets estáticos <a class="hash-link" href="#manipulac-o-de-assets-estaticos">#</a></h3><p>Em seguida, vamos configurar o Jest para manipular elegantemente arquivos de assets, tais como folhas de estilo e imagens. Normalmente, esses arquivos não são particularmente úteis em testes, por isso podemos com segurança fazer a simulação (mock, em inglês) deles. No entanto, se você estiver usando CSS Modules é melhor simular (mock, em inglês) de um proxy para suas pesquisas className.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>E os próprios arquivos de simulação (mock, em inglês):</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __mocks__/styleMock.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __mocks__/fileMock.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&#x27;test-file-stub&#x27;</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="simulando-css-modules"></a>Simulando CSS Modules <a class="hash-link" href="#simulando-css-modules">#</a></h3><p>Você pode usar um <a href="https://github.com/keyanzhang/identity-obj-proxy" target="_blank">Proxy ES6</a> para simular (mock, em inglês) <a href="https://github.com/css-modules/css-modules" target="_blank">CSS Modules</a>:</p><pre class="prism language-javascript">
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev identity<span class="token operator">-</span>obj<span class="token operator">-</span>proxy</pre><p>Em seguida, todas as suas pesquisas className no objeto de estilos serão retornadas como são (por exemplo, <code>styles.foobar = = = &#x27;foobar&#x27;</code>). Isto é muito útil para <a href="/jest/docs/snapshot-testing.html" target="">Teste de Snapshot</a> em React.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json (for CSS Modules)</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;identity-obj-proxy&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Observe que o Proxy está habilitado no Node 6 por padrão. Se você ainda não está no Node 6, certifique-se de invocar Jest usando <code>node --harmony_proxies node_modules/.bin/jest</code>.</p></blockquote><p>Se <code>moduleNameMapper</code> não pode mais cumprir suas exigências, você pode usar a opção de configuração do Jest <a href="/jest/docs/configuration.html#transform-object-string-string" target=""> <code>transform</code></a> para especificar como os assets são transformados. Por exemplo, um transformador que retorna o nome base de um arquivo (tal que <code>require(&#x27;logo.jpg&#x27;);</code> retorna <code>&#x27;logo&#x27;</code>) pode ser escrito como:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// fileTransformer.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">process</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> config<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#x27;module.exports = &#x27;</span> <span class="token operator">+</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#x27;;&#x27;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json (for custom transformers and CSS Modules)</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;identity-obj-proxy&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;transform&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/fileTransformer.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>Nós dissemos para Jest ignorar arquivos que correspondam a uma folha de estilo ou extensão de imagem, e em vez disso, exigem nossos arquivos de simulação (mock, em inglês). Você pode ajustar a expressão regular para coincidir com os tipos de arquivo que sua configuração do webpack lida.</p><p><em>Nota: se você estiver usando babel-jest com pre-processadores adicionais de código, você precisa definir explicitamente babel-jest como um transformador para o seu código JavaScript mapear arquivos <code>. js</code> para o módulo de babel-jest.</em></p><pre class="prism language-javascript">
<span class="token string">&quot;transform&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;^.+\\.js$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;babel-jest&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;^.+\\.css$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;custom-transformer&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></pre><h3><a class="anchor" name="configurando-jest-para-encontrar-nossos-arquivos"></a>Configurando Jest para encontrar nossos arquivos <a class="hash-link" href="#configurando-jest-para-encontrar-nossos-arquivos">#</a></h3><p>Agora que Jest sabe como processar nossos arquivos, precisamos informá-lo como <em>encontrar</em> eles. Para o <code>modulesDirectories</code> e as opções de <code>extensões</code> do webpack existem análogos diretos do Jest <code>moduleDirectories</code> e opções <code>moduleFileExtensions</code>.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Nota: &lt;rootdir&gt; é um símbolo especial que é substituído pelo Jest com a raiz do seu projeto. Na maioria das vezes, este será a pasta onde seu package.json está localizado a menos que você especificar uma opção personalizada <code>rootDir</code> na sua configuração.</p></blockquote><p>Da mesma forma as funções de opção do webpack <code>resolve.root</code> como configuração de variável env de <code>NODE_PATH</code>, que pode ser definido, ou fazer uso da opção <code>modulePaths</code>.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;modulePaths&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;/shared/vendor/modules&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>E finalmente temos o <code>alias</code> do webpack para lidar. Por isso nós podemos fazer uso da opção <code>moduleNameMapper</code> novamente.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;modulePaths&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;/shared/vendor/modules&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleDirectories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bower_components&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;^react(.*)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/vendor/react-master$1&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^config$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/configs/app-config.js&quot;</span><span class="token punctuation">,</span>

      <span class="token string">&quot;\\.(css|less)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/styleMock.js&quot;</span><span class="token punctuation">,</span>    
      <span class="token string">&quot;\\.(gif|ttf|eot|svg)$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/__mocks__/fileMock.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>É isso! webpack é uma ferramenta complexa e flexível, então você pode ter que fazer alguns ajustes para atender às necessidades específicas do seu aplicativo. Felizmente, na maioria dos projetos, Jest deve ser flexível o suficiente para lidar com sua configuração do webpack.</p><blockquote><p>Nota: Para configurações webpack mais complexas, você pode também querer investigar projetos tais como: <a href="https://github.com/istarkov/babel-plugin-webpack-loaders" target="_blank">babel-plugin-webpack-loaders</a>.</p></blockquote><h2><a class="anchor" name="usando-com-webpack-2"></a>Usando com webpack 2 <a class="hash-link" href="#usando-com-webpack-2">#</a></h2><p>webpack 2 oferece suporte nativo para módulos ES. No entanto, Jest é executado no Node e portanto requer que os módulos ES sejam transpilados para módulos CommonJS. Como tal, se você estiver usando webpack 2, você provavelmente vai querer configurar Babel para transpilar módulos ES para módulos CommonJS somente no ambiente de <code>teste</code>.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;modules&quot;</span><span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;env&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-es2015-modules-commonjs&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><blockquote><p>Nota: Jest armazena em cache os arquivos para acelerar a execução do teste. Se você atualizou .babelrc e Jest ainda não está funcionando, tente executar Jest com <code>--no-cache</code>.</p></blockquote><p>Se você usar importações dinâmicas (<code>import(&#x27;some-file.js&#x27;).then(module =&gt; ...)</code>), você precisa ativar o plugin <code>dynamic-import-node</code>.</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;modules&quot;</span><span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;syntax-dynamic-import&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token string">&quot;env&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>For an example of how to use Jest with Webpack with React, Redux, and Node, you can view one <a href="https://github.com/jenniferkaplannyc/jest_react_redux_node_webpack_complex_example" target="_blank">here</a>.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="manual-mocks.html#content">← Anterior</a><a class="docs-next button" href="migration-guide.html#content">Continuar Lendo →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"></a><div><h5>Docs</h5><a href="/jest/docs/pt-BR/getting-started.html">Getting Started</a><a href="/jest/docs/pt-BR/snapshot-testing.html">Guides</a><a href="/jest/docs/pt-BR/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/pt-BR/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>