// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`ScriptTransformer (in sync mode) throws an error if \`process\` isn't defined 1`] = `
"<red><bold>● Invalid synchronous transformer module:</intensity></color>
<red>  "skipped-required-props-preprocessor-only-async" specified in the "transform" object of Jest configuration</color>
<red>  must export a \`process\` function.</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer in async mode, passes expected transform options to getCacheKey 1`] = `
[MockFunction] {
  "calls": Array [
    Array [
      "module.exports = "banana";",
      "/fruits/banana.js",
      Object {
        "cacheFS": Map {
          "/fruits/banana.js" => "module.exports = "banana";",
        },
        "collectCoverage": true,
        "collectCoverageFrom": Array [],
        "config": Object {
          "automock": false,
          "cache": true,
          "cacheDirectory": "/cache/",
          "clearMocks": false,
          "coveragePathIgnorePatterns": Array [],
          "cwd": "/test_root_dir/",
          "detectLeaks": false,
          "detectOpenHandles": false,
          "displayName": undefined,
          "errorOnDeprecated": false,
          "extensionsToTreatAsEsm": Array [],
          "fakeTimers": Object {
            "enableGlobally": false,
          },
          "filter": undefined,
          "forceCoverageMatch": Array [],
          "globalSetup": undefined,
          "globalTeardown": undefined,
          "globals": Object {},
          "haste": Object {},
          "id": "test",
          "injectGlobals": true,
          "moduleDirectories": Array [],
          "moduleFileExtensions": Array [
            "js",
          ],
          "moduleNameMapper": Array [],
          "modulePathIgnorePatterns": Array [],
          "modulePaths": Array [],
          "prettierPath": "prettier",
          "resetMocks": false,
          "resetModules": false,
          "resolver": undefined,
          "restoreMocks": false,
          "rootDir": "/",
          "roots": Array [],
          "runner": "jest-runner",
          "runtime": "/test_module_loader_path",
          "sandboxInjectedGlobals": Array [],
          "setupFiles": Array [],
          "setupFilesAfterEnv": Array [],
          "skipFilter": false,
          "skipNodeResolution": false,
          "slowTestThreshold": 5,
          "snapshotFormat": Object {},
          "snapshotResolver": undefined,
          "snapshotSerializers": Array [],
          "testEnvironment": "node",
          "testEnvironmentOptions": Object {},
          "testLocationInResults": false,
          "testMatch": Array [],
          "testPathIgnorePatterns": Array [],
          "testRegex": Array [
            "\\.test\\.js$",
          ],
          "testRunner": "jest-circus/runner",
          "transform": Array [
            Array [
              "\\.js$",
              "test_preprocessor",
              Object {
                "configKey": "configValue",
              },
            ],
          ],
          "transformIgnorePatterns": Array [
            "/node_modules/",
          ],
          "unmockedModulePathPatterns": undefined,
          "watchPathIgnorePatterns": Array [],
        },
        "configString": "{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_preprocessor",{"configKey":"configValue"}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]}",
        "supportsDynamicImport": false,
        "supportsExportNamespaceFrom": false,
        "supportsStaticESM": false,
        "supportsTopLevelAwait": false,
        "transformerConfig": Object {
          "configKey": "configValue",
        },
      },
    ],
  ],
  "results": Array [
    Object {
      "type": "return",
      "value": "ab",
    },
  ],
}
`;

exports[`ScriptTransformer in async mode, uses the supplied async preprocessor 1`] = `
"const TRANSFORMED = {
  filename: '/fruits/banana.js',
  script: 'module.exports = "banana";',
  config: '{"collectCoverage":false,"collectCoverageFrom":[],"supportsDynamicImport":false,"supportsExportNamespaceFrom":false,"supportsStaticESM":false,"supportsTopLevelAwait":false,"cacheFS":{},"config":{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_async_preprocessor",{}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]},"configString":"{\\"automock\\":false,\\"cache\\":true,\\"cacheDirectory\\":\\"/cache/\\",\\"clearMocks\\":false,\\"coveragePathIgnorePatterns\\":[],\\"cwd\\":\\"/test_root_dir/\\",\\"detectLeaks\\":false,\\"detectOpenHandles\\":false,\\"errorOnDeprecated\\":false,\\"extensionsToTreatAsEsm\\":[],\\"fakeTimers\\":{\\"enableGlobally\\":false},\\"forceCoverageMatch\\":[],\\"globals\\":{},\\"haste\\":{},\\"id\\":\\"test\\",\\"injectGlobals\\":true,\\"moduleDirectories\\":[],\\"moduleFileExtensions\\":[\\"js\\"],\\"moduleNameMapper\\":[],\\"modulePathIgnorePatterns\\":[],\\"modulePaths\\":[],\\"prettierPath\\":\\"prettier\\",\\"resetMocks\\":false,\\"resetModules\\":false,\\"restoreMocks\\":false,\\"rootDir\\":\\"/\\",\\"roots\\":[],\\"runner\\":\\"jest-runner\\",\\"runtime\\":\\"/test_module_loader_path\\",\\"sandboxInjectedGlobals\\":[],\\"setupFiles\\":[],\\"setupFilesAfterEnv\\":[],\\"skipFilter\\":false,\\"skipNodeResolution\\":false,\\"slowTestThreshold\\":5,\\"snapshotFormat\\":{},\\"snapshotSerializers\\":[],\\"testEnvironment\\":\\"node\\",\\"testEnvironmentOptions\\":{},\\"testLocationInResults\\":false,\\"testMatch\\":[],\\"testPathIgnorePatterns\\":[],\\"testRegex\\":[\\"\\\\\\\\.test\\\\\\\\.js$\\"],\\"testRunner\\":\\"jest-circus/runner\\",\\"transform\\":[[\\"\\\\\\\\.js$\\",\\"test_async_preprocessor\\",{}]],\\"transformIgnorePatterns\\":[\\"/node_modules/\\"],\\"watchPathIgnorePatterns\\":[]}","transformerConfig":{}}',
};"
`;

exports[`ScriptTransformer in async mode, uses the supplied async preprocessor 2`] = `"module.exports = "react";"`;

exports[`ScriptTransformer in async mode, uses the supplied preprocessor 1`] = `
"const TRANSFORMED = {
  filename: '/fruits/banana.js',
  script: 'module.exports = "banana";',
  config: '{"collectCoverage":false,"collectCoverageFrom":[],"supportsDynamicImport":false,"supportsExportNamespaceFrom":false,"supportsStaticESM":false,"supportsTopLevelAwait":false,"cacheFS":{},"config":{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_preprocessor",{}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]},"configString":"{\\"automock\\":false,\\"cache\\":true,\\"cacheDirectory\\":\\"/cache/\\",\\"clearMocks\\":false,\\"coveragePathIgnorePatterns\\":[],\\"cwd\\":\\"/test_root_dir/\\",\\"detectLeaks\\":false,\\"detectOpenHandles\\":false,\\"errorOnDeprecated\\":false,\\"extensionsToTreatAsEsm\\":[],\\"fakeTimers\\":{\\"enableGlobally\\":false},\\"forceCoverageMatch\\":[],\\"globals\\":{},\\"haste\\":{},\\"id\\":\\"test\\",\\"injectGlobals\\":true,\\"moduleDirectories\\":[],\\"moduleFileExtensions\\":[\\"js\\"],\\"moduleNameMapper\\":[],\\"modulePathIgnorePatterns\\":[],\\"modulePaths\\":[],\\"prettierPath\\":\\"prettier\\",\\"resetMocks\\":false,\\"resetModules\\":false,\\"restoreMocks\\":false,\\"rootDir\\":\\"/\\",\\"roots\\":[],\\"runner\\":\\"jest-runner\\",\\"runtime\\":\\"/test_module_loader_path\\",\\"sandboxInjectedGlobals\\":[],\\"setupFiles\\":[],\\"setupFilesAfterEnv\\":[],\\"skipFilter\\":false,\\"skipNodeResolution\\":false,\\"slowTestThreshold\\":5,\\"snapshotFormat\\":{},\\"snapshotSerializers\\":[],\\"testEnvironment\\":\\"node\\",\\"testEnvironmentOptions\\":{},\\"testLocationInResults\\":false,\\"testMatch\\":[],\\"testPathIgnorePatterns\\":[],\\"testRegex\\":[\\"\\\\\\\\.test\\\\\\\\.js$\\"],\\"testRunner\\":\\"jest-circus/runner\\",\\"transform\\":[[\\"\\\\\\\\.js$\\",\\"test_preprocessor\\",{}]],\\"transformIgnorePatterns\\":[\\"/node_modules/\\"],\\"watchPathIgnorePatterns\\":[]}","transformerConfig":{}}',
};"
`;

exports[`ScriptTransformer in async mode, uses the supplied preprocessor 2`] = `"module.exports = "react";"`;

exports[`ScriptTransformer in async mode, warns of unparseable inlined source maps from the preprocessor 1`] = `
"<yellow><bold>● Invalid source map:</intensity></color>
<yellow>  The source map for "/fruits/banana.js" returned by "preprocessor-with-sourcemaps" is invalid.</color>
<yellow>  Proceeding without source mapping for that file.</color>"
`;

exports[`ScriptTransformer passes expected transform options to getCacheKey 1`] = `
[MockFunction] {
  "calls": Array [
    Array [
      "module.exports = "banana";",
      "/fruits/banana.js",
      Object {
        "cacheFS": Map {
          "/fruits/banana.js" => "module.exports = "banana";",
        },
        "collectCoverage": true,
        "collectCoverageFrom": Array [],
        "config": Object {
          "automock": false,
          "cache": true,
          "cacheDirectory": "/cache/",
          "clearMocks": false,
          "coveragePathIgnorePatterns": Array [],
          "cwd": "/test_root_dir/",
          "detectLeaks": false,
          "detectOpenHandles": false,
          "displayName": undefined,
          "errorOnDeprecated": false,
          "extensionsToTreatAsEsm": Array [],
          "fakeTimers": Object {
            "enableGlobally": false,
          },
          "filter": undefined,
          "forceCoverageMatch": Array [],
          "globalSetup": undefined,
          "globalTeardown": undefined,
          "globals": Object {},
          "haste": Object {},
          "id": "test",
          "injectGlobals": true,
          "moduleDirectories": Array [],
          "moduleFileExtensions": Array [
            "js",
          ],
          "moduleNameMapper": Array [],
          "modulePathIgnorePatterns": Array [],
          "modulePaths": Array [],
          "prettierPath": "prettier",
          "resetMocks": false,
          "resetModules": false,
          "resolver": undefined,
          "restoreMocks": false,
          "rootDir": "/",
          "roots": Array [],
          "runner": "jest-runner",
          "runtime": "/test_module_loader_path",
          "sandboxInjectedGlobals": Array [],
          "setupFiles": Array [],
          "setupFilesAfterEnv": Array [],
          "skipFilter": false,
          "skipNodeResolution": false,
          "slowTestThreshold": 5,
          "snapshotFormat": Object {},
          "snapshotResolver": undefined,
          "snapshotSerializers": Array [],
          "testEnvironment": "node",
          "testEnvironmentOptions": Object {},
          "testLocationInResults": false,
          "testMatch": Array [],
          "testPathIgnorePatterns": Array [],
          "testRegex": Array [
            "\\.test\\.js$",
          ],
          "testRunner": "jest-circus/runner",
          "transform": Array [
            Array [
              "\\.js$",
              "test_preprocessor",
              Object {
                "configKey": "configValue",
              },
            ],
          ],
          "transformIgnorePatterns": Array [
            "/node_modules/",
          ],
          "unmockedModulePathPatterns": undefined,
          "watchPathIgnorePatterns": Array [],
        },
        "configString": "{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_preprocessor",{"configKey":"configValue"}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]}",
        "supportsDynamicImport": false,
        "supportsExportNamespaceFrom": false,
        "supportsStaticESM": false,
        "supportsTopLevelAwait": false,
        "transformerConfig": Object {
          "configKey": "configValue",
        },
      },
    ],
  ],
  "results": Array [
    Object {
      "type": "return",
      "value": "ab",
    },
  ],
}
`;

exports[`ScriptTransformer passes expected transform options to getCacheKeyAsync 1`] = `
[MockFunction] {
  "calls": Array [
    Array [
      "module.exports = "banana";",
      "/fruits/banana.js",
      Object {
        "cacheFS": Map {
          "/fruits/banana.js" => "module.exports = "banana";",
        },
        "collectCoverage": true,
        "collectCoverageFrom": Array [],
        "config": Object {
          "automock": false,
          "cache": true,
          "cacheDirectory": "/cache/",
          "clearMocks": false,
          "coveragePathIgnorePatterns": Array [],
          "cwd": "/test_root_dir/",
          "detectLeaks": false,
          "detectOpenHandles": false,
          "displayName": undefined,
          "errorOnDeprecated": false,
          "extensionsToTreatAsEsm": Array [],
          "fakeTimers": Object {
            "enableGlobally": false,
          },
          "filter": undefined,
          "forceCoverageMatch": Array [],
          "globalSetup": undefined,
          "globalTeardown": undefined,
          "globals": Object {},
          "haste": Object {},
          "id": "test",
          "injectGlobals": true,
          "moduleDirectories": Array [],
          "moduleFileExtensions": Array [
            "js",
          ],
          "moduleNameMapper": Array [],
          "modulePathIgnorePatterns": Array [],
          "modulePaths": Array [],
          "prettierPath": "prettier",
          "resetMocks": false,
          "resetModules": false,
          "resolver": undefined,
          "restoreMocks": false,
          "rootDir": "/",
          "roots": Array [],
          "runner": "jest-runner",
          "runtime": "/test_module_loader_path",
          "sandboxInjectedGlobals": Array [],
          "setupFiles": Array [],
          "setupFilesAfterEnv": Array [],
          "skipFilter": false,
          "skipNodeResolution": false,
          "slowTestThreshold": 5,
          "snapshotFormat": Object {},
          "snapshotResolver": undefined,
          "snapshotSerializers": Array [],
          "testEnvironment": "node",
          "testEnvironmentOptions": Object {},
          "testLocationInResults": false,
          "testMatch": Array [],
          "testPathIgnorePatterns": Array [],
          "testRegex": Array [
            "\\.test\\.js$",
          ],
          "testRunner": "jest-circus/runner",
          "transform": Array [
            Array [
              "\\.js$",
              "test_async_preprocessor",
              Object {
                "configKey": "configValue",
              },
            ],
          ],
          "transformIgnorePatterns": Array [
            "/node_modules/",
          ],
          "unmockedModulePathPatterns": undefined,
          "watchPathIgnorePatterns": Array [],
        },
        "configString": "{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_async_preprocessor",{"configKey":"configValue"}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]}",
        "supportsDynamicImport": false,
        "supportsExportNamespaceFrom": false,
        "supportsStaticESM": false,
        "supportsTopLevelAwait": false,
        "transformerConfig": Object {
          "configKey": "configValue",
        },
      },
    ],
  ],
  "results": Array [
    Object {
      "type": "return",
      "value": Promise {},
    },
  ],
}
`;

exports[`ScriptTransformer throws an error if \`process\` doesn't return an object containing \`code\` key with processed string 1`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`process\` doesn't return an object containing \`code\` key with processed string 2`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`process\` doesn't return an object containing \`code\` key with processed string 3`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`process\` doesn't return an object containing \`code\` key with processed string 4`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`processAsync\` doesn't return a promise of object containing \`code\` key with processed string 1`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor-fruits-banana-js" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`processAsync\` doesn't return a promise of object containing \`code\` key with processed string 2`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor-fruits-avocado-js" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`processAsync\` doesn't return a promise of object containing \`code\` key with processed string 3`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor-fruits-kiwi-js" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if \`processAsync\` doesn't return a promise of object containing \`code\` key with processed string 4`] = `
"<red><bold>● Invalid return value:</intensity></color>
<red>  \`process()\` or/and \`processAsync()\` method of code transformer found at </color>
<red>  "passthrough-preprocessor-fruits-grapefruit-js" </color>
<red>  should return an object or a Promise resolving to an object. The object </color>
<red>  must have \`code\` property with a string of processed code.</color>
<red>  <bold>This error may be caused by a breaking change in Jest 28:</intensity></color>
<red>  https://jestjs.io/docs/upgrading-to-jest28#transformer</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if createTransformer returns object without \`process\` method 1`] = `
"<red><bold>● Invalid transformer module:</intensity></color>
<red>  "skipped-required-create-transformer-props-preprocessor" specified in the "transform" object of Jest configuration</color>
<red>  must export a \`process\` or \`processAsync\` or \`createTransformer\` function.</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer throws an error if neither \`process\` nor \`processAsync\` is defined 1`] = `
"<red><bold>● Invalid transformer module:</intensity></color>
<red>  "skipped-required-props-preprocessor" specified in the "transform" object of Jest configuration</color>
<red>  must export a \`process\` or \`processAsync\` or \`createTransformer\` function.</color>
<red>  <bold>Code Transformation Documentation:</intensity></color>
<red>  https://jestjs.io/docs/code-transformation</color>
<red></color>"
`;

exports[`ScriptTransformer transforms a file async properly 1`] = `"module.exports = "banana";"`;

exports[`ScriptTransformer transforms a file async properly 2`] = `"module.exports = () => "kiwi";"`;

exports[`ScriptTransformer transforms a file properly 1`] = `"module.exports = "banana";"`;

exports[`ScriptTransformer transforms a file properly 2`] = `"module.exports = () => "kiwi";"`;

exports[`ScriptTransformer uses mixture of sync/async preprocessors 1`] = `
"const TRANSFORMED = {
  filename: '/fruits/banana.js',
  script: 'module.exports = "banana";',
  config: '{"collectCoverage":false,"collectCoverageFrom":[],"supportsDynamicImport":false,"supportsExportNamespaceFrom":false,"supportsStaticESM":false,"supportsTopLevelAwait":false,"cacheFS":{},"config":{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_async_preprocessor",{}],["\\\\.css$","css-preprocessor",{}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]},"configString":"{\\"automock\\":false,\\"cache\\":true,\\"cacheDirectory\\":\\"/cache/\\",\\"clearMocks\\":false,\\"coveragePathIgnorePatterns\\":[],\\"cwd\\":\\"/test_root_dir/\\",\\"detectLeaks\\":false,\\"detectOpenHandles\\":false,\\"errorOnDeprecated\\":false,\\"extensionsToTreatAsEsm\\":[],\\"fakeTimers\\":{\\"enableGlobally\\":false},\\"forceCoverageMatch\\":[],\\"globals\\":{},\\"haste\\":{},\\"id\\":\\"test\\",\\"injectGlobals\\":true,\\"moduleDirectories\\":[],\\"moduleFileExtensions\\":[\\"js\\"],\\"moduleNameMapper\\":[],\\"modulePathIgnorePatterns\\":[],\\"modulePaths\\":[],\\"prettierPath\\":\\"prettier\\",\\"resetMocks\\":false,\\"resetModules\\":false,\\"restoreMocks\\":false,\\"rootDir\\":\\"/\\",\\"roots\\":[],\\"runner\\":\\"jest-runner\\",\\"runtime\\":\\"/test_module_loader_path\\",\\"sandboxInjectedGlobals\\":[],\\"setupFiles\\":[],\\"setupFilesAfterEnv\\":[],\\"skipFilter\\":false,\\"skipNodeResolution\\":false,\\"slowTestThreshold\\":5,\\"snapshotFormat\\":{},\\"snapshotSerializers\\":[],\\"testEnvironment\\":\\"node\\",\\"testEnvironmentOptions\\":{},\\"testLocationInResults\\":false,\\"testMatch\\":[],\\"testPathIgnorePatterns\\":[],\\"testRegex\\":[\\"\\\\\\\\.test\\\\\\\\.js$\\"],\\"testRunner\\":\\"jest-circus/runner\\",\\"transform\\":[[\\"\\\\\\\\.js$\\",\\"test_async_preprocessor\\",{}],[\\"\\\\\\\\.css$\\",\\"css-preprocessor\\",{}]],\\"transformIgnorePatterns\\":[\\"/node_modules/\\"],\\"watchPathIgnorePatterns\\":[]}","transformerConfig":{}}',
};"
`;

exports[`ScriptTransformer uses mixture of sync/async preprocessors 2`] = `
"module.exports = {
  filename: /styles/App.css,
  rawFirstLine: root {,
};"
`;

exports[`ScriptTransformer uses mixture of sync/async preprocessors 3`] = `"module.exports = "react";"`;

exports[`ScriptTransformer uses multiple preprocessors 1`] = `
"const TRANSFORMED = {
  filename: '/fruits/banana.js',
  script: 'module.exports = "banana";',
  config: '{"collectCoverage":false,"collectCoverageFrom":[],"supportsDynamicImport":false,"supportsExportNamespaceFrom":false,"supportsStaticESM":false,"supportsTopLevelAwait":false,"cacheFS":{},"config":{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_preprocessor",{}],["\\\\.css$","css-preprocessor",{}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]},"configString":"{\\"automock\\":false,\\"cache\\":true,\\"cacheDirectory\\":\\"/cache/\\",\\"clearMocks\\":false,\\"coveragePathIgnorePatterns\\":[],\\"cwd\\":\\"/test_root_dir/\\",\\"detectLeaks\\":false,\\"detectOpenHandles\\":false,\\"errorOnDeprecated\\":false,\\"extensionsToTreatAsEsm\\":[],\\"fakeTimers\\":{\\"enableGlobally\\":false},\\"forceCoverageMatch\\":[],\\"globals\\":{},\\"haste\\":{},\\"id\\":\\"test\\",\\"injectGlobals\\":true,\\"moduleDirectories\\":[],\\"moduleFileExtensions\\":[\\"js\\"],\\"moduleNameMapper\\":[],\\"modulePathIgnorePatterns\\":[],\\"modulePaths\\":[],\\"prettierPath\\":\\"prettier\\",\\"resetMocks\\":false,\\"resetModules\\":false,\\"restoreMocks\\":false,\\"rootDir\\":\\"/\\",\\"roots\\":[],\\"runner\\":\\"jest-runner\\",\\"runtime\\":\\"/test_module_loader_path\\",\\"sandboxInjectedGlobals\\":[],\\"setupFiles\\":[],\\"setupFilesAfterEnv\\":[],\\"skipFilter\\":false,\\"skipNodeResolution\\":false,\\"slowTestThreshold\\":5,\\"snapshotFormat\\":{},\\"snapshotSerializers\\":[],\\"testEnvironment\\":\\"node\\",\\"testEnvironmentOptions\\":{},\\"testLocationInResults\\":false,\\"testMatch\\":[],\\"testPathIgnorePatterns\\":[],\\"testRegex\\":[\\"\\\\\\\\.test\\\\\\\\.js$\\"],\\"testRunner\\":\\"jest-circus/runner\\",\\"transform\\":[[\\"\\\\\\\\.js$\\",\\"test_preprocessor\\",{}],[\\"\\\\\\\\.css$\\",\\"css-preprocessor\\",{}]],\\"transformIgnorePatterns\\":[\\"/node_modules/\\"],\\"watchPathIgnorePatterns\\":[]}","transformerConfig":{}}',
};"
`;

exports[`ScriptTransformer uses multiple preprocessors 2`] = `
"module.exports = {
  filename: /styles/App.css,
  rawFirstLine: root {,
};"
`;

exports[`ScriptTransformer uses multiple preprocessors 3`] = `"module.exports = "react";"`;

exports[`ScriptTransformer uses the supplied preprocessor 1`] = `
"const TRANSFORMED = {
  filename: '/fruits/banana.js',
  script: 'module.exports = "banana";',
  config: '{"collectCoverage":false,"collectCoverageFrom":[],"supportsDynamicImport":false,"supportsExportNamespaceFrom":false,"supportsStaticESM":false,"supportsTopLevelAwait":false,"cacheFS":{},"config":{"automock":false,"cache":true,"cacheDirectory":"/cache/","clearMocks":false,"coveragePathIgnorePatterns":[],"cwd":"/test_root_dir/","detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"extensionsToTreatAsEsm":[],"fakeTimers":{"enableGlobally":false},"forceCoverageMatch":[],"globals":{},"haste":{},"id":"test","injectGlobals":true,"moduleDirectories":[],"moduleFileExtensions":["js"],"moduleNameMapper":[],"modulePathIgnorePatterns":[],"modulePaths":[],"prettierPath":"prettier","resetMocks":false,"resetModules":false,"restoreMocks":false,"rootDir":"/","roots":[],"runner":"jest-runner","runtime":"/test_module_loader_path","sandboxInjectedGlobals":[],"setupFiles":[],"setupFilesAfterEnv":[],"skipFilter":false,"skipNodeResolution":false,"slowTestThreshold":5,"snapshotFormat":{},"snapshotSerializers":[],"testEnvironment":"node","testEnvironmentOptions":{},"testLocationInResults":false,"testMatch":[],"testPathIgnorePatterns":[],"testRegex":["\\\\.test\\\\.js$"],"testRunner":"jest-circus/runner","transform":[["\\\\.js$","test_preprocessor",{}]],"transformIgnorePatterns":["/node_modules/"],"watchPathIgnorePatterns":[]},"configString":"{\\"automock\\":false,\\"cache\\":true,\\"cacheDirectory\\":\\"/cache/\\",\\"clearMocks\\":false,\\"coveragePathIgnorePatterns\\":[],\\"cwd\\":\\"/test_root_dir/\\",\\"detectLeaks\\":false,\\"detectOpenHandles\\":false,\\"errorOnDeprecated\\":false,\\"extensionsToTreatAsEsm\\":[],\\"fakeTimers\\":{\\"enableGlobally\\":false},\\"forceCoverageMatch\\":[],\\"globals\\":{},\\"haste\\":{},\\"id\\":\\"test\\",\\"injectGlobals\\":true,\\"moduleDirectories\\":[],\\"moduleFileExtensions\\":[\\"js\\"],\\"moduleNameMapper\\":[],\\"modulePathIgnorePatterns\\":[],\\"modulePaths\\":[],\\"prettierPath\\":\\"prettier\\",\\"resetMocks\\":false,\\"resetModules\\":false,\\"restoreMocks\\":false,\\"rootDir\\":\\"/\\",\\"roots\\":[],\\"runner\\":\\"jest-runner\\",\\"runtime\\":\\"/test_module_loader_path\\",\\"sandboxInjectedGlobals\\":[],\\"setupFiles\\":[],\\"setupFilesAfterEnv\\":[],\\"skipFilter\\":false,\\"skipNodeResolution\\":false,\\"slowTestThreshold\\":5,\\"snapshotFormat\\":{},\\"snapshotSerializers\\":[],\\"testEnvironment\\":\\"node\\",\\"testEnvironmentOptions\\":{},\\"testLocationInResults\\":false,\\"testMatch\\":[],\\"testPathIgnorePatterns\\":[],\\"testRegex\\":[\\"\\\\\\\\.test\\\\\\\\.js$\\"],\\"testRunner\\":\\"jest-circus/runner\\",\\"transform\\":[[\\"\\\\\\\\.js$\\",\\"test_preprocessor\\",{}]],\\"transformIgnorePatterns\\":[\\"/node_modules/\\"],\\"watchPathIgnorePatterns\\":[]}","transformerConfig":{}}',
};"
`;

exports[`ScriptTransformer uses the supplied preprocessor 2`] = `"module.exports = "react";"`;

exports[`ScriptTransformer warns of unparseable inlined source maps from the async preprocessor 1`] = `
"<yellow><bold>● Invalid source map:</intensity></color>
<yellow>  The source map for "/fruits/banana.js" returned by "async-preprocessor-with-sourcemaps" is invalid.</color>
<yellow>  Proceeding without source mapping for that file.</color>"
`;

exports[`ScriptTransformer warns of unparseable inlined source maps from the preprocessor 1`] = `
"<yellow><bold>● Invalid source map:</intensity></color>
<yellow>  The source map for "/fruits/banana.js" returned by "preprocessor-with-sourcemaps" is invalid.</color>
<yellow>  Proceeding without source mapping for that file.</color>"
`;
