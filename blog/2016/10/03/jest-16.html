<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Jest 16.0: Turbocharged CLI &amp; Community Update ¬∑ Jest</title><meta name="viewport" content="width=device-width"/><meta property="og:title" content="Jest 16.0: Turbocharged CLI &amp; Community Update ¬∑ Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/blog/2016/10/03/jest-16.html"/><meta property="og:description" content="It&#x27;s been one month since the last major release and we&#x27;ve made significant improvements to Jest since. In this major release we are updating the snapshot format we are using which will likely require snapshots to be updated when upgrading Jest. We don&#x27;t make these changes lightly and don&#x27;t expect this to happen often but we think it is necessary to improve the format from time to time."/><meta name="robots" content="noindex"/><meta property="og:image" content="/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="/jest/css/main.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/> <link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/jest/js/webplayer.js"></script><script type="text/javascript" src="https://snack.expo.io/embed.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/en/getting-started.html" target="_self">Docs</a></li><li><a href="/jest/docs/en/api.html" target="_self">API</a></li><li><a href="/jest/en/help.html" target="_self">Help</a></li><li><a href="/jest/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">Êó•Êú¨Ë™û</a></li><li><a href="/jest/es-ES">Espa√±ol</a></li><li><a href="/jest/pt-BR">Portugu√™s (Brasil)</a></li><li><a href="/jest/ro">Rom√¢nƒÉ</a></li><li><a href="/jest/ru">–†—É—Å—Å–∫–∏–π</a></li><li><a href="/jest/uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</a></li><li><a href="/jest/zh-Hans">ÁÆÄ‰Ωì‰∏≠Êñá</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>‚Ä∫</i><span>Recent Posts</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/jest/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner.html">Jest 20: üíñ Delightful Testing &amp; üèÉüèΩ Multi-Project-Runner</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2017/02/21/jest-19-immersive-watch-mode-test-platform-improvements.html">üÉè Jest 19: Immersive Watch Mode &amp; Test Platform Improvements</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2017/01/30/a-great-developer-experience.html">A Great Developer Experience</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/12/15/2016-in-jest.html">2016 in Jest</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/blog/2016/10/03/jest-16.html">Jest 16.0: Turbocharged CLI &amp; Community Update</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer documentContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"/></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a><br/></p><h1><a href="/jest/blog/2016/10/03/jest-16.html">Jest 16.0: Turbocharged CLI &amp; Community Update</a></h1><p class="post-meta">October 3, 2016</p></header><div><p>It&#x27;s been one month since the last major release and we&#x27;ve made significant improvements to Jest since. In this major release we are updating the snapshot format we are using which will likely require snapshots to be updated when upgrading Jest. We don&#x27;t make these changes lightly and don&#x27;t expect this to happen often but we think it is necessary to improve the format from time to time.</p><h2><a class="anchor" name="upgraded-cli"></a>Upgraded CLI <a class="hash-link" href="#upgraded-cli">#</a></h2><p><img src="/jest/img/blog/16-reporter.gif" alt="reporter"/></p><p>Jest 16 features a new reporter interface that shows running tests as well as a live summary and a progress bar based on the estimated test runtime from previous test runs. We also improved the CLI output to work better with different color schemes. If there were test failures in a previous run, Jest will now always run those tests first to give useful signal to users as quickly as possible.</p><div><!--truncate-->

</div><p>We also added a lot of new features which you may find useful:</p><ul><li>New CLI flags were added: A <code>--testNamePattern=pattern</code> or <code>-t &lt;pattern&gt;</code> option was added to filter tests from the command line much like <code>it.only</code> or <code>fit</code> does in tests.</li><li>Previously failed tests now always run first.</li><li><code>jest &lt;pattern&gt;</code>  is now case-insensitive to make it easier to filter test files.</li><li>A test run in watch mode can now be interrupted. During a test run, simply press any of the keys used for input during watch mode (<code>a</code>, <code>o</code>, <code>p</code>, <code>q</code> or <code>enter</code>) to abort a test run and start a new one.</li><li>The <code>--bail</code> flag now also works in watch mode. Together with running failed tests first, Jest&#x27;s watch mode will now feel turbocharged!</li><li>Jest now automatically considers files and tests with the <code>jsx</code> extension.</li><li>Jest warns about duplicate manual mock files and we improved automatically created mocks for ES modules compiled with babel.</li><li>A <code>jest.clearAllMocks</code> function was added to clear all mocks in between tests.</li><li>We improved module resolution when <code>moduleNameMapper</code> is used.</li><li>Finally, a <code>--findRelatedTests &lt;fileA&gt; &lt;fileB&gt;</code> cli option was added to run tests related to the specified files. This is especially helpful as a pre-commit hook if you&#x27;d like to run tests only on a specified set of files that have tests associated with them.</li></ul><p>This is what Jest looks like when a test run is interrupted in watch mode:
<img src="/jest/img/blog/16-watch.gif" alt="watch"/></p><h2><a class="anchor" name="snapshot-updates"></a>Snapshot Updates <a class="hash-link" href="#snapshot-updates">#</a></h2><p>Jest&#x27;s snapshot implementation was completely rewritten. The new version of the <code>jest-snapshot</code> package is now structured in a way that allows for easier integration into other test runners and enables more cool integrations like with <a href="https://voice.kadira.io/snapshot-testing-in-react-storybook-43b3b71cec4f#.qh4lzcadb" target="_blank">React Storybook</a>. Jest doesn&#x27;t mark snapshots as obsolete in a file with skipped or failing tests. We also made a number of changes to the snapshot format:</p><ul><li>Objects and Arrays are now printed with a trailing comma to minimize future changes to snapshots.</li><li>We removed function names from snapshots. They were causing issues with different versions of Node, with code coverage instrumentation and we generally felt like it wasn&#x27;t useful signal to show to the user that the name of a function has changed.</li><li>Snapshots are now sorted using natural sort order within a file.</li></ul><p>When upgrading to Jest 16, the diff might look similar to this one:
<img src="/jest/img/blog/16-snapshots.png" alt="snapshots"/></p><h2><a class="anchor" name="test-library-updates"></a>Test Library Updates <a class="hash-link" href="#test-library-updates">#</a></h2><p>We finished the migration of Jasmine assertions to the new Jest matchers. We added three new matchers: <code>toBeInstanceOf</code>, <code>toContainEqual</code> and <code>toThrowErrorMatchingSnapshot</code> . We have more readable failure messages for the spy/mock matchers <code>toHaveBeenLastCalledWith</code>, <code>toHaveBeenCalledWith</code>, <code>lastCalledWith</code> and <code>toBeCalledWith</code>. Now that we have rewritten all assertions and separated them into their own package, we&#x27;ll be working on making them standalone so they can be integrated into any test framework if you&#x27;d like to use them outside of Jest.</p><p>We also added a bunch of aliases that were requested by the community. To make Jest focus on a single test you can now use either <code>it.only</code> or <code>test.only</code> or keep using <code>fit</code>; For skipping a test, <code>it.skip</code> or <code>test.skip</code> are now available alongside of <code>xit</code>; finally to define a test as concurrent you can use <code>test.concurrent</code> which is useful in case your test accesses network resources or databases.</p><p>Finally, if you&#x27;d like to overwrite the <code>expect</code> global with a different assertion library like <a href="http://chaijs.com/" target="_blank">chai</a>, this can now be done using the <code>setupTestFrameworkScriptFile</code> configuration option.</p><h2><a class="anchor" name="community-update"></a>Community Update <a class="hash-link" href="#community-update">#</a></h2><p>Over the last month lots of articles were written about Jest&#x27;s snapshot testing feature, how to migrate to Jest and how to get started writing tests. I also did a few live videos to explain how Jest and snapshot testing works:</p><ul><li><a href="https://www.facebook.com/react/videos/1035427199869020/" target="_blank">FB Live Video about Snapshot Testing</a>.</li><li><a href="https://www.youtube.com/watch?v=i31VtyJSM-I&amp;feature=youtu.be" target="_blank">JavaScript &amp; React Testing with Kent C. Dodds</a>.</li></ul><p>A number of people wrote articles about snapshot testing. The most opinionated article that resonated with the Jest team was ‚Äú<a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/" target="_blank">Testing with Jest Snapshots: First Impressions</a>‚Äù. Ben makes three great points in his blog post:</p><ol><li>Snapshot tests are a complement for conventional tests not a replacement.</li><li>Snapshot tests are more useful with a healthy code review process.</li><li>Snapshot tests work well with auto-mocking.</li></ol><p>We highly recommend reading the entire blog post. Ben did a fantastic job explaining the reasons why we built snapshot testing. It&#x27;s important to point out that we didn&#x27;t introduce snapshot testing to replace all other forms of testing but rather as a way to enable engineers to write tests for code that they otherwise wouldn&#x27;t write tests for. It works well for things like React components, CLI output, error messages and many others but it doesn&#x27;t solve all problems. Jest&#x27;s goal is to provide many different ways to write effective tests without sacrificing performance or the project&#x27;s maintainability.</p><p>Other highlights about snapshot testing:</p><ul><li>A React Native testing series: <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-i-snapshots-come-into-play-68ba19b1b9fe" target="_blank">Part 1: Jest ‚Äì Snapshot come into play</a> and <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-ii-redux-snapshots-for-your-actions-and-reducers-8559f6f8050b#.putt9eipm" target="_blank">Part 2: Jest ‚Äì Redux Snapshots for your Actions and Reducers</a>.</li><li><a href="https://blog.grommet.io/post/2016/09/01/how-we-landed-on-jest-snapshot-testing-for-javascript" target="_blank">How we landed on Jest snapshot testing for JavaScript</a>.</li><li><a href="http://guigrpa.github.io/2016/09/27/picture-this-snapshot-testing/" target="_blank">Picture This: Snapshot Testing</a>.</li><li><a href="https://voice.kadira.io/snapshot-testing-in-react-storybook-43b3b71cec4f" target="_blank">Snapshot testing with React Storybook</a>.</li><li><a href="https://medium.com/@ryancollinsio/testing-react-redux-applications-fee79ac0087f#.lyjl7st1n" target="_blank">Testing React and Redux Applications</a>.</li><li>If you are using the popular <a href="https://github.com/airbnb/enzyme" target="_blank">enzyme</a> testing utility, there is now a project <a href="https://github.com/trayio/enzyme-to-json" target="_blank">enzyme-to-json</a> which makes it possible to use Jest&#x27;s snapshot testing feature together with enzyme.</li></ul><p><a href="https://github.com/reactjs/redux/commit/7296d3cba1f5f899bdee5ef6695a8d21149f8d6c" target="_blank">Redux itself now uses Jest</a> and Max Stoiber wrote a <a href="http://academy.plot.ly/react/6-testing/" target="_blank">tutorial on how to test code written with redux</a>. There is also a great <a href="https://semaphoreci.com/community/tutorials/how-to-test-react-and-mobx-with-jest" target="_blank">guide on how to write tests for MobX</a>. If you are using <a href="https://github.com/facebookincubator/create-react-app" target="_blank">create-react-app</a>, Jest is now included by default. Kent C. Dodds created a ton of <a href="https://egghead.io/lessons/javascript-use-jest-s-snapshot-testing-feature?pl=testing-javascript-with-jest-a36c4074" target="_blank">videos on egghead.io</a> that will help you get started with Jest.</p><p>If you are using other test runners, Kenneth Skovhus built an awesome <a href="https://github.com/skovhus/jest-codemods" target="_blank">jest-codemods</a> library that will automate the conversion for you. Codemods are awesome: they&#x27;ll allow you to quickly evaluate whether Jest will work for you. Give it a try!</p><p>The full <a href="https://github.com/facebook/jest/blob/master/CHANGELOG.md#jest-1600" target="_blank">changelog can be found on GitHub</a>. Jest 16 was a true JavaScript community effort and the project now has more than 220 contributors. We thank each and every one of you for your help to make this project great.</p></div></div></div><div class="blog-recent"><a class="button" href="/jest/blog">Recent Posts</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/en/getting-started.html">Getting Started</a><a href="/jest/docs/en/snapshot-testing.html">Guides</a><a href="/jest/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright ¬© 2017 Facebook Inc.</section></footer></div><script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>