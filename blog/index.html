<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Blog · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Blog · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="Painless JavaScript Testing"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><div class="navSlideout"><i class="menuExpand"><span></span><span></span><span></span></i></div><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/getting-started.html" class="">Docs</a></li><li><a href="/jest/support.html" class="">Support</a></li><li><a href="/jest/blog/" class="active">Blog</a></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li></ul></nav><script>
          var triggers = document.getElementsByClassName('menuExpand');
          var navs = document.getElementsByClassName('navSlideout');
          for (var i=0; i < triggers.length; i++) {
            triggers[i].onclick = function() {
              for (var j=0; j < navs.length; j++) {
                navs[j].classList.toggle('navSlideoutActive');
                navs[j].nextSibling.classList.toggle('slidingNavActive');
              }
            };
          }
        </script></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><a href="/jest/blog/">Blog</a><i>›</i><span>Recent Posts</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/jest/blog/2016/10/03/jest-16.html">Jest 16.0: Turbocharged CLI &amp; Community Update</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/09/01/jest-15.html">Jest 15.0: New Defaults for Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/07/27/jest-14.html">Jest 14.0: React Tree Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/06/22/jest-13.html">Jest 13.0: Flow &amp; REPL</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/04/12/jest-11.html">Jest 11.0</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/03/11/javascript-unit-testing-performance.html">JavaScript Unit Testing Performance</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer documentContainer postContainer blogContainer"><div class="wrapper"><div class="posts"><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><h1><a href="/jest/blog/2016/10/03/jest-16.html">Jest 16.0: Turbocharged CLI &amp; Community Update</a></h1><p class="post-meta"><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-style="mega" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></p><p class="post-meta">October 3, 2016</p></header><article class="post-content"><div><p>It&#x27;s been one month since the last major release and we&#x27;ve made significant improvements to Jest since. In this major release we are updating the snapshot format we are using which will likely require snapshots to be updated when upgrading Jest. We don&#x27;t make these changes lightly and don&#x27;t expect this to happen often but we think it is necessary to improve the format from time to time.</p><h2><a class="anchor" name="upgraded-cli"></a>Upgraded CLI <a class="hash-link" href="#upgraded-cli">#</a></h2><p><img src="/jest/img/blog/16-reporter.gif" alt="reporter"></p><p>Jest 16 features a new reporter interface that shows running tests as well as a live summary and a progress bar based on the estimated test runtime from previous test runs. We also improved the CLI output to work better with different color schemes. If there were test failures in a previous run, Jest will now always run those tests first to give useful signal to users as quickly as possible.</p><p>We also added a lot of new features which you may find useful:</p><ul><li>New CLI flags were added: A <code>--testNamePattern=pattern</code> or <code>-t &lt;pattern&gt;</code> option was added to filter tests from the command line much like <code>it.only</code> or <code>fit</code> does in tests.</li><li>Previously failed tests now always run first.</li><li><code>jest &lt;pattern&gt;</code>  is now case-insensitive to make it easier to filter test files.</li><li>A test run in watch mode can now be interrupted. During a test run, simply press any of the keys used for input during watch mode (<code>a</code>, <code>o</code>, <code>p</code>, <code>q</code> or <code>enter</code>) to abort a test run and start a new one.</li><li>The <code>--bail</code> flag now also works in watch mode. Together with running failed tests first, Jest&#x27;s watch mode will now feel turbocharged!</li><li>Jest now automatically considers files and tests with the <code>jsx</code> extension.</li><li>Jest warns about duplicate manual mock files and we improved automatically created mocks for ES modules compiled with babel.</li><li>A <code>jest.clearAllMocks</code> function was added to clear all mocks in between tests.</li><li>We improved module resolution when <code>moduleNameMapper</code> is used.</li><li>Finally, a <code>--findRelatedTests &lt;fileA&gt; &lt;fileB&gt;</code> cli option was added to run tests related to the specified files. This is especially helpful as a pre-commit hook if you&#x27;d like to run tests only on a specified set of files that have tests associated with them.</li></ul><p>This is what Jest looks like when a test run is interrupted in watch mode:
<img src="/jest/img/blog/16-watch.gif" alt="watch"></p><h2><a class="anchor" name="snapshot-updates"></a>Snapshot Updates <a class="hash-link" href="#snapshot-updates">#</a></h2><p>Jest&#x27;s snapshot implementation was completely rewritten. The new version of the <code>jest-snapshot</code> package is now structured in a way that allows for easier integration into other test runners and enables more cool integrations like with <a href="https://voice.kadira.io/snapshot-testing-in-react-storybook-43b3b71cec4f#.qh4lzcadb" target="_blank">React Storybook</a>. Jest doesn&#x27;t mark snapshots as obsolete in a file with skipped or failing tests. We also made a number of changes to the snapshot format:</p><ul><li>Objects and Arrays are now printed with a trailing comma to minimize future changes to snapshots.</li><li>We removed function names from snapshots. They were causing issues with different versions of Node, with code coverage instrumentation and we generally felt like it wasn&#x27;t useful signal to show to the user that the name of a function has changed.</li><li>Snapshots are now sorted using natural sort order within a file.</li></ul><p>When upgrading to Jest 16, the diff might look similar to this one:
<img src="/jest/img/blog/16-snapshots.png" alt="snapshots"></p><h2><a class="anchor" name="test-library-updates"></a>Test Library Updates <a class="hash-link" href="#test-library-updates">#</a></h2><p>We finished the migration of Jasmine assertions to the new Jest matchers. We added three new matchers: <code>toBeInstanceOf</code>, <code>toContainEqual</code> and <code>toThrowErrorMatchingSnapshot</code> . We have more readable failure messages for the spy/mock matchers <code>toHaveBeenLastCalledWith</code>, <code>toHaveBeenCalledWith</code>, <code>lastCalledWith</code> and <code>toBeCalledWith</code>. Now that we have rewritten all assertions and separated them into their own package, we&#x27;ll be working on making them standalone so they can be integrated into any test framework if you&#x27;d like to use them outside of Jest.</p><p>We also added a bunch of aliases that were requested by the community. To make Jest focus on a single test you can now use either <code>it.only</code> or <code>test.only</code> or keep using <code>fit</code>; For skipping a test, <code>it.skip</code> or <code>test.skip</code> are now available alongside of <code>xit</code>; finally to define a test as concurrent you can use <code>test.concurrent</code> which is useful in case your test accesses network resources or databases.</p><p>Finally, if you&#x27;d like to overwrite the <code>expect</code> global with a different assertion library like <a href="http://chaijs.com/" target="_blank">chai</a>, this can now be done using the <code>setupTestFrameworkScriptFile</code> configuration option.</p><h2><a class="anchor" name="community-update"></a>Community Update <a class="hash-link" href="#community-update">#</a></h2><p>Over the last month lots of articles were written about Jest&#x27;s snapshot testing feature, how to migrate to Jest and how to get started writing tests. I also did a few live videos to explain how Jest and snapshot testing works:</p><ul><li><a href="https://www.facebook.com/react/videos/1035427199869020/" target="_blank">FB Live Video about Snapshot Testing</a>.</li><li><a href="https://www.youtube.com/watch?v=i31VtyJSM-I&amp;feature=youtu.be" target="_blank">JavaScript &amp; React Testing with Kent C. Dodds</a>.</li></ul><p>A number of people wrote articles about snapshot testing. The most opinionated article that resonated with the Jest team was “<a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/" target="_blank">Testing with Jest Snapshots: First Impressions</a>”. Ben makes three great points in his blog post:</p><ol><li>Snapshot tests are a complement for conventional tests not a replacement.</li><li>Snapshot tests are more useful with a healthy code review process.</li><li>Snapshot tests work well with auto-mocking.</li></ol><p>We highly recommend reading the entire blog post. Ben did a fantastic job explaining the reasons why we built snapshot testing. It&#x27;s important to point out that we didn&#x27;t introduce snapshot testing to replace all other forms of testing but rather as a way to enable engineers to write tests for code that they otherwise wouldn&#x27;t write tests for. It works well for things like React components, CLI output, error messages and many others but it doesn&#x27;t solve all problems. Jest&#x27;s goal is to provide many different ways to write effective tests without sacrificing performance or the project&#x27;s maintainability.</p><p>Other highlights about snapshot testing:</p><ul><li>A React Native testing series: <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-i-snapshots-come-into-play-68ba19b1b9fe" target="_blank">Part 1: Jest – Snapshot come into play</a> and <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-ii-redux-snapshots-for-your-actions-and-reducers-8559f6f8050b#.putt9eipm" target="_blank">Part 2: Jest – Redux Snapshots for your Actions and Reducers</a>.</li><li><a href="https://blog.grommet.io/post/2016/09/01/how-we-landed-on-jest-snapshot-testing-for-javascript" target="_blank">How we landed on Jest snapshot testing for JavaScript</a>.</li><li><a href="http://guigrpa.github.io/2016/09/27/picture-this-snapshot-testing/" target="_blank">Picture This: Snapshot Testing</a>.</li><li><a href="https://voice.kadira.io/snapshot-testing-in-react-storybook-43b3b71cec4f" target="_blank">Snapshot testing with React Storybook</a>.</li><li><a href="https://medium.com/@ryancollinsio/testing-react-redux-applications-fee79ac0087f#.lyjl7st1n" target="_blank">Testing React and Redux Applications</a>.</li><li>If you are using the popular <a href="https://github.com/airbnb/enzyme" target="_blank">enzyme</a> testing utility, there is now a project <a href="https://github.com/trayio/enzyme-to-json" target="_blank">enzyme-to-json</a> which makes it possible to use Jest&#x27;s snapshot testing feature together with enzyme.</li></ul><p><a href="https://github.com/reactjs/redux/commit/7296d3cba1f5f899bdee5ef6695a8d21149f8d6c" target="_blank">Redux itself now uses Jest</a> and Max Stoiber wrote a <a href="http://academy.plot.ly/react/6-testing/" target="_blank">tutorial on how to test code written with redux</a>. There is also a great <a href="https://semaphoreci.com/community/tutorials/how-to-test-react-and-mobx-with-jest" target="_blank">guide on how to write tests for MobX</a>. If you are using <a href="https://github.com/facebookincubator/create-react-app" target="_blank">create-react-app</a>, Jest is now included by default. Kent C. Dodds created a ton of <a href="https://egghead.io/lessons/javascript-use-jest-s-snapshot-testing-feature?pl=testing-javascript-with-jest-a36c4074" target="_blank">videos on egghead.io</a> that will help you get started with Jest.</p><p>If you are using other test runners, Kenneth Skovhus built an awesome <a href="https://github.com/skovhus/jest-codemods" target="_blank">jest-codemods</a> library that will automate the conversion for you. Codemods are awesome: they&#x27;ll allow you to quickly evaluate whether Jest will work for you. Give it a try!</p><p>The full <a href="https://github.com/facebook/jest/blob/master/CHANGELOG.md#jest-1600" target="_blank">changelog can be found on GitHub</a>. Jest 16 was a true JavaScript community effort and the project now has more than 220 contributors. We thank each and every one of you for your help to make this project great.</p></div><div class="read-more"><a href="/jest/blog/2016/10/03/jest-16.html">Read More</a></div></article></div><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><h1><a href="/jest/blog/2016/09/01/jest-15.html">Jest 15.0: New Defaults for Jest</a></h1><p class="post-meta"><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-style="mega" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></p><p class="post-meta">September 1, 2016</p></header><article class="post-content"><div><p>We spent the past year making Jest <a href="http://facebook.github.io/jest/blog/2016/03/11/javascript-unit-testing-performance.html" target="_blank">faster</a>, <a href="http://facebook.github.io/jest/blog/2016/04/12/jest-11.html" target="_blank">easier to configure</a>, <a href="http://facebook.github.io/jest/blog/2016/06/22/jest-13.html" target="_blank">added tons of features</a> and built <a href="http://facebook.github.io/jest/blog/2016/07/27/jest-14.html" target="_blank">snapshot testing</a>. However, there were two areas where we invested very little: the CLI output and user experience. With Jest 15 we are changing the framework radically to make it easier to use both for beginners and experienced users. We are excited that our investment in Jest is now paying off: we can move fast and improve the framework for Facebook and the open source community at light-speed. Jest&#x27;s goal is to come with batteries included and to require as little configuration as necessary. We recently got a chance to explain our philosophy on a <a href="https://github.com/facebookincubator/create-react-app/pull/250#issuecomment-237098619" target="_blank">create-react-app issue</a>.</p><p>The most important change to talk about is a set of <a href="https://github.com/facebook/jest/pull/1511" target="_blank">new defaults</a>. If you are an existing Jest user you will very likely need to update your configuration for Jest 15. In most cases it will simplify your setup and Jest will provide useful error messages during the upgrade. All of the new defaults can be disabled to suit your needs, but we still consider the disabled features critical for Jest in certain situations and will continue to use and support them at Facebook long-term. Our <a href="https://facebook.github.io/jest/docs/api.html" target="_blank">API documentation</a> was also completely rewritten to reflect these changes. <a href="https://github.com/facebook/react/pull/7625/files" target="_blank">This pull request for React</a> highlights some of the changes necessary for existing projects.</p><h2><a class="anchor" name="new-cli-error-messages-and-summaries"></a>New CLI error messages and summaries <a class="hash-link" href="#new-cli-error-messages-and-summaries">#</a></h2><p>As part of our effort to remove Jasmine incrementally within Jest, replacing all Jasmine matchers was almost completed. A lot of time was spent tweaking every error message for every matcher to give the best signal to users when a test is failing – the time when Jest should provide the most value to you. In addition to printing the expected and received values, a diff is printed for the <code>toBe</code> and <code>toEqual</code> matchers to help spot mistakes. More colors were added and relevant files from stack traces are highlighted more prominently.</p><p>Here is a comparison of the before and after on a light terminal:
<img src="/jest/img/blog/15-failure1.png" alt="failure1">
It also works well with darker colors:
<img src="/jest/img/blog/15-failure2.png" alt="failure2"></p><h2><a class="anchor" name="new-watch-command"></a>New watch command <a class="hash-link" href="#new-watch-command">#</a></h2><p>We completely rewrote <code>jest --watch</code> to be more interactive. It can now switch between running all tests or only test files related to changed files by pressing <code>a</code> or <code>o</code>. By pressing <code>p</code> a prompt appears that allows to specify a test pattern to focus on a specific set of files. Snapshot tests can be updated by pressing <code>u</code>.</p><p><img src="/jest/img/blog/15-watch.gif" alt="watch"></p><h2><a class="anchor" name="jest-react-native-improvements"></a>jest-react-native improvements <a class="hash-link" href="#jest-react-native-improvements">#</a></h2><p>Mocks for <code>ListView</code>, <code>TextInput</code>, <code>ActivityIndicator</code>, <code>ScrollView</code> and more were added. The existing mocks were updated to use the real implementations and existing snapshots likely have to be updated when upgrading to Jest 15. A <code>mockComponent</code> function was added to <code>jest-react-native</code> that can be used to mock native components:</p><pre class="prism language-javascript">
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;MyNativeComponent&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> jestReactNative <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;jest-react-native&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> jestReactNative<span class="token punctuation">.</span><span class="token function">mockComponent</span><span class="token punctuation">(</span><span class="token string">&#x27;MyNativeComponent&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>There have also been a number of improvements around mocking images, the fetch module and other native APIs.</p><h2><a class="anchor" name="buffered-console-messages"></a>Buffered Console Messages <a class="hash-link" href="#buffered-console-messages">#</a></h2><p>Jest parallelizes test runs across workers to maximize performance. Previously Jest used to forward console messages from workers to the parent and printed them immediately. When running multiple tests in parallel, it was often hard to find out which test and which module was calling a log function. In Jest 15, all console messages are buffered and printed together with individual test results. In addition the file and line number of the log call is printed so the code can easily be inspected.</p><p>Compare the output of the previous version of Jest and Jest 15:
<img src="/jest/img/blog/15-console.png" alt="console"></p><h2><a class="anchor" name="disabled-automocking"></a>Disabled Automocking <a class="hash-link" href="#disabled-automocking">#</a></h2><p>Automocking is now disabled by default in Jest. This is by far the most confusing feature for new users and in many ways it doesn&#x27;t make sense for small projects. We introduced automocking at Facebook and it worked great for us when unit testing was adopted in a large existing code base with few existing tests, but over time it felt like people spent more time fighting with mocked/unmocked modules than it would have taken them to write a test normally. We also noticed that library authors often require a huge number of basic modules that always have to be manually unmocked. Even for Jest itself we realized that the majority of tests had automocking disabled manually. We still believe that explicit automocking can be incredibly valuable. This change simply trades implicit mocks for explicit mocks via calls to <code>jest.mock(moduleName)</code>.</p><p>If you would still like to use automocking by default, enable the <code>automock</code> setting in your configuration or manually call <code>jest.enableAutomock()</code> in your test or setup file.</p><h2><a class="anchor" name="test-file-patterns"></a>Test File Patterns <a class="hash-link" href="#test-file-patterns">#</a></h2><p>Not everyone uses the same convention of using a <code>__tests__</code> folder to store tests. Jest 15 also looks for files ending in <code>.spec.js</code> or <code>.test.js</code>, two popular community standards. Jest 15 also removes the <code>testDirectoryName</code> and <code>testFileExtensions</code> configuration options and asks users to switch to the <code>testRegex</code> option when the old configuration options are used.</p><h2><a class="anchor" name="module-registry-persistence"></a>Module Registry Persistence <a class="hash-link" href="#module-registry-persistence">#</a></h2><p>Jest used to implicitly reset all modules before each test and we recommended requiring modules in <code>beforeEach</code> or inside of tests. This is useful when modules have local state that shouldn&#x27;t be shared between tests. However, two big shifts happened: ES modules with the top-level <code>import</code> syntax and a renewed interest in writing stateless functional modules.</p><p>This has lead to numerous incompatibilities. We also noticed that at Facebook we weren&#x27;t even using this implicit reset. Instead we relied on explicit calls to <code>jest.resetModules()</code> which puts engineers in control on when to wipe away all state.</p><p>Here is an example:</p><pre class="prism language-javascript">
<span class="token keyword">const</span> React1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> React2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

React1 <span class="token operator">!</span><span class="token operator">==</span> React2 <span spellcheck="true" class="token comment">// These two are separate copies of React.</span></pre><p>The call to <code>resetModules</code> wipes away the require cache. A second call to require the same module will result in a new instantiation of the same module and all of its dependencies. This feature is especially useful when dealing with modules that have side effects, like <a href="https://github.com/facebook/jest/blob/3bbf32a239fc4aad8cc6928a787f235bd86fecac/packages/jest-haste-map/src/__tests__/index-test.js#L64" target="_blank">jest-haste-map</a>.</p><p>We believe it is better to put users in control so we disabled the implicit reset. Modules can be reset using <code>jest.resetModules()</code> in code and the <code>resetModules</code> option can be enabled in the configuration to bring back the previous behavior.</p><h2><a class="anchor" name="real-vs-fake-timers"></a>Real vs Fake Timers <a class="hash-link" href="#real-vs-fake-timers">#</a></h2><p>By default Jest used to mock all timer functions like <code>setTimeout</code> or <code>process.nextTick</code> and provided an API <code>jest.runAllTimers()</code> to advance timers programatically. This is useful when a piece of code sets a long timeout that we don&#x27;t want to wait for in a test.</p><p>However we found that most of the time the use cases are quite isolated. <a href="http://facebook.github.io/jest/docs/tutorial-async.html" target="_blank">Async programming</a> has also become much simpler in our test runner. Jest now uses the real timers by default.</p><p>You can still override this by specifying  <code>&quot;timers&quot;: &quot;fake&quot;</code>  in the configuration or by calling <code>jest.useRealTimers()</code> and <code>jest.useFakeTimers()</code> global switches.</p><h2><a class="anchor" name="setupenvscriptfile-vs-setupfiles"></a>setupEnvScriptFile vs setupFiles <a class="hash-link" href="#setupenvscriptfile-vs-setupfiles">#</a></h2><p>The <code>setupEnvScriptFile</code> configuration option has been deprecated for a while. Jest 15 removes it completely and replaces it with <code>setupFiles</code>. This option expects an array of file paths that are loaded in order before a test file is executed.</p><h2><a class="anchor" name="rewritten-code-coverage-support"></a>Rewritten Code Coverage Support <a class="hash-link" href="#rewritten-code-coverage-support">#</a></h2><p>Code coverage in Jest can be used through <code>jest --coverage</code> and requires no additional packages or configuration. Code coverage support was completely rewritten and a new <code>collectCoverageFrom</code> option was added to collect code coverage information from entire projects, including <strong>untested files</strong>. Note that this option uses globs as we are hoping to further simplify configuration options in the future and provide a simpler alternative to regular expressions. See Jest&#x27;s <a href="https://github.com/facebook/jest/blob/9088f6517813f6c089cf52e980d6579511dcde88/package.json#L47" target="_blank">package.json</a> for an example.</p><h2><a class="anchor" name="other-improvements"></a>Other Improvements <a class="hash-link" href="#other-improvements">#</a></h2><p>A huge number of other improvements were also made:</p><ul><li>Improved performance of small test runs.</li><li>Jest now uses verbose mode when only a single test file is executed.</li><li>Added an <code>--env</code> option to override the configured test environment.</li><li><code>moduleNameMapper</code> now uses a resolution algorithm.</li><li>Jest now works with paths that have special characters in them, like parenthesis.</li><li>Added <code>global.global</code> to the node environment.</li><li>Fixed <code>babel-plugin-jest-hoist</code>&#x27;s invalid error when a random user function was called <code>mock</code>.</li><li>Fix <code>testEnvironment</code> resolution to prefer <code>jest-environment-{name}</code> instead of <code>{name}</code> only. This prevents a module collision when using <code>jsdom</code> as test environment.</li><li>Improvements to Jest&#x27;s own test infra by merging integration and unit tests. Code coverage is now collected for Jest.</li></ul><p>We are happy when looking back at all the changes we have made together with the help from the community and couldn&#x27;t be more excited to make Jest even better over the course of the next few months. Please <a href="https://github.com/facebook/jest/issues" target="_blank">file an issue</a> if something isn&#x27;t working as expected and send us pull requests.</p><p>Next up: <a href="https://github.com/facebook/jest/pull/1480" target="_blank">Concurrent Reporter</a>.</p></div><div class="read-more"><a href="/jest/blog/2016/09/01/jest-15.html">Read More</a></div></article></div><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><h1><a href="/jest/blog/2016/07/27/jest-14.html">Jest 14.0: React Tree Snapshot Testing</a></h1><p class="post-meta"><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-style="mega" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></p><p class="post-meta">July 27, 2016</p></header><article class="post-content"><div><p>One of Jest&#x27;s philosophies is to provide an integrated “zero-configuration” experience. We want to make it as frictionless as possible to write good tests that are useful. We observed that when engineers are provided with ready-to-use tools, they end up writing more tests, which in turn results in stable and healthy code bases.</p></div><div class="read-more"><a href="/jest/blog/2016/07/27/jest-14.html">Read More</a></div></article></div><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><h1><a href="/jest/blog/2016/06/22/jest-13.html">Jest 13.0: Flow &amp; REPL</a></h1><p class="post-meta"><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-style="mega" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></p><p class="post-meta">June 22, 2016</p></header><article class="post-content"><div><p>Today we are happy to announce the next major release of Jest. We have made major changes to Jest which are going to benefit you and all of Facebook&#x27;s JavaScript test infrastructure. Most importantly, we added static types to all of Jest&#x27;s code during a recent Jest hackathon at Facebook. Fifteen people worked for a day and night to add <a href="https://flowtype.org/" target="_blank">Flow</a> types to Jest and to add new features to Jest. The Flow types serve two purposes: First, we believe that code is written to be read. Most of the time, code is written only once but read by dozens of people over the course of years. Adding static types to the project helps document the code and helps explain some of the architecture in Jest. Second, adding static types makes maintenance easier and will allow us to more confidently refactor parts of Jest without fear of breakages.</p></div><div class="read-more"><a href="/jest/blog/2016/06/22/jest-13.html">Read More</a></div></article></div><div class="post"><header class="postHeader"><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"></a></div><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><h1><a href="/jest/blog/2016/04/12/jest-11.html">Jest 11.0</a></h1><p class="post-meta"><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-style="mega" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></p><p class="post-meta">April 12, 2016</p></header><article class="post-content"><div><p>Today we&#x27;re announcing a switch to major revisions for Jest with Jest 11.0 being the first major release. Jest has been used by Facebook engineers and on our continuous integration systems for years and we believe Jest has been way beyond a “1.0 release” for a long time. This is similar to a change <a href="http://facebook.github.io/react/blog/2016/02/19/new-versioning-scheme.html" target="_blank">the React team has made</a>.</p><p>If you are using Jest 0.9 or Jest 0.10 the upgrade should be seamless. All changes from the last few months were rolled into Jest 11.0.</p></div><div class="read-more"><a href="/jest/blog/2016/04/12/jest-11.html">Read More</a></div></article></div><div class="docs-prevnext"><a class="docs-next" href="/jest/blog/page2/#content">Next →</a></div></div></div></div></div><div class="footerContainer"><div class="wrapper footerWrapper"><div class="footerBlocks"><div class="footerSection fbOpenSourceFooter"><svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px"><g><path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z"></path><path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z"></path><path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z"></path></g></svg><h2>Facebook Open Source</h2></div><div class="footerSection"><a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">Open Source Projects</a><a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a><a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a></div><div class="footerSection rightAlign"><a class="footerLink" href="https://github.com/facebook/jest" target="_blank">Contribute on GitHub</a></div></div></div></div></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>