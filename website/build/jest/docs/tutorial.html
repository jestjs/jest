<html data-reactid=".2du4sn6nim8" data-react-checksum="-1783511335"><head data-reactid=".2du4sn6nim8.0"><meta charset="utf-8" data-reactid=".2du4sn6nim8.0.0"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" data-reactid=".2du4sn6nim8.0.1"><title data-reactid=".2du4sn6nim8.0.2">Jest | A JavaScript Testing Library</title><meta name="viewport" content="width=device-width" data-reactid=".2du4sn6nim8.0.3"><meta property="og:title" content="Jest | A JavaScript Testing Library" data-reactid=".2du4sn6nim8.0.4"><meta property="og:type" content="website" data-reactid=".2du4sn6nim8.0.5"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;jest&#x2f;index.html" data-reactid=".2du4sn6nim8.0.6"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;react&#x2f;img&#x2f;logo_og.png" data-reactid=".2du4sn6nim8.0.7"><meta property="og:description" content="A JavaScript Testing Library" data-reactid=".2du4sn6nim8.0.8"><meta property="fb:app_id" content="623268441017527" data-reactid=".2du4sn6nim8.0.9"><link rel="shortcut icon" href="http:&#x2f;&#x2f;facebook.github.io&#x2f;react&#x2f;favicon.ico" data-reactid=".2du4sn6nim8.0.a"><link rel="stylesheet" href="&#x2f;jest&#x2f;css&#x2f;jest.css" data-reactid=".2du4sn6nim8.0.b"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js" data-reactid=".2du4sn6nim8.0.c"></script><script type="text&#x2f;javascript" data-reactid=".2du4sn6nim8.0.d">try{Typekit.load();}catch(e){}</script></head><body data-reactid=".2du4sn6nim8.1"><div class="container" data-reactid=".2du4sn6nim8.1.0"><div class="nav-main" data-reactid=".2du4sn6nim8.1.0.0"><div class="wrap" data-reactid=".2du4sn6nim8.1.0.0.0"><a class="nav-home" href="&#x2f;jest&#x2f;index.html" data-reactid=".2du4sn6nim8.1.0.0.0.0">Jest</a><ul class="nav-site" data-reactid=".2du4sn6nim8.1.0.0.0.1"><li data-reactid=".2du4sn6nim8.1.0.0.0.1.$docs"><a href="&#x2f;jest&#x2f;docs&#x2f;tutorial.html" class="active" data-reactid=".2du4sn6nim8.1.0.0.0.1.$docs.0">docs</a></li><li data-reactid=".2du4sn6nim8.1.0.0.0.1.$support"><a href="&#x2f;jest&#x2f;support.html" class="" data-reactid=".2du4sn6nim8.1.0.0.0.1.$support.0">support</a></li><li data-reactid=".2du4sn6nim8.1.0.0.0.1.$github"><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;jest" class="" data-reactid=".2du4sn6nim8.1.0.0.0.1.$github.0">github</a></li></ul></div></div><section class="content wrap documentationContent" data-reactid=".2du4sn6nim8.1.0.1"><div class="nav-docs" data-reactid=".2du4sn6nim8.1.0.1.0"><div class="nav-docs-section" data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start"><h3 data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.0">Quick Start</h3><ul data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.1"><li data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.1.$getting-started"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;getting-started.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.1.$getting-started.0">Getting Started</a></li><li data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.1.$tutorial"><a style="margin-left:0;" class="active" href="&#x2f;jest&#x2f;docs&#x2f;tutorial.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Quick Start.1.$tutorial.0">Tutorial</a></li></ul></div><div class="nav-docs-section" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive"><h3 data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.0">Deep Dive</h3><ul data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1"><li data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$mock-functions"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;mock-functions.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$mock-functions.0">Mock functions</a></li><li data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$automatically-generated-mocks"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;automatically-generated-mocks.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$automatically-generated-mocks.0">Automatically generated mocks</a></li><li data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$manual-mocks"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;manual-mocks.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$manual-mocks.0">Manual mocks</a></li><li data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$timer-mocks"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;timer-mocks.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$timer-mocks.0">Timer mocks</a></li><li data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$dependency-injection"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;dependency-injection.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Deep Dive.1.$dependency-injection.0">Dependency Injection</a></li></ul></div><div class="nav-docs-section" data-reactid=".2du4sn6nim8.1.0.1.0.$Reference"><h3 data-reactid=".2du4sn6nim8.1.0.1.0.$Reference.0">Reference</h3><ul data-reactid=".2du4sn6nim8.1.0.1.0.$Reference.1"><li data-reactid=".2du4sn6nim8.1.0.1.0.$Reference.1.$api"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;api.html" data-reactid=".2du4sn6nim8.1.0.1.0.$Reference.1.$api.0">API</a></li></ul></div></div><div class="inner-content" data-reactid=".2du4sn6nim8.1.0.1.1"><h1 data-reactid=".2du4sn6nim8.1.0.1.1.0">Tutorial</h1><div data-reactid=".2du4sn6nim8.1.0.1.1.1"><hr data-reactid=".2du4sn6nim8.1.0.1.1.1.0"><p data-reactid=".2du4sn6nim8.1.0.1.1.1.1"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.1.0">We want to test the following function (borrowed from </span><a href="http:&#x2f;&#x2f;martinfowler.com&#x2f;articles&#x2f;asyncJS.html" data-reactid=".2du4sn6nim8.1.0.1.1.1.1.1"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.1.1.0">this great article on testing asynchronous functions</span></a><span data-reactid=".2du4sn6nim8.1.0.1.1.1.1.2">). It does an ajax request to get the current user as JSON, transforms this JSON into a new object and pass it to the callback. Very typical code.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.2"><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$0">&#x2f;&#x2f; fetchCurrentUser.js
</span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$1">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2"> $ </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$3">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.4"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$5"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$5.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$5.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$6">&#x27;jquery&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$7">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$8">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.9">

</span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$10">function</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.b"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$12"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$12.0">parseUserJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$12.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.d">userJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$14">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.f"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$16">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.h">
  </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$18">return</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.j"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$20">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.l">
    loggedIn</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$22">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.n"> </span><span class="token boolean" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$24">true</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$25">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.q">
    fullName</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$27">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.s"> userJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$29">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.u">firstName </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$31">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.w"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$33">&#x27; &#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.y"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$35">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.10"> userJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$37">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.12">lastName
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$39">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$40">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.15">
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$42">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$43">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.18">

</span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$45">function</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1a"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$47"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$47.0">fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$47.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1c">callback</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$49">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1e"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$51">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1g">
  </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$53">return</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1i"> $</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$55">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$56"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$56.0">ajax</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$56.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$57">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1m">
    type</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$59">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1o"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$61">&#x27;GET&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$62">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1r">
    url</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$64">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1t"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$66">&#x27;http:&#x2f;&#x2f;example.com&#x2f;currentUser&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$67">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1w">
    done</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$69">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.1y"> </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$71">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$72">(</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.21">userJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$74">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.23"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$76">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.25">
      </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$78"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$78.0">callback</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$78.$1">(</span></span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$79"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$79.0">parseUserJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$79.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.28">userJson</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$81">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$82">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$83">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2c">
    </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$85">}</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2e">
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$87">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$88">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$89">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2i">
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$91">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$92">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2l">

module</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$94">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2n">exports </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$96">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.2.2p"> fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.2.$98">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.3"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.3.0">In order to test the function we need to create a </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.3.1">__tests__&#x2f;</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.3.2"> folder where the file </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.3.3">fetchCurrentUser.js</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.3.4"> is. In this folder, we create a file called </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.3.5">fetchCurrentUser-test.js</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.3.6"> and put some boilerplate code in.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.4"><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$0">&#x2f;&#x2f; __tests__&#x2f;fetchCurrentUser-test.js
</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.1">jest</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$2">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$3"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$3.0">dontMock</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$3.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$4">&#x27;..&#x2f;fetchCurrentUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$5">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$6">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.7">

</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$8"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$8.0">describe</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$8.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$9">&#x27;fetchCurrentUser&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$10">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.b"> </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$12">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$13">(</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$14">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.f"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$16">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.h">
  </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$18"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$18.0">it</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$18.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$19">&#x27;creates a parsed user&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$20">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.l"> </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$22">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$23">(</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$24">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.p"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$26">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.r">
    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$28">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.t"> $ </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$30">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.v"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$32"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$32.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$32.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$33">&#x27;jquery&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$34">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$35">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.10">
    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$37">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.12"> fetchCurrentUser </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$39">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.14"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$41"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$41.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$41.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$42">&#x27;..&#x2f;fetchCurrentUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$43">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.4.$44">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.5"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.5.0">The most important line is </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.5.1">jest.dontMock(&#x27;..&#x2f;fetchCurrentUser.js&#x27;);</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.5.2">. Jest by default automatically turns all the require calls into mocks, we want to make sure that we don&#x27;t mock the file we are trying to test.</span></p><p data-reactid=".2du4sn6nim8.1.0.1.1.1.6"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.6.0">We want to make sure that the callback given to </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.6.1">fetchCurrentUser</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.6.2"> is correctly executed. In order to do that, we&#x27;re going to generate a mock function and make sure that it is called with the proper arguments.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.7"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.0">    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$1">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.2"> fetchCallback </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$3">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.4"> jest</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$5">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$6"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$6.0">genMockFunction</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$6.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$7">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$8">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.9">
    </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$10"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$10.0">fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$10.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.b">fetchCallback</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$12">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$13">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.e">

   </span><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$15"> &#x2f;&#x2f; ... missing code ...
</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.g">
    </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$17"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$17.0">expect</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$17.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.i">fetchCallback</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$19">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$20">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$21"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$21.0">toBeCalledWith</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$21.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$22">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.n">
      loggedIn</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$24">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.p"> </span><span class="token boolean" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$26">true</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$27">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.s">
      fullName</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$29">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.u"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$31">&#x27;Jeff Morrison&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.w">
    </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$33">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$34">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$35">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.10">
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$37">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$38">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$39">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.7.14">
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$41">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$42">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.7.$43">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.8"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.8.0">In order to compute the result, </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.8.1">fetchCurrentUser</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.8.2"> is calling to a dependency: </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.8.3">$.ajax</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.8.4">. To write a complete test, we first need to make sure that it is calling the dependency correctly.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.9"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.0">    </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$1"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$1.0">expect</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$1.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.2">$</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$3">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.4">ajax</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$5">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$6">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$7"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$7.0">toBeCalledWith</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$7.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$8">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.9">
      type</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$10">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.b"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$12">&#x27;GET&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$13">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.e">
      url</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$15">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.g"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$17">&#x27;http:&#x2f;&#x2f;example.com&#x2f;currentUser&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$18">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.j">
      done</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$20">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.l"> jasmine</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$22">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$23"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$23.0">any</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$23.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.o">Function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$25">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.9.q">
    </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$27">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$28">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.9.$29">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.a"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.a.0">In order to generate the mock for </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.a.1">$</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.a.2">, it requires the real jQuery file, inspects the result and converts all the functions into mocked functions. This way, </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.a.3">$.ajax</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.a.4"> is a mocked function that you can manipulate.</span></p><p data-reactid=".2du4sn6nim8.1.0.1.1.1.b"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.b.0">Now, we need to simulate a response for the ajax query.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.c"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.0">    $</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$1">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.2">ajax</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$3">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.4">mock</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$5">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.6">calls</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$7">[</span><span class="token number" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$8">0</span><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$9">&#x2f;*first call*&#x2f;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$10">]</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$11">[</span><span class="token number" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$12">0</span><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$13">&#x2f;*first argument*&#x2f;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$14">]</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$15">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$16"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$16.0">done</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$16.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$17">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.i">
      firstName</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$19">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.k"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$21">&#x27;Jeff&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$22">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.n">
      lastName</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$24">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.p"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$26">&#x27;Morrison&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.c.r">
    </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$28">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$29">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.c.$30">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.d"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.d.0">Mock functions have a </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.d.1">.mock</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.d.2"> property that stores all the interactions with the function. In this case, we are reading from </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.d.3">.calls</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.d.4"> which contains the arguments it was called with. We can traverse this list in order to find the callback and call it.</span></p><p data-reactid=".2du4sn6nim8.1.0.1.1.1.e"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.e.0">Now it is time to see if it worked</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.f"><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$0">&gt;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.1"> npm test
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$2">[</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.3">PASS</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$4">]</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.5"> jest</span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$6">&#x2f;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.7">examples</span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$8">&#x2f;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.9">__tests__</span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$10">&#x2f;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.b">fetchCurrentUser</span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$12">-</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.d">test</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$14">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.f">js </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$16">(</span><span class="token number" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$17">0</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$18">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.f.j">075s</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.f.$20">)</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.g"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.g.0">And that&#x27;s it, we just tested this asynchronous function. One thing to notice is that the code we&#x27;ve written is very synchronous. This is one of the strength of mock functions, the code you write to test synchronous or asynchronous functions looks exactly the same.</span></p><h2 data-reactid=".2du4sn6nim8.1.0.1.1.1.h"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.h.0">jQuery</span></h2><p data-reactid=".2du4sn6nim8.1.0.1.1.1.i"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.i.0">Another class of functions that is usually considered hard to test is code that contains DOM manipulations. Let see how we can test this jQuery snippet that listens to a click event, fetches some data asynchronously and sets the content of a span.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.j"><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$0">&#x2f;&#x2f; displayUser.js
</span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$1">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.2"> $ </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$3">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.4"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$5"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$5.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$5.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$6">&#x27;jquery&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$7">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$8">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.9">
</span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$10">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.b"> fetchCurrentUser </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$12">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.d"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$14"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$14.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$14.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$15">&#x27;.&#x2f;fetchCurrentUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$16">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$17">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.i">

$</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$19">(</span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$20">&#x27;#button&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$21">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$22">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$23"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$23.0">click</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$23.$1">(</span></span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$24">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$25">(</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$26">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.r"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$28">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.t">
  </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$30"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$30.0">fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$30.$1">(</span></span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$31">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$32">(</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.x">user</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$34">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.z"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$36">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.11">
    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$38">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.13"> loggedText </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$40">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.15"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$42">&#x27;Logged &#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.17"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$44">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.19"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$46">(</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1b">user</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$48">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1d">loggedIn </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$50">?</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1f"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$52">&#x27;In&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1h"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$54">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1j"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$56">&#x27;Out&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$57">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$58">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1n">
    $</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$60">(</span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$61">&#x27;#username&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$62">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$63">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$64"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$64.0">text</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$64.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1t">user</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$66">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1v">fullName </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$68">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1x"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$70">&#x27; - &#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.1z"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$72">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.21"> loggedText</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$74">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$75">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.24">
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$77">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$78">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$79">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.j.28">
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$81">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$82">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.j.$83">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.k"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.k.0">Again, we start by creating a test file in the </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.k.1">__tests__&#x2f;</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.k.2"> folder and make sure that we don&#x27;t mock the file we&#x27;re about to test.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.l"><span class="token comment" spellcheck="true" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$0">&#x2f;&#x2f; __tests__&#x2f;displayUser-test.js
</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.l.1">jest
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$2">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$3"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$3.0">dontMock</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$3.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$4">&#x27;..&#x2f;displayUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.l.$5">)</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.m"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.m.0">This time, we don&#x27;t want to test the interface between jQuery and the function but instead we want to let jQuery run as is and test the result directly in the DOM. In order to do that, we just need to tell Jest not to mock jQuery.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.n"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.n.0">  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$1">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$2"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$2.0">dontMock</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$2.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$3">&#x27;jquery&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$4">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.n.$5">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.o"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.o.0">The function we are testing is adding an event listener on the </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.o.1">#button</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.o.2"> DOM element, so we need to setup our DOM correctly for the test. Jest ships with </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.o.3">jsdom</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.o.4"> which simulates a DOM environment as if you were in the browser.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.p"><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$0"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$0.0">describe</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$0.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$1">&#x27;displayUser&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$2">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.3"> </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$4">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$5">(</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$6">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.7"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$8">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.9">
  </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$10"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$10.0">it</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$10.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$11">&#x27;displays a user after a click&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$12">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.d"> </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$14">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$15">(</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$16">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.h"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$18">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.j">
    document</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$20">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.l">body</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$22">.</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.n">innerHTML </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$24">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.p">
      </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$26">&#x27;&lt;div&gt;&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.r"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$28">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.t">
      </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$30">&#x27;  &lt;span id=&quot;username&quot; &#x2f;&gt;&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.v"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$32">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.x">
      </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$34">&#x27;  &lt;button id=&quot;button&quot; &#x2f;&gt;&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.z"> </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$36">+</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.p.11">
      </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$38">&#x27;&lt;&#x2f;div&gt;&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.p.$39">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.q"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.q.0">We now require all the dependencies and make sure that they correctly interact with the function we want to test. jQuery is not mocked so we don&#x27;t need to do anything. </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.q.1">fetchCurrentUser</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.q.2"> needs to call the callback it is given to with some fake user. We use </span><code data-reactid=".2du4sn6nim8.1.0.1.1.1.q.3">mockImplementation</code><span data-reactid=".2du4sn6nim8.1.0.1.1.1.q.4"> in order to do that.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.r"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.0">    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$1">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.2"> displayUser </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$3">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.4"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$5"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$5.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$5.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$6">&#x27;..&#x2f;displayUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$7">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$8">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.9">
    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$10">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.b"> $ </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$12">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.d"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$14"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$14.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$14.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$15">&#x27;jquery&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$16">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$17">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.i">
    </span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$19">var</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.k"> fetchCurrentUser </span><span class="token operator" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$21">=</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.m"> </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$23"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$23.0">require</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$23.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$24">&#x27;..&#x2f;fetchCurrentUser.js&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$25">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$26">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.r">
    fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$28">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$29"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$29.0">mockImplementation</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$29.$1">(</span></span><span class="token keyword" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$30">function</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$31">(</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.w">cb</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$33">)</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.y"> </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$35">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.10">
      </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$37"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$37.0">cb</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$37.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$38">{</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.13">
        loggedIn</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$40">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.15"> </span><span class="token boolean" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$42">true</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$43">,</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.18">
        fullName</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$45">:</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.1a"> </span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$47">&#x27;Jeff Morrison&#x27;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.1c">
      </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$49">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$50">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$51">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.r.1g">
    </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$53">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$54">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.r.$55">;</span></div><p data-reactid=".2du4sn6nim8.1.0.1.1.1.s"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.s.0">Finally, we simulate a click and make sure that the dependency is called and that the DOM has been correctly updated.</span></p><div class="prism language-javascript" data-reactid=".2du4sn6nim8.1.0.1.1.1.t"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.0">    $</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$1">(</span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$2">&#x27;#button&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$3">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$4">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$5"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$5.0">click</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$5.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$6">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$7">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.8">
    </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$9"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$9.0">expect</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$9.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.a">fetchCurrentUser</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$11">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$12">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$13"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$13.0">toBeCalled</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$13.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$14">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$15">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.g">
    </span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$17"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$17.0">expect</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$17.$1">(</span></span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.i">$</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$19">(</span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$20">&#x27;#username&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$21">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$22">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$23"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$23.0">text</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$23.$1">(</span></span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$24">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$25">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$26">.</span><span class="token function" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$27"><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$27.0">toEqual</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$27.$1">(</span></span><span class="token string" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$28">&#x27;Jeff Morrison - Logged In&#x27;</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$29">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$30">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.v">
  </span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$32">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$33">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$34">;</span><span data-reactid=".2du4sn6nim8.1.0.1.1.1.t.z">
</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$36">}</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$37">)</span><span class="token punctuation" data-reactid=".2du4sn6nim8.1.0.1.1.1.t.$38">;</span></div></div><div class="docs-prevnext" data-reactid=".2du4sn6nim8.1.0.1.1.2"><a class="docs-prev" href="getting-started.html" data-reactid=".2du4sn6nim8.1.0.1.1.2.0"> Prev</a><a class="docs-next" href="mock-functions.html" data-reactid=".2du4sn6nim8.1.0.1.1.2.1">Next </a></div></div></section><footer class="wrap" data-reactid=".2du4sn6nim8.1.0.2"><div class="right" data-reactid=".2du4sn6nim8.1.0.2.0"> 2014 Facebook Inc.</div></footer></div><div id="fb-root" data-reactid=".2du4sn6nim8.1.1"></div><script data-reactid=".2du4sn6nim8.1.2">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-41298772-1', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script><script type="text/javascript" src="/jest/docs/tutorial.includeRequire.bundle"> </script><packaged ></packaged><script type="text/javascript">require('es5-shim/es5-shim.js');require('es5-shim/es5-sham.js');var React = require('React');var ReactMount = require('ReactMount');var Component = require('website/src/jest/docs/tutorial.js');ReactMount.allowFullPageRender = true;React.renderComponent(Component({"requestParams":{}}),document);</script></body></html>